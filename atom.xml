<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>HHH&#39;Blog</title>
  <subtitle>it&#39;s time to fight for myself</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://super3h.me/"/>
  <updated>2017-03-24T09:01:25.172Z</updated>
  <id>https://super3h.me/</id>
  
  <author>
    <name>super3H</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SpringMVC初学</title>
    <link href="https://super3h.me/2017/03/24/SpringMVC%E5%88%9D%E5%AD%A6/"/>
    <id>https://super3h.me/2017/03/24/SpringMVC初学/</id>
    <published>2017-03-24T06:24:22.452Z</published>
    <updated>2017-03-24T09:01:25.172Z</updated>
    
    <content type="html"><![CDATA[<h1 id="SpringMVC框架介绍"><a href="#SpringMVC框架介绍" class="headerlink" title="SpringMVC框架介绍"></a>SpringMVC框架介绍</h1><blockquote>
<p>Spring的MVC框架主要由DispatcherServlet、处理器映射、处理器(控制器)、视图解析器、视图组成。</p>
</blockquote>
<h1 id="SpringMVC原理图"><a href="#SpringMVC原理图" class="headerlink" title="SpringMVC原理图"></a>SpringMVC原理图</h1><p><img src="/2017/03/24/SpringMVC初学/1.jpg" alt=""></p>
<ul>
<li><code>1.Http请求：</code> 客户端请求提交到DispatcherServlet。 </li>
<li><code>2.寻找处理器：</code>由DispatcherServlet控制器查询一个或多个HandlerMapping，找到处理请求的Controller。</li>
<li><code>3.调用处理器：</code>DispatcherServlet将请求提交到Controller。 </li>
<li><code>4、5、调用业务处理和返回结果：</code>Controller调用业务逻辑处理后，返回ModelAndView。 </li>
<li><code>6、7、处理视图映射并返回模型：</code> DispatcherServlet查询一个或多个ViewResoler视图解析器，找到ModelAndView指定的视图。 </li>
<li><code>8.Http响应：</code>视图负责将结果显示到客户端。</li>
</ul>
<h1 id="SpringMVC接口解释"><a href="#SpringMVC接口解释" class="headerlink" title="SpringMVC接口解释"></a>SpringMVC接口解释</h1><ul>
<li><code>DispatcherServlet接口：</code><pre><code>&lt;font color=&apos;#48B492&apos;&gt;Spring提供的前端控制器，所有的请求都有经过它来统一分发。在DispatcherServlet将请求分发给Spring Controller之前，需要借助于Spring提供的HandlerMapping定位到具体的Controller。&lt;/font&gt;
</code></pre></li>
<li><code>HandlerMapping接口：</code><pre><code>&lt;font color=&apos;#48B492&apos;&gt;能够完成客户请求到Controller映射。&lt;/font&gt;
</code></pre></li>
<li><code>Controller接口：</code><pre><code>&lt;font color=&apos;#48B492&apos;&gt;需要为并发用户处理上述请求，因此实现Controller接口时，必须保证线程安全并且可重用。
Controller将处理用户请求，这和Struts Action扮演的角色是一致的。一旦Controller处理完用户请求，则返回ModelAndView对象给DispatcherServlet前端控制器，ModelAndView中包含了模型（Model）和视图（View）。
从宏观角度考虑，DispatcherServlet是整个Web应用的控制器；从微观考虑，Controller是单个Http请求处理过程中的控制器，而ModelAndView是Http请求过程中返回的模型（Model）和视图（View）。&lt;/font&gt;
</code></pre></li>
<li><code>ViewResolver接口：</code><pre><code>&lt;font color=&apos;#48B492&apos;&gt;Spring提供的视图解析器（ViewResolver）在Web应用中查找View对象，从而将相应结果渲染给客户。&lt;/font&gt;
</code></pre></li>
</ul>
<h1 id="DispatcherServlet"><a href="#DispatcherServlet" class="headerlink" title="DispatcherServlet"></a>DispatcherServlet</h1><blockquote>
<p>DispatcherServlet是整个Spring MVC的核心。它负责接收HTTP请求组织协调Spring MVC的各个组成部分。其主要工作有以下三项：</p>
</blockquote>
<ol>
<li>截获符合特定格式的URL请求。</li>
<li>初始化DispatcherServlet上下文对应的WebApplicationContext，并将其与业务层、持久化层的WebApplicationContext建立关联。</li>
<li>初始化Spring MVC的各个组成组件，并装配到DispatcherServlet中。</li>
</ol>
<h1 id="web-xml配置解释"><a href="#web-xml配置解释" class="headerlink" title="web-xml配置解释"></a>web-xml配置解释</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>SpringMVC_day01<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></div><div class="line">  </div><div class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloWeb<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>WEB-INF/spring/HelloWeb-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloWeb<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span><span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li><code>init-param:</code><ul>
<li>HelloWeb DispatcherServlet初始化时，框架将尝试从位于应用程序的WebContent/WEB-INF目录中的名为[servlet-name]-servlet.xml的文件加载应用程序上下文。</li>
<li>这里我们配置此参数，让其从<code>WEB-INF/spring/HelloWeb-servlet.xml</code>下读取配置文件</li>
</ul>
</li>
<li><code>load-on-startup:</code><ul>
<li>当值为0或者大于0时，表示容器在应用启动时就加载这个servlet；</li>
<li>当是一个负数时或者没有指定时，则指示容器在该servlet被选择时才加载。</li>
<li>正数的值越小，启动该servlet的优先级越高</li>
</ul>
</li>
</ul>
<h1 id="HelloWeb-servlet-xml"><a href="#HelloWeb-servlet-xml" class="headerlink" title="HelloWeb-servlet.xml"></a>HelloWeb-servlet.xml</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">   <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">   <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">   <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></div><div class="line">   http://www.springframework.org/schema/beans     </div><div class="line">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</div><div class="line">   http://www.springframework.org/schema/context </div><div class="line">   http://www.springframework.org/schema/context/spring-context-3.0.xsd"&gt;</div><div class="line"></div><div class="line">   <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.yiibai"</span> /&gt;</span></div><div class="line"></div><div class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/jsp/"</span> /&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span> /&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>以下是有关<code>HelloWeb-servlet.xml</code>文件的重点说明：</p>
<pre><code>- `[servlet-name]-servlet.xml`文件将用于创建定义的`bean`，它会覆盖在全局范围中使用相同名称定义的任何`bean`的定义
- `&lt;context：component-scan ...&gt;`标签将用于激活Spring MVC注释扫描功能，允许使用`@Controller和@RequestMapping`等注释。
- `InternalResourceViewResolver`将定义用于解析视图名称的规则。`prefix`：定位文件所在位置，`suffix:`文件后缀。根据上面定义的规则，`hello`的逻辑视图将委托给位于`/WEB-INF/jsp/hello.jsp`这个视图来实现。
</code></pre><h1 id="Controller解释"><a href="#Controller解释" class="headerlink" title="Controller解释"></a>Controller解释</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.springmvc;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</div><div class="line"><span class="keyword">import</span> org.springframework.ui.ModelMap;</div><div class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</div><div class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</div><div class="line"></div><div class="line"><span class="meta">@Controller</span></div><div class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/hello"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="meta">@RequestMapping</span>(method=RequestMethod.GET)</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">printHello</span><span class="params">(ModelMap modelMap)</span></span>&#123;</div><div class="line">		modelMap.put(<span class="string">"message"</span>, <span class="string">"hello spring mvc"</span>);</div><div class="line">		<span class="keyword">return</span> <span class="string">"hello"</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>@Controller</code>注释将类定义为Spring MVC控制器。这里<code>@RequestMapping</code>的第一个用法表示此控制器上的所有处理方法都与<code>/hello</code>路径相关。 下一个注释<code>@RequestMapping(method = RequestMethod.GET)</code>用于声明<code>printHello()</code>方法作为控制器的默认服务方法来处理HTTP GET请求。可以定义另一个方法来处理同一URL的任何POST请求。<br>可以以另一种形式在上面的控制器中编写，在<code>@RequestMapping</code>中添加其他属性，如下所示：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.springmvc;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</div><div class="line"><span class="keyword">import</span> org.springframework.ui.ModelMap;</div><div class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</div><div class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</div><div class="line"></div><div class="line"><span class="meta">@Controller</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="meta">@RequestMapping</span>(value=<span class="string">"/hello"</span>,method=RequestMethod.GET)</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">printHello</span><span class="params">(ModelMap modelMap)</span></span>&#123;</div><div class="line">		modelMap.put(<span class="string">"message"</span>, <span class="string">"hello spring mvc"</span>);</div><div class="line">		<span class="keyword">return</span> <span class="string">"hello"</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><code>value</code>属性<strong><font color="#D55555">指示处理程序方法映射到的URL，method属性定义处理HTTP GET请求的服务方法。关于以上定义的控制器，需要注意以下几点：</font></strong><ul>
<li><strong><font color="#808080">在服务方法中定义所需的业务逻辑。可以根据需要在此方法内调用其他方法</font></strong></li>
<li><strong><font color="#808080">基于定义的业务逻辑，将在此方法中创建一个模型。可以设置不同的模型属性，这些属性将被视图访问以呈现最终结果。此示例创建且有属性“<code>message</code>”的模型。</font></strong></li>
<li><strong><font color="#808080">定义的服务方法可以返回一个String，它包含要用于渲染模型的视图的名称。此示例将“hello”返回为逻辑视图名称。</font></strong></li>
</ul>
</li>
</ul>
<h1 id="创建JSP视图"><a href="#创建JSP视图" class="headerlink" title="创建JSP视图"></a>创建JSP视图</h1><blockquote>
<p>Spring MVC支持许多类型的视图用于不同的表示技术。<strong>包括 - JSP，HTML，PDF，Excel工作表，XML，Velocity模板，XSLT，JSON，Atom 和 RSS 源，JasperReports等。但最常见的是使用JSPL编写的JSP模板</strong>，这里使用的是JSP模板，并在<code>/WEB-INF/hello/hello.jsp</code>中写一个简单的hello视图：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello Spring MVC<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">h2</span>&gt;</span>$&#123;message&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>这里<code>${message}</code>是在<code>Controller</code>中设置的属性。可以在视图中显示多个属性。</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="http://blog.csdn.net/jianyuerensheng/article/details/51258942" target="_blank" rel="external">【Spring】Spring MVC原理及配置详解</a><br><a href="http://blog.csdn.net/liang5630/article/details/43733733" target="_blank" rel="external">SpringMVC工作原理</a><br><a href="http://www.yiibai.com/spring_mvc/springmvc_overview.html" target="_blank" rel="external">Spring MVC概述</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;SpringMVC框架介绍&quot;&gt;&lt;a href=&quot;#SpringMVC框架介绍&quot; class=&quot;headerlink&quot; title=&quot;SpringMVC框架介绍&quot;&gt;&lt;/a&gt;SpringMVC框架介绍&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;Spring的MVC框架主
    
    </summary>
    
      <category term="SpringMVC" scheme="https://super3h.me/categories/SpringMVC/"/>
    
    
  </entry>
  
  <entry>
    <title>python的字节与字符</title>
    <link href="https://super3h.me/2017/03/23/python%E7%9A%84%E5%AD%97%E8%8A%82%E4%B8%8E%E5%AD%97%E7%AC%A6/"/>
    <id>https://super3h.me/2017/03/23/python的字节与字符/</id>
    <published>2017-03-23T01:05:55.623Z</published>
    <updated>2017-03-23T01:24:29.702Z</updated>
    
    <content type="html"><![CDATA[<h1 id="str与unicode"><a href="#str与unicode" class="headerlink" title="str与unicode"></a>str与unicode</h1><blockquote>
<p>Python2 把字符串分为 unicode 和 str 两种类型。本质上 str 是一串二进制字节序列，下面的示例代码可以看出 str 类型的 “禅” 打印出来是十六进制的 \xec\xf8 ，对应的二进制字节序列就是 ‘11101100 11111000’。</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">'禅'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s</div><div class="line"><span class="string">'\xec\xf8'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(s)</div><div class="line">&lt;type <span class="string">'str'</span>&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p>而 unicode 类型的 u”禅” 对应的 unicode 符号是 u’\u7985’</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>u = <span class="string">u"禅"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>u</div><div class="line"><span class="string">u'\u7985'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(u)</div><div class="line">&lt;type <span class="string">'unicode'</span>&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p>我们要把 unicode 符号保存到文件或者传输到网络就需要经过编码处理转换成 str 类型，于是 python 提供了 encode 方法，从 unicode 转换到 str，反之亦然。</p>
</blockquote>
<h1 id="encode与decode"><a href="#encode与decode" class="headerlink" title="encode与decode"></a>encode与decode</h1><ul>
<li><p>encode</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>u = <span class="string">u"禅"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>u</div><div class="line"><span class="string">u'\u7985'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>u.encode(<span class="string">"utf-8"</span>)</div><div class="line"><span class="string">'\xe7\xa6\x85'</span></div></pre></td></tr></table></figure>
</li>
<li><p>decode</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">"禅"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.decode(<span class="string">"utf-8"</span>)</div><div class="line"><span class="string">u'\u7985'</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>unicode 到 str 的转换要用 encode 方法，反过来就是用 decode 方法</p>
</blockquote>
<h1 id="UnicodeEncodeError"><a href="#UnicodeEncodeError" class="headerlink" title="UnicodeEncodeError"></a>UnicodeEncodeError</h1><blockquote>
<p>UnicodeEncodeError 发生在 unicode 字符串转换成 str 字节序列的时候，来看一个例子，把一串 unicode 字符串保存到文件</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -*- coding:utf-8 -*-</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    name = <span class="string">u'Python之禅'</span></div><div class="line">    f = open(<span class="string">"output.txt"</span>, <span class="string">"w"</span>)</div><div class="line">    f.write(name)</div><div class="line"></div><div class="line"><span class="comment"># 错误如下</span></div><div class="line">UnicodeEncodeError: <span class="string">'ascii'</span> codec can<span class="string">'t encode characters in position 6-7: ordinal not in range(128)</span></div></pre></td></tr></table></figure>
<blockquote>
<p><code>原因:</code><font color="#E7C800">因为调用 write 方法时，Python 会先判断字符串是什么类型，如果是 str，就直接写入文件，不需要编码，因为 str 类型的字符串本身就是一串二进制的字节序列了。</font></p>
<p><font color="#008AE2">如果字符串是 unicode 类型，那么它会先调用 encode 方法把 unicode 字符串转换成二进制形式的 str 类型，才保存到文件，而 encode 方法会使用 python 默认的 ascii 码来编码</font><br>相当于：</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">u"Python之禅"</span>.encode(<span class="string">"ascii"</span>)</div></pre></td></tr></table></figure>
<blockquote>
<p>但是，<strong>我们知道 ASCII 字符集中只包含了128个拉丁字母，不包括中文字符</strong>，因此 出现了 ‘ascii’ codec can’t encode characters 的错误。要正确地使用 encode ，就必须指定一个包含了中文字符的字符集，比如：UTF-8、GBK。</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">u"Python之禅"</span>.encode(<span class="string">"utf-8"</span>)</div><div class="line"><span class="string">'Python\xe4\xb9\x8b\xe7\xa6\x85'</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">u"Python之禅"</span>.encode(<span class="string">"gbk"</span>)</div><div class="line"><span class="string">'Python\xd6\xae\xec\xf8'</span></div></pre></td></tr></table></figure>
<blockquote>
<p>所以要把 unicode 字符串正确地写入文件，就应该预先把字符串进行 UTF-8 或 GBK 编码转换。</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    name = <span class="string">u'Python之禅'</span></div><div class="line">    name = name.encode(<span class="string">'utf-8'</span>)</div><div class="line">    <span class="keyword">with</span> open(<span class="string">"output.txt"</span>, <span class="string">"w"</span>) <span class="keyword">as</span> f:</div><div class="line">        f.write(name)</div></pre></td></tr></table></figure>
<h1 id="UnicodeDecodeError"><a href="#UnicodeDecodeError" class="headerlink" title="UnicodeDecodeError"></a>UnicodeDecodeError</h1><blockquote>
<p>UnicodeDecodeError 发生在 str 类型的字节序列解码成 unicode 类型的字符串时</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">u"禅"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line"><span class="string">u'\u7985'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = a.encode(<span class="string">"utf-8"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b</div><div class="line"><span class="string">'\xe7\xa6\x85'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b.decode(<span class="string">"gbk"</span>)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">UnicodeDecodeError: <span class="string">'gbk'</span> codec can<span class="string">'t decode byte 0x85 in position 2: incomplete multibyte sequence</span></div></pre></td></tr></table></figure>
<blockquote>
<font color="#E77575">把一个经过 UTF-8 编码后生成的字节序列 ‘\xe7\xa6\x85’ 再用 GBK 解码转换成 unicode 字符串时，出现 UnicodeDecodeError，因为 （对于中文字符）GBK 编码只占用两个字节，而 UTF-8 占用3个字节，用 GBK 转换时，还多出一个字节，因此它没法解析。避免 UnicodeDecodeError 的关键是保持 编码和解码时用的编码类型一致。</font>

<p>再举一个 UnicodeDecodeError 的例子</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; x = u"Python"</div><div class="line">&gt;&gt;&gt; y = "之禅"</div><div class="line">&gt;&gt;&gt; x + y</div><div class="line">Traceback (most recent call last):</div><div class="line">  File "&lt;stdin&gt;", line 1, in &lt;module&gt;</div><div class="line">UnicodeDecodeError: 'ascii' codec can't decode byte 0xe4 in position 0: ordinal not in range(128)</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<blockquote>
<font color="#8AB475">str 与 unicode 字符串 执行 + 操作是，Python 会把 str 类型的字节序列隐式地转换成（解码）成 和 x 一样的 unicode 类型，但Python是使用默认的 ascii 编码来转换的，而 ASCII 中不包含中文，所以报错了。</font>

</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>y.decode(<span class="string">'ascii'</span>)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">UnicodeDecodeError: <span class="string">'ascii'</span> codec can<span class="string">'t decode byte 0xe4 in position 0: ordinal not in range(128)</span></div></pre></td></tr></table></figure>
<blockquote>
<p>正确地方式应该是显示地把 y 用 UTF-8 或者 GBK 进行解码。</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="string">u"Python"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y = <span class="string">"之禅"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y = y.decode(<span class="string">"utf-8"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x + y</div><div class="line"><span class="string">u'Python\u4e4b\u7985'</span></div></pre></td></tr></table></figure>
<h1 id="原文参考"><a href="#原文参考" class="headerlink" title="原文参考"></a>原文参考</h1><blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/25924333" target="_blank" rel="external">Python 编码为什么那么蛋疼？</a>，感谢作者让我理解了一直困惑我的问题！！！</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;str与unicode&quot;&gt;&lt;a href=&quot;#str与unicode&quot; class=&quot;headerlink&quot; title=&quot;str与unicode&quot;&gt;&lt;/a&gt;str与unicode&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;Python2 把字符串分为 unicod
    
    </summary>
    
      <category term="Python" scheme="https://super3h.me/categories/Python/"/>
    
    
  </entry>
  
  <entry>
    <title>爬虫-爬取学校官网</title>
    <link href="https://super3h.me/2017/03/19/%E7%88%AC%E8%99%AB-%E7%88%AC%E5%8F%96%E5%AD%A6%E6%A0%A1%E5%AE%98%E7%BD%91/"/>
    <id>https://super3h.me/2017/03/19/爬虫-爬取学校官网/</id>
    <published>2017-03-19T14:40:10.986Z</published>
    <updated>2017-03-19T15:20:26.338Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<p>之前断断续续的学习爬虫，结果忘得差不多了，现在重新开始认真学，公众号也要认真弄了，之前做了就一直没管  哈哈  就图个装逼！！</p>
</blockquote>
<h1 id="结构分析"><a href="#结构分析" class="headerlink" title="结构分析"></a>结构分析</h1><p><img src="/2017/03/19/爬虫-爬取学校官网/1.png" alt=""></p>
<blockquote>
<p>正常的登录界面，可以写出以下代码:</p>
</blockquote>
<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 传入对应用户名(studentnumber),密码(password),学校官网(schoolURL)</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,studentnumber,password,schoolURL)</span>:</span></div><div class="line">        self.studentnumber = studentnumber</div><div class="line">        self.password = password</div><div class="line">        self.schoolURL = schoolURL</div><div class="line">        resp = requests.get(schoolURL)</div><div class="line">        self.sl = etree.HTML(resp.content)</div></pre></td></tr></table></figure>
<blockquote>
<p>接下来就是验证码了，由于并没有找到好的库来识别验证码，就采用人工输入好了，就像超级课程表那样</p>
</blockquote>
<h2 id="验证码"><a href="#验证码" class="headerlink" title="验证码"></a>验证码</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#拿到图片</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getCheckCode</span><span class="params">(self)</span>:</span></div><div class="line">        imgURL = self.schoolURL+<span class="string">'/CheckCode.aspx'</span></div><div class="line">        imgResp = requests.get(imgURL, stream=<span class="keyword">True</span>)</div><div class="line">        image = imgResp.content</div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            <span class="keyword">with</span> open(<span class="string">'code.jpg'</span>,<span class="string">'wb'</span>) <span class="keyword">as</span> f:</div><div class="line">                f.write(image)</div><div class="line">        <span class="keyword">except</span> IOError,e:</div><div class="line">            print(<span class="string">"IO Error:%s"</span> % e)</div><div class="line">        <span class="keyword">finally</span>:</div><div class="line">            f.close()</div></pre></td></tr></table></figure>
<blockquote>
<p>拿到图片，并下载到本地</p>
</blockquote>
<h2 id="数据准备"><a href="#数据准备" class="headerlink" title="数据准备"></a>数据准备</h2><p><img src="/2017/03/19/爬虫-爬取学校官网/2.png" alt=""></p>
<blockquote>
<p>由图可知所需发送的数据:</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">getData</span><span class="params">(self,checkCode)</span>:</span></div><div class="line">        VIEWSTATE = self.sl.xpath(<span class="string">'//input[@name="__VIEWSTATE"]/@value'</span>)[<span class="number">0</span>]</div><div class="line">        VIEWSTATEGENERATOR = self.sl.xpath(<span class="string">'//input[@name="__VIEWSTATEGENERATOR"]/@value'</span>)[<span class="number">0</span>]</div><div class="line">        data = &#123;</div><div class="line">            <span class="string">'__VIEWSTATE'</span>: VIEWSTATE,</div><div class="line">            <span class="string">'__VIEWSTATEGENERATOR'</span>: VIEWSTATEGENERATOR,</div><div class="line">            <span class="string">'txtUserName'</span>: self.studentnumber,</div><div class="line">            <span class="string">'Textbox1'</span>: <span class="string">''</span>,</div><div class="line">            <span class="string">'Textbox2'</span>: self.password,</div><div class="line">            <span class="string">'txtSecretCode'</span>: checkCode,</div><div class="line">            <span class="string">'RadioButtonList1'</span>:<span class="string">u'学生'</span>.encode(<span class="string">'gb2312'</span>),</div><div class="line">            <span class="string">'Button1'</span>:<span class="string">''</span>,</div><div class="line">            <span class="string">'lbLanguage'</span>:<span class="string">''</span>,</div><div class="line">            <span class="string">'hidPdrs'</span>:<span class="string">''</span>,</div><div class="line">            <span class="string">'hidsc'</span>:<span class="string">''</span></div><div class="line">            &#125;</div><div class="line">        <span class="keyword">return</span> data</div></pre></td></tr></table></figure>
<h2 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h2><blockquote>
<p>登录并拿到登陆者的姓名</p>
</blockquote>
<p><img src="/2017/03/19/爬虫-爬取学校官网/3.png" alt=""><br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(self,checkCode)</span>:</span>    </div><div class="line">        headers = &#123;</div><div class="line">            <span class="string">"User-Agent"</span>:<span class="string">"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.110 Safari/537.36"</span>,</div><div class="line">        &#125;</div><div class="line">        data = self.getData(checkCode)</div><div class="line">        <span class="comment">#登陆教务系统</span></div><div class="line">        response = requests.post(self.schoolURL,data=data,headers=headers)</div><div class="line">        successSl = etree.HTML((response.content).decode(<span class="string">'gb2312'</span>))</div><div class="line"><span class="comment">#         print response.encoding</span></div><div class="line"><span class="comment">#       去除登陆者姓名同学两字(xxx同学)</span></div><div class="line">        self.name = successSl.xpath(<span class="string">'//span[@id="xhxm"]/text()'</span>)[<span class="number">0</span>][:<span class="number">-2</span>]</div></pre></td></tr></table></figure></p>
<blockquote>
<p>登录，并拿到登录者姓名</p>
</blockquote>
<h2 id="进入课表页面"><a href="#进入课表页面" class="headerlink" title="进入课表页面"></a>进入课表页面</h2><p><img src="/2017/03/19/爬虫-爬取学校官网/4.png" alt=""></p>
<blockquote>
<p>可知queryString为tjkbcx.aspx?xh=2014115010127&amp;xm=黄辉辉&amp;gnmkdm=N121601，代码如下:</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">getCourse</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment">#tjkbcx.aspx?xh=2014115010127&amp;xm=黄辉辉&amp;gnmkdm=N121601</span></div><div class="line">        courseString = &#123;</div><div class="line">            <span class="string">'xh'</span>:self.studentnumber,</div><div class="line">            <span class="string">'xm'</span>:self.name,</div><div class="line">            <span class="string">'gnmkdm'</span>:<span class="string">'N121601'</span></div><div class="line">        &#125;</div><div class="line">        baseURL = <span class="string">"tjkbcx.aspx?%s"</span> % urllib.urlencode(courseString)</div><div class="line">        courseURL = self.schoolURL+baseURL</div><div class="line"><span class="comment">#         print courseURL</span></div><div class="line">        <span class="comment">#必须要有Referer这个参数，否者跳到登录页面</span></div><div class="line">        headers = &#123;</div><div class="line">        <span class="string">"Referer"</span>:<span class="string">"http://www.jwgl.hbnu.edu.cn/(qsyyr145roe1hwvyfoylp445)/default2.aspx"</span>,</div><div class="line">        <span class="string">"User-Agent"</span>:<span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36"</span>,</div><div class="line">         &#125;</div><div class="line">        contents =  resp.content.decode(<span class="string">'gb2312'</span>)</div><div class="line">        sl = etree.HTML(contents)</div><div class="line">        <span class="keyword">for</span> course <span class="keyword">in</span> sl.xpath(<span class="string">'//td/text()'</span>):</div><div class="line">            <span class="keyword">print</span> course</div></pre></td></tr></table></figure>
<blockquote>
<p>由于表格样式不好调试，可以通过截屏拿到课表</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">driver = webdriver.PhantomJS()</div><div class="line">driver.get(courseURL)</div><div class="line">driver.save_screenshot(<span class="string">"course.jpg"</span>)</div></pre></td></tr></table></figure>
<blockquote>
<p>由于缺少请求头，上网查后发现:</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">dcap = dict(DesiredCapabilities.PHANTOMJS)</div><div class="line">dcap[<span class="string">"phantomjs.page.settings.userAgent"</span>] = (</div><div class="line">         <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36"</span></div><div class="line">  )</div><div class="line">driver = webdriver.PhantomJS(desired_capabilities=dcap)</div></pre></td></tr></table></figure>
<blockquote>
<p>由于请求头还缺少<code>referer</code>，导致跳转到登录页面，最后截图成了登录页面。。。。我也是醉了，找了我一下午，还没找到，有网友找到后，请告知，谢啦！！</p>
</blockquote>
<p><img src="/2017/03/19/爬虫-爬取学校官网/course.jpg" alt=""></p>
<h1 id="所遇问题"><a href="#所遇问题" class="headerlink" title="所遇问题"></a>所遇问题</h1><blockquote>
<p>解决中文编码<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sel.xpath(<span class="string">u"//h2[text()= 'xx']"</span>)</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="http://blog.csdn.net/nghuyong/article/details/51622888" target="_blank" rel="external">python爬虫正方教务系统</a><br><a href="http://www.jianshu.com/p/2631bf34328e" target="_blank" rel="external">爬虫：3. selenium</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;之前断断续续的学习爬虫，结果忘得差不多了，现在重新开始认真学，公众号也要认真弄了，之前做了就一直没管  哈哈  就
    
    </summary>
    
      <category term="python-crawler" scheme="https://super3h.me/categories/python-crawler/"/>
    
    
  </entry>
  
  <entry>
    <title>页面点赞</title>
    <link href="https://super3h.me/2017/03/17/%E9%A1%B5%E9%9D%A2%E7%82%B9%E8%B5%9E/"/>
    <id>https://super3h.me/2017/03/17/页面点赞/</id>
    <published>2017-03-17T12:54:38.828Z</published>
    <updated>2017-03-20T01:08:41.090Z</updated>
    
    <content type="html"><![CDATA[<h1 id="页面点赞"><a href="#页面点赞" class="headerlink" title="页面点赞"></a>页面点赞</h1><h2 id="css样式"><a href="#css样式" class="headerlink" title="css样式"></a>css样式</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.zan</span>,<span class="selector-class">.zan1</span> &#123;</div><div class="line">				<span class="attribute">width</span>: <span class="number">60px</span>;</div><div class="line">				<span class="attribute">height</span>: <span class="number">60px</span>;</div><div class="line">				<span class="attribute">position</span>: relative;</div><div class="line">				<span class="attribute">float</span>: right;</div><div class="line">				<span class="attribute">padding-left</span>: <span class="number">40px</span>;</div><div class="line">				<span class="attribute">margin-top</span>: <span class="number">10px</span>;</div><div class="line">				<span class="comment">/* relative(相对定位) 对象不可层叠、不脱离文档流，参考自身静态位置通过 top,bottom,left,right 定位，并且可以通过z-index进行层次分级 */</span></div><div class="line">			&#125;</div><div class="line">			<span class="comment">/* after 伪元素在元素之前添加内容*/</span></div><div class="line">			</div><div class="line">			<span class="selector-class">.zan</span><span class="selector-pseudo">:before</span>,</div><div class="line">			<span class="selector-class">.zan1</span><span class="selector-pseudo">:before</span> &#123;</div><div class="line">				<span class="attribute">content</span>: <span class="string">" "</span>;</div><div class="line">				<span class="attribute">border-radius</span>: <span class="number">30px</span> <span class="number">30px</span> <span class="number">0</span> <span class="number">0</span>;</div><div class="line">				<span class="comment">/* 正方形的内切圆的半径等于正方形边长的一半 */</span></div><div class="line">				<span class="attribute">width</span>: <span class="number">20px</span>;</div><div class="line">				<span class="attribute">height</span>: <span class="number">30px</span>;</div><div class="line">				<span class="comment">/* 长方形 */</span></div><div class="line">				<span class="attribute">background</span>: gray;</div><div class="line">				<span class="attribute">-moz-transform</span>: <span class="built_in">rotate</span>(-48deg);</div><div class="line">				<span class="comment">/* 逆时针旋转45°*/</span></div><div class="line">				<span class="attribute">-ms-transform</span>: <span class="built_in">rotate</span>(-48deg);</div><div class="line">				<span class="attribute">-o-transform</span>: <span class="built_in">rotate</span>(-48deg);</div><div class="line">				<span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(-48deg);</div><div class="line">				<span class="attribute">position</span>: absolute;</div><div class="line">				<span class="comment">/* absolute(绝对定位) 脱离文档流，通过 top,bottom,left,right 定位 */</span></div><div class="line">				<span class="attribute">left</span>: <span class="number">20px</span>;</div><div class="line">			&#125;</div><div class="line">			<span class="comment">/* after 伪元素在元素之后添加内容*/</span></div><div class="line">			</div><div class="line">			<span class="selector-class">.zan</span><span class="selector-pseudo">:after</span>,</div><div class="line">			<span class="selector-class">.zan1</span><span class="selector-pseudo">:after</span> &#123;</div><div class="line">				<span class="attribute">content</span>: <span class="string">" "</span>;</div><div class="line">				<span class="attribute">width</span>: <span class="number">20px</span>;</div><div class="line">				<span class="attribute">height</span>: <span class="number">30px</span>;</div><div class="line">				<span class="attribute">background</span>: gray;</div><div class="line">				<span class="attribute">border-radius</span>: <span class="number">30px</span> <span class="number">30px</span> <span class="number">0</span> <span class="number">0</span>;</div><div class="line">				<span class="attribute">-moz-transform</span>: <span class="built_in">rotate</span>(48deg);</div><div class="line">				<span class="attribute">-ms-transform</span>: <span class="built_in">rotate</span>(48deg);</div><div class="line">				<span class="attribute">-o-transform</span>: <span class="built_in">rotate</span>(48deg);</div><div class="line">				<span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(48deg);</div><div class="line">				<span class="attribute">position</span>: absolute;</div><div class="line">				<span class="attribute">left</span>: <span class="number">28px</span>;</div><div class="line">				<span class="attribute">top</span>: <span class="number">0px</span>;</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			<span class="selector-class">.zan1</span><span class="selector-pseudo">:before</span>,</div><div class="line">			<span class="selector-class">.zan1</span><span class="selector-pseudo">:after</span> &#123;</div><div class="line">				<span class="attribute">background</span>: <span class="number">#4C9ED9</span>;</div><div class="line">			&#125;</div></pre></td></tr></table></figure>
<h2 id="html代码"><a href="#html代码" class="headerlink" title="html代码"></a>html代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"zan"</span> <span class="attr">style</span>=<span class="string">"cursor: pointer;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">".zan"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </div><div class="line">			$(<span class="keyword">this</span>).toggleClass(<span class="string">"zan1"</span>);</div><div class="line">			alert($(<span class="string">"&gt;input"</span>,<span class="keyword">this</span>).val());</div><div class="line">			<span class="keyword">var</span> classname=$(<span class="keyword">this</span>).attr(<span class="string">"class"</span>);</div><div class="line">			<span class="keyword">var</span> zan_num=<span class="built_in">parseInt</span>($(<span class="string">'&gt;span'</span>,<span class="keyword">this</span>).text());</div><div class="line">			<span class="keyword">if</span>(classname == <span class="string">"zan zan1"</span>)&#123;</div><div class="line">				zan_num +=<span class="number">1</span>;</div><div class="line">				$(<span class="string">'&gt;span'</span>,<span class="keyword">this</span>).text(zan_num);</div><div class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(classname== <span class="string">"zan"</span>)&#123;</div><div class="line">				zan_num -=<span class="number">1</span>;</div><div class="line">				$(<span class="string">'&gt;span'</span>,<span class="keyword">this</span>).text(zan_num);</div><div class="line">			&#125;</div><div class="line">		&#125;)</div></pre></td></tr></table></figure>
<blockquote>
<p>将其简单改一下即可与后台同步</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			$(<span class="string">".zan"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">				$(<span class="keyword">this</span>).toggleClass(<span class="string">"zan1"</span>);</div><div class="line">				<span class="keyword">var</span> classname=$(<span class="keyword">this</span>).attr(<span class="string">"class"</span>);</div><div class="line">				<span class="keyword">var</span> zan_num=<span class="built_in">parseInt</span>($(<span class="string">'&gt;span'</span>,<span class="keyword">this</span>).text());</div><div class="line">				<span class="keyword">var</span> anid = $(<span class="string">"&gt;input"</span>,<span class="keyword">this</span>).val();</div><div class="line">				<span class="keyword">if</span>(classname == <span class="string">"zan zan1"</span>)&#123;</div><div class="line">					zan_num +=<span class="number">1</span>;</div><div class="line">					$(<span class="string">'&gt;span'</span>,<span class="keyword">this</span>).text(zan_num);</div><div class="line">					$.post(<span class="string">"queryAction_agree"</span>,&#123;</div><div class="line">    					<span class="comment">//传入所需的数据</span></div><div class="line">						anid: anid,</div><div class="line">						<span class="attr">agreeNumber</span>: zan_num<span class="comment">//点赞数</span></div><div class="line">					&#125;);</div><div class="line">				&#125;<span class="keyword">else</span> <span class="keyword">if</span>(classname== <span class="string">"zan"</span>)&#123;</div><div class="line">					zan_num -=<span class="number">1</span>;</div><div class="line">					$(<span class="string">'&gt;span'</span>,<span class="keyword">this</span>).text(zan_num);</div><div class="line">					$.post(<span class="string">"queryAction_disagree"</span>,&#123;</div><div class="line">    					<span class="comment">//传入所需的数据</span></div><div class="line">						anid: anid,</div><div class="line">						<span class="attr">agreeNumber</span>: zan_num<span class="comment">//点赞数</span></div><div class="line">					&#125;)</div><div class="line">				&#125;</div><div class="line">			&#125;)</div><div class="line">		&#125;)</div></pre></td></tr></table></figure>
<blockquote>
<p>这里贴一张效果图</p>
</blockquote>
<p><img src="/2017/03/17/页面点赞/1.png" alt=""></p>
<h1 id="原文参考"><a href="#原文参考" class="headerlink" title="原文参考"></a>原文参考</h1><p><a href="http://www.qdfuns.com/notes/14388/6c55f67462c70fc1e5042cf1d5417bf9.html" target="_blank" rel="external">点赞效果实现——点击♥后边的数量+1，再次点击♥后边的数量-1</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;页面点赞&quot;&gt;&lt;a href=&quot;#页面点赞&quot; class=&quot;headerlink&quot; title=&quot;页面点赞&quot;&gt;&lt;/a&gt;页面点赞&lt;/h1&gt;&lt;h2 id=&quot;css样式&quot;&gt;&lt;a href=&quot;#css样式&quot; class=&quot;headerlink&quot; title=&quot;css样式&quot;&gt;
    
    </summary>
    
      <category term="前端" scheme="https://super3h.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>前台学习</title>
    <link href="https://super3h.me/2017/03/14/%E5%89%8D%E5%8F%B0%E5%AD%A6%E4%B9%A0/"/>
    <id>https://super3h.me/2017/03/14/前台学习/</id>
    <published>2017-03-14T08:50:57.405Z</published>
    <updated>2017-03-22T13:03:15.967Z</updated>
    
    <content type="html"><![CDATA[<h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><h2 id="position-relative定位"><a href="#position-relative定位" class="headerlink" title="position:relative定位"></a>position:relative定位</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"position:absolute"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>第二个div绝对定位是相对于它的父级元素</p>
</blockquote>
<h2 id="图片截取"><a href="#图片截取" class="headerlink" title="图片截取"></a>图片截取</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*-30px用来调整左右间距，-20px用来调整上下间距*/</span></div><div class="line"><span class="selector-tag">background</span><span class="selector-pseudo">:url(imgUrl)</span> <span class="selector-tag">no-repeat</span> <span class="selector-tag">-30px</span> <span class="selector-tag">-20px</span>;</div></pre></td></tr></table></figure>
<h2 id="div浮动"><a href="#div浮动" class="headerlink" title="div浮动"></a>div浮动</h2><blockquote>
<p>这里直接贴链接，这位博主讲的特别清楚<a href="http://www.jianshu.com/p/07eb19957991" target="_blank" rel="external">CSS浮动float详解</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;基础&quot;&gt;&lt;a href=&quot;#基础&quot; class=&quot;headerlink&quot; title=&quot;基础&quot;&gt;&lt;/a&gt;基础&lt;/h1&gt;&lt;h2 id=&quot;position-relative定位&quot;&gt;&lt;a href=&quot;#position-relative定位&quot; class=&quot;header
    
    </summary>
    
      <category term="前端" scheme="https://super3h.me/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>Js技巧</title>
    <link href="https://super3h.me/2017/03/14/Js%E6%8A%80%E5%B7%A7/"/>
    <id>https://super3h.me/2017/03/14/Js技巧/</id>
    <published>2017-03-14T06:07:29.548Z</published>
    <updated>2017-03-22T13:52:21.726Z</updated>
    
    <content type="html"><![CDATA[<h1 id="导航菜单div的切换"><a href="#导航菜单div的切换" class="headerlink" title="导航菜单div的切换"></a>导航菜单div的切换</h1><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><blockquote>
<p>通过点击事件将div属性由<code>display:none;</code>变为<code>display:block</code></p>
</blockquote>
<h2 id="样式布局如下"><a href="#样式布局如下" class="headerlink" title="样式布局如下:"></a>样式布局如下:</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">el-row</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"4"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">default-active</span>=<span class="string">"1"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#question"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"1"</span> <span class="attr">style</span>=<span class="string">"padding-left:100px ;"</span>&gt;</span></div><div class="line">					提问</div><div class="line">				<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#add"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"2"</span> <span class="attr">style</span>=<span class="string">"padding-left:100px ;"</span>&gt;</span></div><div class="line">					添加</div><div class="line">				<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#answer"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"3"</span> <span class="attr">style</span>=<span class="string">"padding-left:100px ;"</span>&gt;</span></div><div class="line">					答案</div><div class="line">				<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#query"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"4"</span> <span class="attr">style</span>=<span class="string">"padding-left:100px ;"</span>&gt;</span></div><div class="line">					查询</div><div class="line">				<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"20"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkOutDiv"</span> <span class="attr">style</span>=<span class="string">"display: block;"</span> <span class="attr">id</span>=<span class="string">"answer"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">h1</span>&gt;</span>index-1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkOutDiv"</span> <span class="attr">style</span>=<span class="string">"display: none;"</span> <span class="attr">id</span>=<span class="string">"answer"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">h1</span>&gt;</span>index-2<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkOutDiv"</span> <span class="attr">style</span>=<span class="string">"display: none;"</span> <span class="attr">id</span>=<span class="string">"answer"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">h1</span>&gt;</span>index-3<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkOutDiv"</span> <span class="attr">style</span>=<span class="string">"display: none;"</span> <span class="attr">id</span>=<span class="string">"query"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">h1</span>&gt;</span>index-4<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="js代码逻辑"><a href="#js代码逻辑" class="headerlink" title="js代码逻辑"></a>js代码逻辑</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//给每个a标签添加click事件</span></div><div class="line">	$(<span class="string">"a"</span>).bind(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    	<span class="comment">//拿到a标签中 href属性的值</span></div><div class="line">		<span class="keyword">var</span> $clickElement = $(<span class="keyword">this</span>).attr(<span class="string">"href"</span>);</div><div class="line">		<span class="comment">//遍历所有div</span></div><div class="line">		$.each($(<span class="string">".checkOutDiv"</span>), <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    		<span class="comment">//获得div中id属性的值</span></div><div class="line">			<span class="keyword">var</span> $checkOut = $(<span class="keyword">this</span>).attr(<span class="string">"id"</span>);</div><div class="line">			<span class="keyword">if</span>($clickElement.indexOf($checkOut) != <span class="number">-1</span>) &#123;     <span class="comment">//如果a标签的href属性包含div标签的id的值(不包含返回-1)，则显示</span></div><div class="line">				$(<span class="keyword">this</span>).attr(<span class="string">"style"</span>, <span class="string">"display: block;"</span>);</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				$(<span class="keyword">this</span>).attr(<span class="string">"style"</span>, <span class="string">"display: none;"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;)</div><div class="line">	&#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<blockquote>
<p>详细过程如上，举个例子:<font color="#7DD43C">点击<code>&lt;a href=&quot;#question&quot;&gt;</code>时,拿到href的值，即#question，此时查询所有div的id，若id=question时，发现#question包含question，则改变div属性dispalay:block</font></p>
</blockquote>
<h1 id="js实现表单提交和重置"><a href="#js实现表单提交和重置" class="headerlink" title="js实现表单提交和重置"></a>js实现表单提交和重置</h1><blockquote>
<p>代码如下:</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//重置</span></div><div class="line"><span class="built_in">document</span>.getElementById(formName).reset();</div><div class="line"><span class="comment">//提交</span></div><div class="line"><span class="built_in">document</span>.getElementById(formName).submit();</div></pre></td></tr></table></figure>
<h1 id="js正则表达式替换"><a href="#js正则表达式替换" class="headerlink" title="js正则表达式替换"></a>js正则表达式替换</h1><blockquote>
<p>博主这里要把图片对应的url换一下</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/1_1.jpg"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/2_1.jpg"</span>/&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>js的replace可以使用正则替换,将_1替换成_2，默认会全文搜索</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$.each($(<span class="string">"img"</span>), <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">			$(<span class="keyword">this</span>).bind(<span class="string">"mousemove"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">				<span class="keyword">var</span> $src = $(<span class="keyword">this</span>).attr(<span class="string">"src"</span>);</div><div class="line">				<span class="keyword">var</span> changeSrc = $src.replace(<span class="regexp">/_\d/</span>,<span class="string">"_2"</span>);</div><div class="line">				$(<span class="string">"#showArea"</span>).html(<span class="string">"&lt;img src="</span>+changeSrc+<span class="string">" style='width:200px;height:300px' id='imgEnlarge' /&gt;"</span>)</div><div class="line">			&#125;)</div><div class="line">		&#125;);</div></pre></td></tr></table></figure>
<h1 id="判断元素内是否有内容或者有某个标签"><a href="#判断元素内是否有内容或者有某个标签" class="headerlink" title="判断元素内是否有内容或者有某个标签"></a>判断元素内是否有内容或者有某个标签</h1><h2 id="判断文本是否为空"><a href="#判断文本是否为空" class="headerlink" title="判断文本是否为空"></a>判断文本是否为空</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> jqObj = $(<span class="keyword">this</span>);</div><div class="line"><span class="keyword">if</span>(jqObj.text().trim())&#123; <span class="comment">//trim()方法是去空格，$.trim()函数删除提供字符串的所有换行符,空格（包括非中断空格），开始和结束tab。如果这些空白字符在字符串中间发生时，它们将被保留。</span></div><div class="line">    jqObj.hide();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="判断这个标签下是否有某个已知的元素，比如判断ul标签下是否有li元素"><a href="#判断这个标签下是否有某个已知的元素，比如判断ul标签下是否有li元素" class="headerlink" title="判断这个标签下是否有某个已知的元素，比如判断ul标签下是否有li元素"></a>判断这个标签下是否有某个已知的元素，比如判断ul标签下是否有li元素</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> jqObj = $(<span class="keyword">this</span>);</div><div class="line"><span class="keyword">if</span>(!jqObj.has(<span class="string">'li'</span>).length)&#123;</div><div class="line">    jqObj.hide();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p><a href="http://www.cnblogs.com/acafaxy/archive/2012/02/02/JQuery.html" target="_blank" rel="external">JQuery判断一个元素下面是否有内容或者有某个标签</a>感谢这位作者解决了我的困惑，真诚的感谢，哈哈!</p>
</blockquote>
<h1 id="mousemove事件获取鼠标位置"><a href="#mousemove事件获取鼠标位置" class="headerlink" title="mousemove事件获取鼠标位置"></a>mousemove事件获取鼠标位置</h1><blockquote>
<p>直接上代码</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"#showArea"</span>).mousemove(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">			e.pageX;<span class="comment">//鼠标x轴</span></div><div class="line">			e.pageX;<span class="comment">//鼠标y轴</span></div><div class="line">		&#125;)</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;导航菜单div的切换&quot;&gt;&lt;a href=&quot;#导航菜单div的切换&quot; class=&quot;headerlink&quot; title=&quot;导航菜单div的切换&quot;&gt;&lt;/a&gt;导航菜单div的切换&lt;/h1&gt;&lt;h2 id=&quot;原理&quot;&gt;&lt;a href=&quot;#原理&quot; class=&quot;headerli
    
    </summary>
    
      <category term="javascript" scheme="https://super3h.me/categories/javascript/"/>
    
    
  </entry>
  
  <entry>
    <title>idea学习</title>
    <link href="https://super3h.me/2017/03/14/idea%E5%AD%A6%E4%B9%A0/"/>
    <id>https://super3h.me/2017/03/14/idea学习/</id>
    <published>2017-03-14T01:17:11.621Z</published>
    <updated>2017-03-14T01:26:00.459Z</updated>
    
    <content type="html"><![CDATA[<h1 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h1><blockquote>
<p>直接进入官网下载即可<a href="https://www.jetbrains.com/idea/" target="_blank" rel="external">IntelliJ IDEA</a></p>
</blockquote>
<h2 id="破解方案"><a href="#破解方案" class="headerlink" title="破解方案"></a>破解方案</h2><ol>
<li><a href="http://idea.lanyus.com/" target="_blank" rel="external">IntelliJ IDEA 注册码</a></li>
<li><a href="http://blog.csdn.net/high2011/article/details/55005286" target="_blank" rel="external">IntelliJ IDEA 永久破解的方法</a><blockquote>
<p>方案二中由于github下载超慢，这里把云盘地址贴出来<a href="http://pan.baidu.com/s/1qYGuM1e" target="_blank" rel="external">注册机</a>:<code>密码:5jz1</code></p>
</blockquote>
</li>
</ol>
<h1 id="软件快捷键设置"><a href="#软件快捷键设置" class="headerlink" title="软件快捷键设置"></a>软件快捷键设置</h1><p><a href="https://www.cnblogs.com/tonycody/p/3257601.html" target="_blank" rel="external">Intellij IDEA 快捷键整理（TonyCody）</a><br><a href="http://myoss.github.io/2016/IntelliJ-Idea-%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%98%A0%E5%B0%84/" target="_blank" rel="external">IntelliJ Idea 快捷键映射</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;软件安装&quot;&gt;&lt;a href=&quot;#软件安装&quot; class=&quot;headerlink&quot; title=&quot;软件安装&quot;&gt;&lt;/a&gt;软件安装&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;直接进入官网下载即可&lt;a href=&quot;https://www.jetbrains.com/idea
    
    </summary>
    
      <category term="idea" scheme="https://super3h.me/categories/idea/"/>
    
    
  </entry>
  
  <entry>
    <title>在网页中使用markdown</title>
    <link href="https://super3h.me/2017/03/12/%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%AD%E4%BD%BF%E7%94%A8markdown/"/>
    <id>https://super3h.me/2017/03/12/在网页中使用markdown/</id>
    <published>2017-03-12T13:38:28.061Z</published>
    <updated>2017-03-17T12:53:37.206Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<p>博客既然能用markdown编写，能否直接在网上编写呢，答案当然是可以，去github搜索一下即可找到<a href="https://github.com/pandao/editor.md" target="_blank" rel="external">editor.md</a>，国人开发哦！！</p>
</blockquote>
<h1 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h1><h2 id="下载后的目录如图"><a href="#下载后的目录如图" class="headerlink" title="下载后的目录如图"></a>下载后的目录如图</h2><p><img src="/2017/03/12/在网页中使用markdown/1.png" alt=""></p>
<blockquote>
<p>在examples文件夹中有一个简单的示例simple.html，可以在浏览器里打开，并查看源代码;</p>
</blockquote>
<ul>
<li>可得原代码为:<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Simple example - Editor.md examples<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/style.css"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/editormd.css"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"layout"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">header</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">h1</span>&gt;</span>Simple example<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">header</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test-editormd"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">style</span>=<span class="string">"display:none;"</span>&gt;</span>### 这里插入内容<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/editormd.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">			<span class="keyword">var</span> testEditor;</div><div class="line"></div><div class="line">			$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">				testEditor = editormd(<span class="string">"test-editormd"</span>, &#123;</div><div class="line">    				<span class="comment">//调整宽度</span></div><div class="line">					width: <span class="string">"60%"</span>,</div><div class="line">					<span class="comment">//调整高度</span></div><div class="line">					height: <span class="number">400</span>,</div><div class="line">					<span class="attr">syncScrolling</span>: <span class="string">"single"</span>,</div><div class="line">					<span class="attr">path</span>: <span class="string">"./lib/"</span></div><div class="line">				&#125;);</div><div class="line">			&#125;);</div><div class="line">		<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>这里把目录改了下：</p>
</blockquote>
<p><img src="/2017/03/12/在网页中使用markdown/2.png" alt=""></p>
<ul>
<li><code>lib</code>：为根目录下的文件，直接复制即可</li>
<li><code>css</code>：<code>editormd.js</code>在根目录<code>css</code>文件中，<code>style.css</code>在<code>examples/css</code>中</li>
<li><code>js</code>：<code>editormd.min.js</code>在根目录下，<code>jquery.min.js</code>在<code>examples\js</code>中</li>
<li><code>fonts</code>：为根目录下的文件，直接复制即可</li>
</ul>
<h2 id="最后效果图"><a href="#最后效果图" class="headerlink" title="最后效果图"></a>最后效果图</h2><p><img src="/2017/03/12/在网页中使用markdown/3.png" alt=""></p>
<h1 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h1><blockquote>
<font color="#FF3A8F">当文件放在<strong>display:none的div下会导致格式(样式)出错</strong></font>

</blockquote>
<h1 id="如何在页面中显示"><a href="#如何在页面中显示" class="headerlink" title="如何在页面中显示"></a>如何在页面中显示</h1><h2 id="提交html代码"><a href="#提交html代码" class="headerlink" title="提交html代码"></a>提交html代码</h2><blockquote>
<p>html代码如下:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"pDescription"</span> <span class="attr">class</span>=<span class="string">"editormd-html-textarea"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>js代码如下:</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ohtml=$(<span class="string">'.editormd-html-textarea'</span>), opreview=$(<span class="string">'.editormd-preview'</span>).clone(); </div><div class="line"> ohtml.val(opreview.html());</div></pre></td></tr></table></figure>
<blockquote>
<p>最后form表单提交，后台拿到pDescription的值即可</p>
</blockquote>
<h2 id="页面显示"><a href="#页面显示" class="headerlink" title="页面显示"></a>页面显示</h2><blockquote>
<p>引入前文(上面使用方法中有讲到)css样式即可显示！！<br>效果如图</p>
</blockquote>
<p><img src="/2017/03/12/在网页中使用markdown/4.png" alt=""></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;博客既然能用markdown编写，能否直接在网上编写呢，答案当然是可以，去github搜索一下即可找到&lt;a hre
    
    </summary>
    
      <category term="javascript" scheme="https://super3h.me/categories/javascript/"/>
    
    
  </entry>
  
  <entry>
    <title>s2sh-大学资源共享网项目</title>
    <link href="https://super3h.me/2017/03/10/s2sh-%E5%A4%A7%E5%AD%A6%E8%B5%84%E6%BA%90%E5%85%B1%E4%BA%AB%E7%BD%91%E9%A1%B9%E7%9B%AE/"/>
    <id>https://super3h.me/2017/03/10/s2sh-大学资源共享网项目/</id>
    <published>2017-03-10T08:00:29.266Z</published>
    <updated>2017-03-15T14:57:16.928Z</updated>
    
    <content type="html"><![CDATA[<h1 id="所遇问题"><a href="#所遇问题" class="headerlink" title="所遇问题"></a>所遇问题</h1><h2 id="数据库错误"><a href="#数据库错误" class="headerlink" title="数据库错误"></a>数据库错误</h2><blockquote>
<p>报如下错:</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Cannot add or update a child row: <span class="function">a foreign key constraint <span class="title">fails</span> <span class="params">(`s2shtest01`.`problem`, CONSTRAINT `FK5lcmhm21chjl0wog8par6isxn` FOREIGN KEY (`pid`)</span> REFERENCES `course` <span class="params">(`cid`)</span>)</span></div></pre></td></tr></table></figure>
<blockquote>
<p>后来发现。。<code>hibernate</code>配置文件竟然写错了，如此低级的错误</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"School"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"sid"</span>&gt;</span></div><div class="line">        	<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"native"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sName"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"academys"</span>&gt;</span></div><div class="line">        	<span class="tag">&lt;<span class="name">key</span>&gt;</span></div><div class="line">        	<span class="comment">&lt;!--&lt;column name="aid"&gt;&lt;/column&gt;--&gt;</span></div><div class="line">        		<span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"sid"</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></div><div class="line">        	<span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">        	<span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span>=<span class="string">"Academy"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>错误如上,<code>&lt;key&gt;</code>里为academys的外键。。结果把它的外键和自己的主键绑定到一起了。</p>
</blockquote>
<h2 id="json解决hibernate中级联对象延迟加载问题"><a href="#json解决hibernate中级联对象延迟加载问题" class="headerlink" title="json解决hibernate中级联对象延迟加载问题"></a>json解决hibernate中级联对象延迟加载问题</h2><ul>
<li>简介<blockquote>
<p>相信大部分用过Ext的GridPanel显示数据的朋友都遇到过外键数据的问题，首先是转换格式，将数据库里查出来的List集合要转换为JSON格式，如果只是用</p>
</blockquote>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">JSONObject json = <span class="keyword">new</span> JSONObject();    </div><div class="line">JSONArray dataArray = JSONArray.fromObject(list);</div></pre></td></tr></table></figure>
<ul>
<li><p>原因:</p>
<blockquote>
<p>如果list中的数据都是普通数据类型的那能正常转换，但很少这种情况，<font color="#FE3E49">大部分的数据都存在外键的数据，比如有个News类，他可能会有个发布人User的外键，那么用以上的方法转换是不行，将会出现死循环（我去了解到JSON它是这么一种机制，将数据拆分，一致拆分到全都是基本数据类型位置，比如，一个list存放着多个News数据，它是首先将list拆分成多个News，然后将News的多个属性都拆分出来，里面有个User对象，又得再拆分！问题就出现在这了，User里面又有一个News的集合，News里面又有User，因此导致死循环了）；</font></p>
</blockquote>
</li>
<li><p>解决方案</p>
<blockquote>
<p>json解决hibernate中级联对象延迟加载问题<code>net.sf.json.JSONException: org....</code><br>在hibernate中将pojo转化为json数据格式时，抛出：<font color="#48B456"><strong>net.sf.json.JSONException: org.hibernate.LazyInitializationException，</strong></font>通过网上的资料，解决办法如下(未列出所需库文件)：</p>
</blockquote>
</li>
<li><p>第一种:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">JsonConfig jsonConfig = <span class="keyword">new</span> JsonConfig(); </div><div class="line">jsonConfig .setJsonPropertyFilter(<span class="keyword">new</span> PropertyFilter()&#123;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">apply</span><span class="params">(Object source, String name, Object value)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span> (name.equals(<span class="string">"property1"</span>) || name.equals(<span class="string">"property2"</span>))&#123;<span class="comment">// 这里填写需要过滤的属性名</span></div><div class="line">         <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">JSONObject jsonModel= JSONArray.fromObject(yourObject, jsonConfig );</div></pre></td></tr></table></figure>
</li>
<li><p>第二种:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">JsonConfig jsonConfig = <span class="keyword">new</span> JsonConfig();</div><div class="line"></div><div class="line">jsonConfig .setExcludes( <span class="keyword">new</span> String[]&#123; <span class="string">"property1"</span> , <span class="string">"property2"</span> &#125; ) ;</div><div class="line"></div><div class="line">JSONObject jsonModel= JSONArray.fromObject(yourObject, jsonConfig );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>详情请参考<a href="http://blog.csdn.net/evelyn2010816/article/details/6321758" target="_blank" rel="external">json解决hibernate中级联对象延迟加载问题net.sf.json.JSONException: </a></p>
</blockquote>
<h2 id="c-forEach问题"><a href="#c-forEach问题" class="headerlink" title="c:forEach问题"></a>c:forEach问题</h2><blockquote>
<p>报错如下:</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">According to TLD or attribute directive in tag file, attribute value does not accept any exception</div></pre></td></tr></table></figure>
<ul>
<li>方法如下<ul>
<li>一种是将<code>http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd</code>改成<code>http://java.sun.com/xml/ns/javaee/web-app_2_3.xsd</code>；</li>
<li>另一种是将JSP页面中的<font color="red"><strong>&lt;%@ taglib prefix=”c” uri=”<a href="http://java.sun.com/jstl/core&quot;%&gt;改成" target="_blank" rel="external">http://java.sun.com/jstl/core&quot;%&gt;改成</a>&lt;%@ taglib prefix=”c” uri=”<a href="http://java.sun.com/jstl/core_rt&quot;%&gt;。" target="_blank" rel="external">http://java.sun.com/jstl/core_rt&quot;%&gt;。</a></strong></font>在jstl-1.0.2.jar下的META-INF中有一个c.tld还有一个c-rt.tld,后一个好像是jstl核心库备用板的标签描述文件。<blockquote>
<p>参考如下:<a href="http://blog.sina.com.cn/s/blog_6b39e1d10100mwp4.html" target="_blank" rel="external">According to TLD or attribute directive in tag file</a></p>
</blockquote>
</li>
</ul>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;所遇问题&quot;&gt;&lt;a href=&quot;#所遇问题&quot; class=&quot;headerlink&quot; title=&quot;所遇问题&quot;&gt;&lt;/a&gt;所遇问题&lt;/h1&gt;&lt;h2 id=&quot;数据库错误&quot;&gt;&lt;a href=&quot;#数据库错误&quot; class=&quot;headerlink&quot; title=&quot;数据库错误&quot;&gt;
    
    </summary>
    
      <category term="s2sh" scheme="https://super3h.me/categories/s2sh/"/>
    
    
  </entry>
  
  <entry>
    <title>ElementUI 学习</title>
    <link href="https://super3h.me/2017/03/10/ElementUI%20%E5%AD%A6%E4%B9%A0/"/>
    <id>https://super3h.me/2017/03/10/ElementUI 学习/</id>
    <published>2017-03-10T04:05:37.741Z</published>
    <updated>2017-03-14T15:09:58.907Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ElementUI初学"><a href="#ElementUI初学" class="headerlink" title="ElementUI初学"></a>ElementUI初学</h1><h2 id="导航菜单学习"><a href="#导航菜单学习" class="headerlink" title="导航菜单学习"></a>导航菜单学习</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">el-menu</span> =<span class="string">"1"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"1"</span> &gt;</span></div><div class="line">    	提问</div><div class="line">    <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><code>default-active：</code>表示默认激活<code>index=1</code>的子项<br>当悬停时默认颜色为灰色，我们这里可以把它是指为浅蓝.</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.el-menu-item</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">	<span class="attribute">background-color</span>: <span class="number">#EFFFFF</span>;</div><div class="line">	<span class="attribute">color</span>: <span class="number">#20A0FF</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>效果如图</p>
</blockquote>
<p><img src="/2017/03/10/ElementUI 学习/3.png" alt=""></p>
<h2 id="el-row来进行排版"><a href="#el-row来进行排版" class="headerlink" title="el-row来进行排版"></a>el-row来进行排版</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">el-row</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"4"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"20"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><code>el-row</code>下包含<code>el-col</code>元素,其中一个占四份，一个占20分，形成效果如图</p>
</blockquote>
<p><img src="/2017/03/10/ElementUI 学习/2.png" alt=""></p>
<h1 id="学习中所遇问题"><a href="#学习中所遇问题" class="headerlink" title="学习中所遇问题"></a>学习中所遇问题</h1><h2 id="el中嵌套问题"><a href="#el中嵌套问题" class="headerlink" title="el中嵌套问题"></a>el中嵌套问题</h2><blockquote>
<p>el嵌套如果不显示，可以在中间嵌套div元素，如下表示:</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkOutDiv"</span> <span class="attr">style</span>=<span class="string">"display: block;"</span> <span class="attr">id</span>=<span class="string">"add"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">el-card</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-position</span>=<span class="string">"left"</span> <span class="attr">label-width</span>=<span class="string">"80px"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"所在大学"</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">el-input</span> <span class="attr">name</span>=<span class="string">"sName"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="el-form问题"><a href="#el-form问题" class="headerlink" title="el-form问题"></a>el-form问题</h2><blockquote>
<p><code>label-position</code>必须配合<code>label-width</code>一起才能起作用，例如:</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-position</span>=<span class="string">"right"</span> <span class="attr">label-width</span>=<span class="string">"80px"</span> <span class="attr">id</span>=<span class="string">"addForm"</span> <span class="attr">action</span>=<span class="string">"#"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"所在大学"</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">el-input</span> <span class="attr">name</span>=<span class="string">"sName"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"添加课程"</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">el-input</span> <span class="attr">name</span>=<span class="string">"cName"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"onSubmit('addForm')"</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"resetForm('addForm')"</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>效果如下:</p>
</blockquote>
<p><img src="/2017/03/10/ElementUI 学习/1.png" alt=""></p>
<h2 id="el-option问题"><a href="#el-option问题" class="headerlink" title="el-option问题"></a>el-option问题</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">el-select</span> <span class="attr">palaceholder</span>=<span class="string">"请选择"</span> <span class="attr">v-model</span>=<span class="string">"value"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">v-for</span>=<span class="string">"item in options"</span> <span class="attr">:value</span>=<span class="string">"item.value"</span> @<span class="attr">click</span>=<span class="string">"confirm(item.id)"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><code>el-option</code>中添加点击事件无效！！！</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ElementUI初学&quot;&gt;&lt;a href=&quot;#ElementUI初学&quot; class=&quot;headerlink&quot; title=&quot;ElementUI初学&quot;&gt;&lt;/a&gt;ElementUI初学&lt;/h1&gt;&lt;h2 id=&quot;导航菜单学习&quot;&gt;&lt;a href=&quot;#导航菜单学习&quot; cla
    
    </summary>
    
      <category term="ElementUI" scheme="https://super3h.me/categories/ElementUI/"/>
    
    
  </entry>
  
  <entry>
    <title>java初始化顺序</title>
    <link href="https://super3h.me/2017/03/09/java%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%BA%E5%BA%8F/"/>
    <id>https://super3h.me/2017/03/09/java初始化顺序/</id>
    <published>2017-03-09T06:53:22.326Z</published>
    <updated>2017-03-09T07:05:32.198Z</updated>
    
    <content type="html"><![CDATA[<h1 id="子类继承父类实例化对象过程"><a href="#子类继承父类实例化对象过程" class="headerlink" title="子类继承父类实例化对象过程"></a>子类继承父类实例化对象过程</h1><blockquote>
<p>代码示例:</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</div><div class="line">    <span class="comment">// 静态变量</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String p_StaticField = <span class="string">"父类--静态变量"</span>;</div><div class="line">    <span class="comment">// 变量(其实这用对象更好能体同这一点，如专门写一个类的实例)</span></div><div class="line">　　</div><div class="line">    <span class="comment">//如果这个变量放在初始化块的后面，是会报错的，因为你根本没有被初始化</span></div><div class="line">    <span class="keyword">public</span> String p_Field = <span class="string">"父类--变量"</span>;</div><div class="line">    <span class="comment">// 静态初始化块</span></div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        System.out.println(p_StaticField);</div><div class="line">        System.out.println(<span class="string">"父类--静态初始化块"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 初始化块</span></div><div class="line">    &#123;</div><div class="line">        System.out.println(p_Field);</div><div class="line">        System.out.println(<span class="string">"父类--初始化块"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 构造器</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Parent</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"父类--构造器"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubClass</span> <span class="keyword">extends</span> <span class="title">Parent</span> </span>&#123;</div><div class="line">    <span class="comment">// 静态变量</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String s_StaticField = <span class="string">"子类--静态变量"</span>;</div><div class="line">    <span class="comment">// 变量</span></div><div class="line">    <span class="keyword">public</span> String s_Field = <span class="string">"子类--变量"</span>;</div><div class="line">    <span class="comment">// 静态初始化块</span></div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        System.out.println(s_StaticField);</div><div class="line">        System.out.println(<span class="string">"子类--静态初始化块"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 初始化块</span></div><div class="line">    &#123;</div><div class="line">        System.out.println(s_Field);</div><div class="line">        System.out.println(<span class="string">"子类--初始化块"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 构造器</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SubClass</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">//super();</span></div><div class="line">        System.out.println(<span class="string">"子类--构造器"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 程序入口</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"*************in main***************"</span>);</div><div class="line">        <span class="keyword">new</span> SubClass();</div><div class="line">        System.out.println(<span class="string">"*************second subClass***************"</span>);</div><div class="line">        <span class="keyword">new</span> SubClass();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>输出结果:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">输出结果</div><div class="line">父类--静态变量</div><div class="line">父类--静态初始化块</div><div class="line">子类--静态变量</div><div class="line">子类--静态初始化块</div><div class="line">*************in main***************</div><div class="line">父类--变量</div><div class="line">父类--初始化块</div><div class="line">父类--构造器</div><div class="line">子类--变量</div><div class="line">子类--初始化块</div><div class="line">子类--构造器</div><div class="line">*************second subClass***************</div><div class="line">父类--变量</div><div class="line">父类--初始化块</div><div class="line">父类--构造器</div><div class="line">子类--变量</div><div class="line">子类--初始化块</div><div class="line">子类--构造器</div></pre></td></tr></table></figure>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><blockquote>
<font color="#E35671">累的加载过程不管多么复杂，<strong>总是按照-静态代码块-&gt;普通代码块-&gt;构造方法，这个顺序执行的</strong>，按照顺序一步步分析，将程序结构捋清楚就能避免不必要的错误。</font>

</blockquote>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://blog.csdn.net/ganjing222/article/details/50993282" target="_blank" rel="external"> JAVA基础-子类继承父类实例化对象过程</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;子类继承父类实例化对象过程&quot;&gt;&lt;a href=&quot;#子类继承父类实例化对象过程&quot; class=&quot;headerlink&quot; title=&quot;子类继承父类实例化对象过程&quot;&gt;&lt;/a&gt;子类继承父类实例化对象过程&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;代码示例:&lt;/p&gt;
&lt;/b
    
    </summary>
    
      <category term="JavaSE" scheme="https://super3h.me/categories/JavaSE/"/>
    
    
  </entry>
  
  <entry>
    <title>java错题总结</title>
    <link href="https://super3h.me/2017/03/07/java%E9%94%99%E9%A2%98%E6%80%BB%E7%BB%93/"/>
    <id>https://super3h.me/2017/03/07/java错题总结/</id>
    <published>2017-03-07T04:27:51.949Z</published>
    <updated>2017-03-07T05:02:28.145Z</updated>
    
    <content type="html"><![CDATA[<h1 id="错题分析"><a href="#错题分析" class="headerlink" title="错题分析"></a>错题分析</h1><h2 id="Integer的考察"><a href="#Integer的考察" class="headerlink" title="Integer的考察"></a>Integer的考察</h2><blockquote>
<p>在jdk1.5的环境下，有如下4条语句：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Integer i01 = <span class="number">59</span>;</div><div class="line"><span class="keyword">int</span> i02 = <span class="number">59</span>;</div><div class="line">Integer i03 =Integer.valueOf(<span class="number">59</span>);</div><div class="line">Integer i04 = <span class="keyword">new</span> Integer(<span class="number">59</span>)</div></pre></td></tr></table></figure>
<ul>
<li>以下输出结果为false的是：<br><img src="/2017/03/07/java错题总结/1.png" alt=""><blockquote>
<p>解析如下:</p>
</blockquote>
</li>
</ul>
<p><img src="/2017/03/07/java错题总结/2.png" alt=""></p>
<h2 id="java类加载"><a href="#java类加载" class="headerlink" title="java类加载"></a>java类加载</h2><blockquote>
<p>以下哪项不属于java类加载过程？</p>
</blockquote>
<p><img src="/2017/03/07/java错题总结/3.png" alt=""></p>
<blockquote>
<p>分析如下:</p>
</blockquote>
<p><img src="/2017/03/07/java错题总结/4.png" alt=""></p>
<h2 id="equals"><a href="#equals" class="headerlink" title="equals"></a>equals</h2><blockquote>
<p>列出<code>equals</code>的源码</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">this</span> == obj);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>Object 中euqals的源码如上。没有重写equals时，是直接用==判断的，而String中重写了equals方法</p>
</blockquote>
<h2 id="wait-方法和-sleep-方法的区别"><a href="#wait-方法和-sleep-方法的区别" class="headerlink" title="wait()方法和 sleep()方法的区别"></a>wait()方法和 sleep()方法的区别</h2><blockquote>
<p>这两个方法来自不同的类分别是，sleep来自Thread类，和wait来自Object类。</p>
</blockquote>
<ul>
<li><font color="#DB7676">sleep是Thread的静态类方法，谁调用的谁去睡觉，即使在a线程里调用了b的sleep方法，实际上还是a去睡觉，要让b线程睡觉要在b的代码中调用sleep。</font></li>
<li><font color="red"><strong>最主要是sleep方法没有释放锁，而wait方法释放了锁，使得敏感词线程可以使用同步控制块或者方法。</strong></font>sleep不出让系统资源；wait是进入线程等待池等待，出让系统资源敏感词线程可以占用CPU。一般wait不会加时间限制，因为如果wait线程的运行资源不够，再出来也没用，要等待敏感词线程调用notify/notifyAll唤醒等待池中的所有线程，才会进入就绪队列等待OS分配系统资源。sleep(milliseconds)可以用时间指定使它自动唤醒过来，如果时间不到只能调用interrupt()强行打断。<font color="#25CB73"><strong><em>Thread.Sleep(0)的作用是“触发操作系统立刻重新进行一次CPU竞争”。</em></strong></font>
</li>
<li><p>使用范围：wait，notify和notifyAll只能在同步控制方法或者同步控制块里面使用，而sleep可以在任何地方使用 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">synchronized</span>(x)&#123; </div><div class="line">   x.notify() </div><div class="line">  <span class="comment">//或者wait() </span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>sleep必须捕获异常，而wait，notify和notifyAll不需要捕获异常</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;错题分析&quot;&gt;&lt;a href=&quot;#错题分析&quot; class=&quot;headerlink&quot; title=&quot;错题分析&quot;&gt;&lt;/a&gt;错题分析&lt;/h1&gt;&lt;h2 id=&quot;Integer的考察&quot;&gt;&lt;a href=&quot;#Integer的考察&quot; class=&quot;headerlink&quot; titl
    
    </summary>
    
      <category term="JavaSE" scheme="https://super3h.me/categories/JavaSE/"/>
    
    
  </entry>
  
  <entry>
    <title>log4J的使用</title>
    <link href="https://super3h.me/2017/03/02/log4J%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>https://super3h.me/2017/03/02/log4J的使用/</id>
    <published>2017-03-02T08:33:38.706Z</published>
    <updated>2017-03-03T05:20:12.204Z</updated>
    
    <content type="html"><![CDATA[<h1 id="log4J的安装"><a href="#log4J的安装" class="headerlink" title="log4J的安装"></a>log4J的安装</h1><p>进入官网下载即可<a href="http://logging.apache.org/log4j/1.2/download.html" target="_blank" rel="external">http://logging.apache.org/log4j/1.2/download.html</a></p>
<h1 id="log4J的配置及解释"><a href="#log4J的配置及解释" class="headerlink" title="log4J的配置及解释"></a>log4J的配置及解释</h1><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"># Define the root logger with appender file</div><div class="line">log4j.rootLogger = DEBUG, FILE</div><div class="line"></div><div class="line"># Define the file appender</div><div class="line">log4j.appender.FILE=org.apache.log4j.FileAppender</div><div class="line"># Set the name of the file</div><div class="line">log4j.appender.FILE.File=C:\log.out</div><div class="line"></div><div class="line"># Set the immediate flush to true (default)</div><div class="line">log4j.appender.FILE.ImmediateFlush=true</div><div class="line"></div><div class="line"># Set the threshold to debug mode</div><div class="line">log4j.appender.FILE.Threshold=debug</div><div class="line"></div><div class="line"># Set the append to false, overwrite</div><div class="line">log4j.appender.FILE.Append=false</div><div class="line"></div><div class="line"># Define the layout for file appender</div><div class="line">log4j.appender.FILE.layout=org.apache.log4j.PatternLayout</div><div class="line">log4j.appender.FILE.layout.conversionPattern=%m%n</div></pre></td></tr></table></figure>
<ul>
<li>根日志记录器(logger)的级别定义为DEBUG并连接附加器命名为FILE</li>
<li>附加器(appender)File是定义为org.apache.log4j.FileAppender并写入到一个名为“log.out”位于日志log目录下</li>
<li>定义的布局模式是%m%n，这意味着每打印日志消息之后，将加上一个换行符<blockquote>
<p>注意:<font color="#4ACC60">log4j支持UNIX风格的变量替换，如 ${variableName}.</font></p>
</blockquote>
</li>
</ul>
<h2 id="调试级别"><a href="#调试级别" class="headerlink" title="调试级别"></a>调试级别</h2><p>使用DEBUG两个追加程序。所有可能的选项有：</p>
<ul>
<li>TRACE</li>
<li>DEBUG</li>
<li>INFO</li>
<li>WARN</li>
<li>ERROR</li>
<li>FATAL</li>
<li>ALL</li>
</ul>
<h2 id="Appenders"><a href="#Appenders" class="headerlink" title="Appenders"></a>Appenders</h2><blockquote>
<p>Apache的log4j提供<code>Appender</code>对象<font color="#FFAA25"><strong>主要负责打印日志消息到不同的目的地</strong></font>，如控制台，文件，sockets，NT事件日志等等。<br>每个<code>Appender</code>对象具有与之相关联的不同的属性，并且这些属性表明对象的行为</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">layout</td>
<td>Appender使用布局Layout 对象和与之相关的格式化的日志记录信息转换模式</td>
</tr>
<tr>
<td style="text-align:center">target</td>
<td>目标可以是一个控制台，一个文件，或根据附加器的另一个项目</td>
</tr>
<tr>
<td style="text-align:center">level</td>
<td>级别是必需的，以控制日志消息的过滤</td>
</tr>
<tr>
<td style="text-align:center">threshold</td>
<td>Appender可以有与之独立的记录器级别相关联的级别阈值水平。Appender忽略具有级别低于阈级别的任何日志消息</td>
</tr>
<tr>
<td style="text-align:center">filter</td>
<td>Filter 对象可以分析超出级别的匹配记录信息，并决定是否记录的请求应该由一个特定 Appender 或忽略处理</td>
</tr>
</tbody>
</table>
<h2 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h2><p>我们使用的PatternLayout 使用 appender。所有可能的选项有：</p>
<ul>
<li>DateLayout</li>
<li>HTMLLayout</li>
<li><a href="http://www.yiibai.com/log4j/log4j_patternlayout.html" target="_blank" rel="external">PatternLayout</a></li>
<li><a href="http://www.yiibai.com/log4j/log4j_htmllayout.html" target="_blank" rel="external">SimpleLayout</a></li>
<li>XMLLayout<blockquote>
<p>使用HTMLLayout和XMLLayout，可以在HTML和XML格式和生成日志。</p>
</blockquote>
</li>
</ul>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><code>properties</code>相关配置详情请看<a href="http://www.yiibai.com/log4j/log4j_configuration.html" target="_blank" rel="external">log4j配置</a></li>
<li><code>xml</code>相关配置详情请看<a href="http://www.cnblogs.com/v-weiwang/p/4814050.html" target="_blank" rel="external">springmvc+log4j操作日志记录,详细配置 </a></li>
</ul>
<h1 id="log4J配置文件位置"><a href="#log4J配置文件位置" class="headerlink" title="log4J配置文件位置"></a>log4J配置文件位置</h1><h2 id="默认加载"><a href="#默认加载" class="headerlink" title="默认加载"></a>默认加载</h2><blockquote>
<p>log4j启动时，<font color="#CF59E0">默认会寻找source folder下的log4j.xml配置文件，<strong>若没有，会寻找log4j.properties文件。</strong></font>然后加载配置。配置文件放置位置正确，不用在程序中手动加载log4j配置文件。</p>
</blockquote>
<p><img src="/2017/03/02/log4J的使用/1.png" alt=""></p>
<h2 id="手动加载配置文件"><a href="#手动加载配置文件" class="headerlink" title="手动加载配置文件"></a>手动加载配置文件</h2><blockquote>
<p>可以通过<code>PropertyConfigurator.configure(&quot;url&quot;)</code>来手动加载配置文件，示例如下:</p>
</blockquote>
<p><img src="/2017/03/02/log4J的使用/2.jpg" alt=""></p>
<blockquote>
<p>相应代码如下:<code>PropertyConfigurator.configure(&quot;config/log4j.properties&quot;);</code></p>
</blockquote>
<h2 id="log4J报错"><a href="#log4J报错" class="headerlink" title="log4J报错"></a>log4J报错</h2><blockquote>
<p>如果上述方法报以下错:</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">log4j:ERROR Could not read configuration file [log4j.properties].</div><div class="line">java.io.FileNotFoundException: log4j.properties (系统找不到指定的文件。)</div><div class="line"> at java.io.FileInputStream.open(Native Method)</div><div class="line"> at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:<span class="number">106</span>)</div><div class="line"> at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:<span class="number">66</span>)</div><div class="line"> at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:<span class="number">306</span>)</div><div class="line"> at org.apache.log4j.PropertyConfigurator.configure(PropertyConfigurator.java:<span class="number">324</span>)</div><div class="line"> at snmp.GetSnmpInfo.&lt;clinit&gt;(GetSnmpInfo.java:<span class="number">32</span>)</div><div class="line">log4j:ERROR Ignoring configuration file [log4j.properties].</div></pre></td></tr></table></figure>
<ul>
<li>解决方案:<ul>
<li><code>方案1:</code>将log4j.properties 这个文件从src的根目录 转移到 项目的根目录下面，即可~~~；</li>
<li><code>方案2:</code>添加以下代码<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 获得当前目录路径</span></div><div class="line">        String filePath = <span class="keyword">this</span>.getClass().getResource(<span class="string">"/"</span>).getPath();</div><div class="line">        <span class="comment">// 找到log4j.properties配置文件所在的目录(已经创建好)</span></div><div class="line">        filePath = filePath.substring(<span class="number">1</span>).replace(<span class="string">"bin"</span>, <span class="string">"src"</span>);</div><div class="line">        <span class="comment">// 获得日志类loger的实例</span></div><div class="line">        loger = Logger.getLogger(<span class="keyword">this</span>.getClass());</div><div class="line">        <span class="comment">// loger所需的配置文件路径</span></div><div class="line">        PropertyConfigurator.configure(filePath + <span class="string">"log4j.properties"</span>);</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="参考链接-1"><a href="#参考链接-1" class="headerlink" title="参考链接"></a>参考链接</h2><p>详情请看<a href="http://blog.csdn.net/lifuxiangcaohui/article/details/11042375" target="_blank" rel="external">log4j配置文件位置详解</a><br>详情请看<a href="http://www.cnblogs.com/tv151579/archive/2013/01/20/2868912.html" target="_blank" rel="external">log4j:ERROR Could not read configuration file [log4j.properties]. </a></p>
<h1 id="扩展内容"><a href="#扩展内容" class="headerlink" title="扩展内容"></a>扩展内容</h1><p><a href="http://www.yiibai.com/log4j/log4j_logging_files.html" target="_blank" rel="external">log4j日志记录到文件</a><br><a href="http://www.yiibai.com/log4j/log4j_logging_database.html" target="_blank" rel="external">log4j日志记录到数据库</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;log4J的安装&quot;&gt;&lt;a href=&quot;#log4J的安装&quot; class=&quot;headerlink&quot; title=&quot;log4J的安装&quot;&gt;&lt;/a&gt;log4J的安装&lt;/h1&gt;&lt;p&gt;进入官网下载即可&lt;a href=&quot;http://logging.apache.org/log
    
    </summary>
    
      <category term="log4J" scheme="https://super3h.me/categories/log4J/"/>
    
    
  </entry>
  
  <entry>
    <title>s2sh三大框架的整合</title>
    <link href="https://super3h.me/2017/03/01/s2sh%E4%B8%89%E5%A4%A7%E6%A1%86%E6%9E%B6%E7%9A%84%E6%95%B4%E5%90%88/"/>
    <id>https://super3h.me/2017/03/01/s2sh三大框架的整合/</id>
    <published>2017-03-01T00:32:37.142Z</published>
    <updated>2017-03-03T07:31:15.132Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<p>断断续续的学完了三大框架，自己也想尝试整合三大框架，这里记录我碰到的问题，以及学习的过程。</p>
</blockquote>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><h1 id="struts有关错误"><a href="#struts有关错误" class="headerlink" title="struts有关错误"></a>struts有关错误</h1><ul>
<li>使用<code>modelDriven</code>遇到的错误,报错如下：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function">ERROR ParametersInterceptor Developer <span class="title">Notification</span> <span class="params">(set struts.devMode to <span class="keyword">false</span> to disable <span class="keyword">this</span> message)</span>:</span></div><div class="line">Unexpected Exception caught setting 'age' on 'class test.hhh.action.PersonAction: Error setting expression 'age' with value '20'</div><div class="line">ERROR ParametersInterceptor Developer <span class="title">Notification</span> <span class="params">(set struts.devMode to <span class="keyword">false</span> to disable <span class="keyword">this</span> message)</span>:</div><div class="line">Unexpected Exception caught setting 'name' on 'class test.hhh.action.PersonAction: Error setting expression 'name' with value 'hhh'</div></pre></td></tr></table></figure>
<blockquote>
<p>原因如下:</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//action中如下写</span></div><div class="line"><span class="keyword">private</span> Person model;</div><div class="line"><span class="comment">//由于model对象还没new，其内部为空，所以导致获取的model为null，改法如下</span></div><div class="line"><span class="keyword">private</span> Person model = <span class="keyword">new</span> Person();</div></pre></td></tr></table></figure>
<ul>
<li>spring和struts整合报错如下:<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">ERROR Dispatcher Dispatcher initialization failed</div><div class="line"> Unable to load configuration. - [unknown location]</div><div class="line">	at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:<span class="number">70</span>)</div><div class="line">	at org.apache.struts2.dispatcher.Dispatcher.getContainer(Dispatcher.java:<span class="number">906</span>)</div><div class="line">	at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:<span class="number">445</span>)</div><div class="line">	at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:<span class="number">486</span>)</div><div class="line">	at org.apache.struts2.dispatcher.InitOperations.initDispatcher(InitOperations.java:<span class="number">75</span>)</div><div class="line">	at org.apache.struts2.dispatcher.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:<span class="number">63</span>)</div><div class="line">	at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:<span class="number">279</span>)</div><div class="line">	at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:<span class="number">260</span>)</div><div class="line">	at org.apache.catalina.core.ApplicationFilterConfig.&lt;init&gt;(ApplicationFilterConfig.java:<span class="number">105</span>)</div><div class="line">	at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:<span class="number">4572</span>)</div><div class="line">	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:<span class="number">5215</span>)</div><div class="line">	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:<span class="number">150</span>)</div><div class="line">	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:<span class="number">1419</span>)</div><div class="line">	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:<span class="number">1409</span>)</div><div class="line">	at java.util.concurrent.FutureTask.run(Unknown Source)</div><div class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)</div><div class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)</div><div class="line">	at java.lang.Thread.run(Unknown Source)</div><div class="line">Caused by: Cannot locate the chosen ObjectFactory implementation: spring - [unknown location]</div><div class="line">	at org.apache.struts2.config.AbstractBeanSelectionProvider.alias(AbstractBeanSelectionProvider.java:<span class="number">64</span>)</div><div class="line">	at org.apache.struts2.config.AbstractBeanSelectionProvider.alias(AbstractBeanSelectionProvider.java:<span class="number">41</span>)</div><div class="line">	at org.apache.struts2.config.DefaultBeanSelectionProvider.register(DefaultBeanSelectionProvider.java:<span class="number">366</span>)</div><div class="line">	at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:<span class="number">163</span>)</div><div class="line">	at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:<span class="number">67</span>)</div><div class="line">	... <span class="number">17</span> more</div><div class="line">三月 <span class="number">01</span>, <span class="number">2017</span> <span class="number">9</span>:<span class="number">48</span>:<span class="number">48</span> 下午 org.apache.catalina.core.StandardContext filterStart</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>解释:<font color="#ED8F76">struts没有交给spring管理或者你根本没导入<code>struts2-spring-plugin-2.5.5.jar</code>。和以下配置</font><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.objectFactory"</span> <span class="attr">value</span>=<span class="string">"spring"</span>&gt;</span><span class="tag">&lt;/<span class="name">constant</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="hibernate有关错误"><a href="#hibernate有关错误" class="headerlink" title="hibernate有关错误"></a>hibernate有关错误</h1><ul>
<li><p>错误如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Already value [org.springframework.orm.hibernate5.SessionHolder@<span class="number">43826</span>ec] <span class="keyword">for</span> key [org.hibernate.internal.SessionFactoryImpl@<span class="number">304</span>a3655] bound to thread [main]</div></pre></td></tr></table></figure>
</li>
<li><p>解决方案:<font color="#FF0000">由于spring配置问题，类<code>LocalSessionFactoryBean</code>应该来自于<code>org.springframework.orm.hibernate5</code>而不是<code>org.springframework.orm.hibernate4</code></font></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--注意:PersonDaoImpl和LocalSessionFactoryBean都要来自于hibernate5的包下--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.LocalSessionFactoryBean"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:hibernate.cfg.xml<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"personDao"</span> <span class="attr">class</span>=<span class="string">"test.hhh.dao.Impl.PersonDaoImpl"</span> &gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"factory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.HibernateTransactionManager"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p><code>PersonDaoImpl和LocalSessionFactoryBean</code>来自的包必须相同，不能一个来自于<code>hibernate5</code>一个<code>hibernate4</code></p>
</blockquote>
<h1 id="s2sh整合时遇到错误"><a href="#s2sh整合时遇到错误" class="headerlink" title="s2sh整合时遇到错误"></a>s2sh整合时遇到错误</h1><ul>
<li>web.xml中spring的配置如下:<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>WEB-INF/classes/applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>读取时从创建时候设置的文件目录读取，所以此处要加<code>WEB-INF/classes/</code>或者从src下读取，即添加以下配置<code>classpath:applicationContext.xml</code>否者会报错</p>
</blockquote>
<ul>
<li>applicationContext.xml中导入数据源配置文件:<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"location"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:dataSource.properties<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>注意：<font color="#ED8F76"><strong>加上classpath是让spring从src中读取</strong></font></p>
</blockquote>
<h1 id="Log4J日志配置"><a href="#Log4J日志配置" class="headerlink" title="Log4J日志配置"></a>Log4J日志配置</h1><h2 id="所需jar包"><a href="#所需jar包" class="headerlink" title="所需jar包"></a>所需jar包</h2><ul>
<li>如下图<br><img src="/2017/03/01/s2sh三大框架的整合/1.png" alt=""></li>
</ul>
<h2 id="web-xml配置如下"><a href="#web-xml配置如下" class="headerlink" title="web.xml配置如下"></a>web.xml配置如下</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- log4j配置，文件路径，因为是跟随项目启动 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>log4jConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:log4j.properties<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>loggingLevel<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>info<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 加载log4j配置文件 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">listener</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.util.Log4jConfigListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">listener</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="log4J-properties配置"><a href="#log4J-properties配置" class="headerlink" title="log4J.properties配置"></a>log4J.properties配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"># Define the root logger with appender file</div><div class="line">log4j.rootLogger = DEBUG, FILE</div><div class="line"></div><div class="line"># Define the file appender</div><div class="line">log4j.appender.FILE=org.apache.log4j.FileAppender</div><div class="line"># Set the name of the file</div><div class="line">log4j.appender.FILE.File=G:\\log4J\u65E5\u5FD7\\s2sh_test01\\htmlLayout.html</div><div class="line"></div><div class="line"># Set the immediate flush to true (default)</div><div class="line">log4j.appender.FILE.ImmediateFlush=true</div><div class="line"></div><div class="line"># Set the threshold to debug mode</div><div class="line">log4j.appender.FILE.Threshold=debug</div><div class="line"></div><div class="line"># Define the layout for file appender</div><div class="line">log4j.appender.FILE.layout=org.apache.log4j.HTMLLayout</div><div class="line">log4j.appender.FILE.layout.Title=HTML Layout Example</div><div class="line">log4j.appender.FILE.layout.LocationInfo=true</div></pre></td></tr></table></figure>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="http://www.cnblogs.com/S-E-P/archive/2012/01/18/2325253.html" target="_blank" rel="external">Struts2学习笔记——Struts2与Spring整合</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;断断续续的学完了三大框架，自己也想尝试整合三大框架，这里记录我碰到的问题，以及学习的过程。&lt;/p&gt;
&lt;/block
    
    </summary>
    
      <category term="s2sh" scheme="https://super3h.me/categories/s2sh/"/>
    
    
  </entry>
  
  <entry>
    <title>Spring-hibernate整合</title>
    <link href="https://super3h.me/2017/02/26/Spring-hibernate%E6%95%B4%E5%90%88/"/>
    <id>https://super3h.me/2017/02/26/Spring-hibernate整合/</id>
    <published>2017-02-26T07:42:36.485Z</published>
    <updated>2017-02-26T08:49:56.658Z</updated>
    
    <content type="html"><![CDATA[<h1 id="所需jar包"><a href="#所需jar包" class="headerlink" title="所需jar包"></a>所需jar包</h1><p><img src="/2017/02/26/Spring-hibernate整合/1.png" alt=""></p>
<blockquote>
<p>导入<code>hibernate-release-5.2.5.Final\lib\required</code>下面的包以及spring中事务<code>spring-tx</code>包和对象关系映射<code>spring-orm</code>，jdbc<code>spring-jdbc</code>，注解所需的<code>spring-aop</code>，和<code>beans，core，context，expression</code>以及<code>commons-logging</code>依赖包，还有<code>mysql的驱动包：mysql-connector</code></p>
</blockquote>
<h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><ul>
<li><code>applicationContext.xml</code><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-4.2.xsd</div><div class="line">	http://www.springframework.org/schema/jdbc</div><div class="line">	http://www.springframework.org/schema/jdbc/spring-jdbc.xsd</div><div class="line">	http://www.springframework.org/schema/tx</div><div class="line">	http://www.springframework.org/schema/tx/spring-tx.xsd</div><div class="line">	"&gt;</div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"location"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>dataSource.properties<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;driverClassName&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;url&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;username&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;password&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.LocalSessionFactoryBean"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!--加入hibernate.cfg.xml配置--&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:hibernate.cfg.xml<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"personDao"</span> <span class="attr">class</span>=<span class="string">"com.hhh.dao.impl.PersonDaoImpl"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"factory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!--配置事务--&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.HibernateTransactionManager"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"txManager"</span> /&gt;</span></div><div class="line">	</div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p><code>注意:</code>有关<code>txManager</code>的必须加上，否则<font color="red">dao中<code>sessionFactory.getCurrentSession()</code>会报错:<code>Could not obtain transaction-synchronized Session for current thread</code></font><br><code>原因:</code><font color="#658B00">在Spring事务管理中,current Session是绑定到SpringSessionContext中的,而不是ThreadLocalSessionContext中的，切勿在<strong>hibernate中配置:hibernate.current_session_context_class=thread</strong></font><br>详情请看<a href="http://blog.csdn.net/irelandken/article/details/7193123" target="_blank" rel="external">@Transactional声明式事务管理  getCurrentSession</a></p>
</blockquote>
<ul>
<li><p><code>hibernate.cfg.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-configuration PUBLIC</span></div><div class="line">        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"</div><div class="line">        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">hibernate-configuration</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">session-factory</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dialect"</span>&gt;</span>org.hibernate.dialect.MySQL5InnoDBDialect<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"format_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">       	<span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">"com/hhh/bean/person.hbm.xml"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">session-factory</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-configuration</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>数据库配置:<code>dataSource.properties</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">driverClassName=com.mysql.jdbc.Driver</div><div class="line">url=jdbc:mysql://localhost:3306/shtest</div><div class="line">username=****</div><div class="line">password=****</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="代码详情"><a href="#代码详情" class="headerlink" title="代码详情"></a>代码详情</h1><ul>
<li><p><code>com.hhh.bean.Person</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.bean;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> Long id;</div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>();</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">		<span class="keyword">this</span>.age = age;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> name;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> age;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.age = age;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> Long <span class="title">getId</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> id;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Long id)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.id = id;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"Person [id="</span> + id + <span class="string">", name="</span> + name + <span class="string">", age="</span> + age + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><code>com.hhh.dao.PersonDao</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.dao;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.bean.Person;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PersonDao</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">addPerson</span><span class="params">(Person person)</span></span>;</div><div class="line">	</div><div class="line">	<span class="function">List&lt;Person&gt; <span class="title">listAllPerson</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><code>com.hhh.dao.impl.PersonDaoImpl</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.dao.impl;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.annotation.Resource;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.hibernate.Session;</div><div class="line"><span class="keyword">import</span> org.hibernate.SessionFactory;</div><div class="line"><span class="keyword">import</span> org.hibernate.Transaction;</div><div class="line"><span class="keyword">import</span> org.springframework.orm.hibernate5.support.HibernateDaoSupport;</div><div class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.bean.Person;</div><div class="line"><span class="keyword">import</span> com.hhh.dao.PersonDao;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonDaoImpl</span> <span class="keyword">implements</span> <span class="title">PersonDao</span></span>&#123;</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> SessionFactory factory;</div><div class="line">	</div><div class="line">	<span class="meta">@Transactional</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addPerson</span><span class="params">(Person person)</span> </span>&#123;</div><div class="line">		Session session = factory.getCurrentSession();</div><div class="line">		session.save(person);</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Transactional</span></div><div class="line">	<span class="function"><span class="keyword">public</span> List&lt;Person&gt; <span class="title">listAllPerson</span><span class="params">()</span> </span>&#123;</div><div class="line">		Session session = factory.getCurrentSession();</div><div class="line">		List&lt;Person&gt; persons = session.createQuery(<span class="string">"FROM Person"</span>).getResultList();</div><div class="line">		<span class="keyword">return</span> persons;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFactory</span><span class="params">(SessionFactory factory)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.factory = factory;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>测试类:<code>com.hhh.test.TestApp</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.test;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.hibernate.SessionFactory;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.bean.Person;</div><div class="line"><span class="keyword">import</span> com.hhh.dao.PersonDao;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestApp</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testHB</span><span class="params">()</span></span>&#123;</div><div class="line">		ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</div><div class="line">		SessionFactory factory = (SessionFactory) context.getBean(<span class="string">"sessionFactory"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAddPerson</span><span class="params">()</span></span>&#123;</div><div class="line">		ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</div><div class="line">		PersonDao dao = (PersonDao) context.getBean(<span class="string">"personDao"</span>);</div><div class="line">		Person person = <span class="keyword">new</span> Person(<span class="string">"hhh"</span>,<span class="number">20</span>);</div><div class="line">		dao.addPerson(person);</div><div class="line">	&#125;</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testListPerson</span><span class="params">()</span></span>&#123;</div><div class="line">		ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</div><div class="line">		PersonDao dao = (PersonDao) context.getBean(<span class="string">"personDao"</span>);</div><div class="line">		List&lt;Person&gt; persons = dao.listAllPerson();</div><div class="line">		<span class="keyword">for</span>(Person p:persons)&#123;</div><div class="line">			System.out.println(p);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="代码详情-1"><a href="#代码详情-1" class="headerlink" title="代码详情"></a>代码详情</h1><p>请点此处：<a href="https://github.com/super3H/j2EE/tree/master/Spring-Hibernate" target="_blank" rel="external">Spring-Hibernate</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;所需jar包&quot;&gt;&lt;a href=&quot;#所需jar包&quot; class=&quot;headerlink&quot; title=&quot;所需jar包&quot;&gt;&lt;/a&gt;所需jar包&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/2017/02/26/Spring-hibernate整合/1.png&quot; alt=&quot;&quot;
    
    </summary>
    
      <category term="spring" scheme="https://super3h.me/categories/spring/"/>
    
    
  </entry>
  
  <entry>
    <title>Spring AOP+AspectJ</title>
    <link href="https://super3h.me/2017/02/25/Spring%20AOP+AspectJ/"/>
    <id>https://super3h.me/2017/02/25/Spring AOP+AspectJ/</id>
    <published>2017-02-25T08:25:17.145Z</published>
    <updated>2017-02-25T08:45:08.286Z</updated>
    
    <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><ul>
<li>常见AspectJ的注解：<ul>
<li><code>@Before:</code>方法执行前运行</li>
<li><code>@After:</code>运行在方法返回结果后</li>
<li><code>@AfterReturning:</code>运行在方法返回一个结果后，在拦截器返回结果</li>
<li><code>@AfterThrowing:</code>运行方法在抛出异常后</li>
<li><code>@Around:</code>围绕方法执行运行，结合以上这三个通知<blockquote>
<p><code>注意:</code>Spring AOP 中没有 AspectJ 支持</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h1 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h1><p><img src="/2017/02/25/Spring AOP+AspectJ/1.png" alt=""></p>
<h1 id="Spring-Beans"><a href="#Spring-Beans" class="headerlink" title="Spring Beans"></a>Spring Beans</h1><blockquote>
<p>普通 bean 中有几个方法，后来通过 AspectJ 注解拦截</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.bo;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CustomerBo</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">addCustomer</span><span class="params">()</span></span>;</div><div class="line">	</div><div class="line">	<span class="function">String <span class="title">addCustomerReturnValue</span><span class="params">()</span></span>;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">addCustomerThrowException</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">addCustomerAround</span><span class="params">(String name)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.bo.impl;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.yiibai.customer.bo.CustomerBo;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerBoImpl</span> <span class="keyword">implements</span> <span class="title">CustomerBo</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCustomer</span><span class="params">()</span></span>&#123;</div><div class="line">		System.out.println(<span class="string">"addCustomer() is running "</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">addCustomerReturnValue</span><span class="params">()</span></span>&#123;</div><div class="line">		System.out.println(<span class="string">"addCustomerReturnValue() is running "</span>);</div><div class="line">		<span class="keyword">return</span> <span class="string">"abc"</span>;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCustomerThrowException</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">		System.out.println(<span class="string">"addCustomerThrowException() is running "</span>);</div><div class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"Generic Error"</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCustomerAround</span><span class="params">(String name)</span></span>&#123;</div><div class="line">		System.out.println(<span class="string">"addCustomerAround() is running, args : "</span> + name);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="启用AspectJ"><a href="#启用AspectJ" class="headerlink" title="启用AspectJ"></a>启用AspectJ</h1><blockquote>
<p>在 Spring 配置文件，把<code>“&lt;aop:aspectj-autoproxy /&gt;”</code>，并定义Aspect(拦截)和普通的bean。<br>File : applicationContext.xml</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> </div><div class="line">	<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-3.0.xsd </div><div class="line">	http://www.springframework.org/schema/aop </div><div class="line">	http://www.springframework.org/schema/aop/spring-aop-3.0.xsd "&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> /&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"customerBo"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.customer.bo.impl.CustomerBoImpl"</span> /&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- Aspect --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"logAspect"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.aspect.LoggingAspect"</span> /&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="AspectJ-Before"><a href="#AspectJ-Before" class="headerlink" title="AspectJ @Before"></a>AspectJ @Before</h1><blockquote>
<p>在下面例子中，logBefore()方法将在 customerBo接口的 addCustomer()方法的执行之前被执行。<br><strong>AspectJ的“切入点”是用来声明哪种方法将被拦截</strong></p>
</blockquote>
<ul>
<li><p>File : LoggingAspect.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.aspect;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.aspectj.lang.JoinYiibai;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</div><div class="line"></div><div class="line"><span class="meta">@Aspect</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggingAspect</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Before</span>(<span class="string">"execution(* com.yiibai.customer.bo.CustomerBo.addCustomer(..))"</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logBefore</span><span class="params">(JoinYiibai joinYiibai)</span> </span>&#123;</div><div class="line"></div><div class="line">		System.out.println(<span class="string">"logBefore() is running!"</span>);</div><div class="line">		System.out.println(<span class="string">"hijacked : "</span> + joinYiibai.getSignature().getName());</div><div class="line">		System.out.println(<span class="string">"******"</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>运行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CustomerBo customer = (CustomerBo) appContext.getBean(<span class="string">"customerBo"</span>);</div><div class="line">customer.addCustomer();</div></pre></td></tr></table></figure>
</li>
<li><p>结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">logBefore() is running!</div><div class="line">hijacked : addCustomer</div><div class="line">******</div><div class="line">addCustomer() is running</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="AspectJ-After"><a href="#AspectJ-After" class="headerlink" title="AspectJ @After"></a>AspectJ @After</h1><blockquote>
<p>在下面例子中，logAfter()方法将在 customerBo 接口的 addCustomer()方法的执行之后执行。</p>
</blockquote>
<ul>
<li>File : LoggingAspect.java<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.aspect;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.aspectj.lang.JoinYiibai;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.After;</div><div class="line"></div><div class="line"><span class="meta">@Aspect</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggingAspect</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@After</span>(<span class="string">"execution(* com.yiibai.customer.bo.CustomerBo.addCustomer(..))"</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logAfter</span><span class="params">(JoinYiibai joinYiibai)</span> </span>&#123;</div><div class="line"></div><div class="line">		System.out.println(<span class="string">"logAfter() is running!"</span>);</div><div class="line">		System.out.println(<span class="string">"hijacked : "</span> + joinYiibai.getSignature().getName());</div><div class="line">		System.out.println(<span class="string">"******"</span>);</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="AspectJ-AfterReturning"><a href="#AspectJ-AfterReturning" class="headerlink" title="AspectJ @AfterReturning"></a>AspectJ @AfterReturning</h1><blockquote>
<p>在下面例子中，logAfterReturning()方法将在 customerBo 接口的addCustomerReturnValue()方法执行之后执行。此外，<em>还可以截取返回的值使用“returning”属性。</em></p>
<font color="red">要截取返回的值，对“returning”属性(结果)的值必须用相同的方法参数(结果)</font>

</blockquote>
<ul>
<li><p>File : LoggingAspect.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.aspect;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.aspectj.lang.JoinYiibai;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterReturning;</div><div class="line"></div><div class="line"><span class="meta">@Aspect</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggingAspect</span> </span>&#123;</div><div class="line"></div><div class="line">   <span class="meta">@AfterReturning</span>(</div><div class="line">      pointcut = <span class="string">"execution(* com.yiibai.customer.bo.CustomerBo.addCustomerReturnValue(..))"</span>,</div><div class="line">      returning= <span class="string">"result"</span>)</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logAfterReturning</span><span class="params">(JoinYiibai joinYiibai, Object result)</span> </span>&#123;</div><div class="line"></div><div class="line">	System.out.println(<span class="string">"logAfterReturning() is running!"</span>);</div><div class="line">	System.out.println(<span class="string">"hijacked : "</span> + joinYiibai.getSignature().getName());</div><div class="line">	System.out.println(<span class="string">"Method returned value is : "</span> + result);</div><div class="line">	System.out.println(<span class="string">"******"</span>);</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">addCustomerReturnValue() <span class="function">is running </span></div><div class="line"><span class="title">logAfterReturning</span><span class="params">()</span> is running!</div><div class="line">hijacked : addCustomerReturnValue</div><div class="line">Method returned value is : abc</div><div class="line">******</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="AspectJ-AfterReturning-1"><a href="#AspectJ-AfterReturning-1" class="headerlink" title="AspectJ @AfterReturning"></a>AspectJ @AfterReturning</h1><blockquote>
<p>在下面的例子中，如果 customerBo 接口的addCustomerThrowException()方法抛出异常logAfterThrowing()方法将被执行。</p>
</blockquote>
<ul>
<li><p>File : LoggingAspect.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.aspect;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.aspectj.lang.JoinYiibai;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterThrowing;</div><div class="line"></div><div class="line"><span class="meta">@Aspect</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggingAspect</span> </span>&#123;</div><div class="line"></div><div class="line">   <span class="meta">@AfterThrowing</span>(</div><div class="line">      pointcut = <span class="string">"execution(* com.yiibai.customer.bo.CustomerBo.addCustomerThrowException(..))"</span>,</div><div class="line">      throwing= <span class="string">"error"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logAfterThrowing</span><span class="params">(JoinYiibai joinYiibai, Throwable error)</span> </span>&#123;</div><div class="line"></div><div class="line">	System.out.println(<span class="string">"logAfterThrowing() is running!"</span>);</div><div class="line">	System.out.println(<span class="string">"hijacked : "</span> + joinYiibai.getSignature().getName());</div><div class="line">	System.out.println(<span class="string">"Exception : "</span> + error);</div><div class="line">	System.out.println(<span class="string">"******"</span>);</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">addCustomerThrowException() <span class="function">is running </span></div><div class="line"><span class="title">logAfterThrowing</span><span class="params">()</span> is running!</div><div class="line">hijacked : addCustomerThrowException</div><div class="line">Exception : java.lang.Exception: Generic Error</div><div class="line">******</div><div class="line">Exception in thread "main" java.lang.Exception: Generic Error</div><div class="line">	<span class="comment">//...</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="AspectJ-Around"><a href="#AspectJ-Around" class="headerlink" title="AspectJ @Around"></a>AspectJ @Around</h1><blockquote>
<p>在下面例子中，logAround()方法将在customerBo接口的addCustomerAround()方法执行之前执行， <strong>必须定义“joinYiibai.proceed();” 控制何时拦截器返回控制到原来的addCustomerAround()方法。</strong></p>
</blockquote>
<ul>
<li><p>File : LoggingAspect.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.aspect;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinYiibai;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</div><div class="line"></div><div class="line"><span class="meta">@Aspect</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggingAspect</span> </span>&#123;</div><div class="line"></div><div class="line">   <span class="meta">@Around</span>(<span class="string">"execution(* com.yiibai.customer.bo.CustomerBo.addCustomerAround(..))"</span>)</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logAround</span><span class="params">(ProceedingJoinYiibai joinYiibai)</span> <span class="keyword">throws</span> Throwable </span>&#123;</div><div class="line"></div><div class="line">	System.out.println(<span class="string">"logAround() is running!"</span>);</div><div class="line">	System.out.println(<span class="string">"hijacked method : "</span> + joinYiibai.getSignature().getName());</div><div class="line">	System.out.println(<span class="string">"hijacked arguments : "</span> + Arrays.toString(joinYiibai.getArgs()));</div><div class="line">		</div><div class="line">	System.out.println(<span class="string">"Around before is running!"</span>);</div><div class="line">	joinYiibai.proceed(); <span class="comment">//continue on the intercepted method</span></div><div class="line">	System.out.println(<span class="string">"Around after is running!"</span>);</div><div class="line">		</div><div class="line">	System.out.println(<span class="string">"******"</span>);</div><div class="line"></div><div class="line">   &#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">logAround() is running!</div><div class="line">hijacked method : addCustomerAround</div><div class="line">hijacked arguments : [yiibai]</div><div class="line">Around before is running!</div><div class="line">addCustomerAround() is running, args : yiibai</div><div class="line">Around after is running!</div><div class="line">******</div></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;常见AspectJ的注解：&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@Before:&lt;/code&gt;方法执行前运行&lt;/li&gt;
&lt;li&gt;&lt;cod
    
    </summary>
    
      <category term="spring" scheme="https://super3h.me/categories/spring/"/>
    
    
  </entry>
  
  <entry>
    <title>Spring表达式语言</title>
    <link href="https://super3h.me/2017/02/25/Spring%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E8%A8%80/"/>
    <id>https://super3h.me/2017/02/25/Spring表达式语言/</id>
    <published>2017-02-25T03:07:16.141Z</published>
    <updated>2017-02-25T05:13:40.652Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<p>Spring EL与OGNL和JSF EL相似，计算评估或在bean创建时执行。此外，<em>所有的Spring表达式都可以通过XML或注解。</em><br>在本教程中，我们将学习如何使用Spring表达式语言(SpEL)，注入字符串，整数，Bean到属性，无论是在XML和注释。</p>
</blockquote>
<h1 id="Spring-Beans"><a href="#Spring-Beans" class="headerlink" title="Spring Beans"></a>Spring Beans</h1><blockquote>
<p>两个简单Bean，后来利用 SpEL 注入值到属性，在 XML 和 注释。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> Item item;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> String itemName;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> qty;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Spring-EL以XML形式"><a href="#Spring-EL以XML形式" class="headerlink" title="Spring EL以XML形式"></a>Spring EL以XML形式</h1><blockquote>
<p>使用 SpEL关闭的#{ SpEL expression }括号，请参阅XML bean定义文件下面的例子。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;beans xmlns="http://www.springframework.org/schema/beans"</div><div class="line">	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</div><div class="line">	xsi:schemaLocation="http://www.springframework.org/schema/beans</div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"&gt;</div><div class="line"></div><div class="line">	&lt;bean id="itemBean" class="com.yiibai.core.Item"&gt;</div><div class="line">		&lt;property name="name" value="itemA" /&gt;</div><div class="line">		&lt;property name="qty" value="10" /&gt;</div><div class="line">	&lt;/bean&gt;</div><div class="line"></div><div class="line">	&lt;bean id="customerBean" class="com.yiibai.core.Customer"&gt;</div><div class="line">		&lt;property name="item" value="#&#123;itemBean&#125;" /&gt;</div><div class="line">		&lt;property name="itemName" value="#&#123;itemBean.name&#125;" /&gt;</div><div class="line">	&lt;/bean&gt;</div><div class="line">	</div><div class="line">&lt;/beans&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li><code>#{itemBean}</code>: 注入<code>“itemBean”</code>到<code>“customerBean”</code>Bean 的<code>“item”</code>属性。</li>
<li><code>#{itemBean.name}</code>: 注入<code>“itemBean”</code>的<code>“name”</code>属性到 <code>“customerBean&quot;</code>bean的<code>&quot;itemname”</code>属性。</li>
</ul>
<h1 id="Spring-EL以注解形式"><a href="#Spring-EL以注解形式" class="headerlink" title="Spring EL以注解形式"></a>Spring EL以注解形式</h1><h2 id="代码解析"><a href="#代码解析" class="headerlink" title="代码解析"></a>代码解析</h2><blockquote>
<p>要在注解使用使用SpEL，<strong>必须通过注解注册您的组件。如果注册bean在XML和Java类中定义@Value，该@Value将无法执行。</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="meta">@Component</span>(<span class="string">"customerBean"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;itemBean&#125;"</span>)</div><div class="line">	<span class="keyword">private</span> Item item;</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;itemBean.name&#125;"</span>)</div><div class="line">	<span class="keyword">private</span> String itemName;</div><div class="line"></div><div class="line">	<span class="comment">//...</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="meta">@Component</span>(<span class="string">"itemBean"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"itemA"</span>) <span class="comment">//inject String directly</span></div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"10"</span>) <span class="comment">//inject interger directly</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> qty;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> name;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>启用自动组件扫描。</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> </div><div class="line">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</div><div class="line">	http://www.springframework.org/schema/context</div><div class="line">	http://www.springframework.org/schema/context/spring-context-3.0.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.yiibai.core"</span> /&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>在注解模式下，可以使用<code>@Value</code>定义Spring EL。在这种情况下，一个String和Integer值直接注入到“itemBean”，之后又注入“itemBean”到“customerBean”属性。</p>
</blockquote>
<h2 id="执行输出"><a href="#执行输出" class="headerlink" title="执行输出"></a>执行输出</h2><blockquote>
<p>运行它，无论是使用 SpEL在XML 还是注释都显示了同样的结果：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	    ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</div><div class="line"></div><div class="line">	    Customer obj = (Customer) context.getBean(<span class="string">"customerBean"</span>);</div><div class="line">	    System.out.println(obj);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>输出结果<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Customer [item=Item [name=itemA, qty=<span class="number">10</span>], itemName=itemA]</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="详细内容"><a href="#详细内容" class="headerlink" title="详细内容"></a>详细内容</h2><p><a href="http://www.yiibai.com/spring/spring-el-hello-world-example.html" target="_blank" rel="external">Spring EL hello world</a></p>
<h1 id="Spring-EL方法调用实例"><a href="#Spring-EL方法调用实例" class="headerlink" title="Spring EL方法调用实例"></a>Spring EL方法调用实例</h1><h2 id="代码解析-1"><a href="#代码解析-1" class="headerlink" title="代码解析"></a>代码解析</h2><blockquote>
<p>了解如何实现Spring EL方法调用与@Value注释<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="meta">@Component</span>(<span class="string">"customerBean"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;'yiibai'.toUpperCase()&#125;"</span>)</div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;priceBean.getSpecialPrice()&#125;"</span>)</div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> amount;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> name;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getAmount</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> amount;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAmount</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.amount = amount;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"Customer [name="</span> + name + <span class="string">", amount="</span> + amount + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="meta">@Component</span>(<span class="string">"priceBean"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Price</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSpecialPrice</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Double(<span class="number">199.09</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>输出<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Customer [name=YIIBAI, amount=<span class="number">199.09</span>]</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="详细内容-1"><a href="#详细内容-1" class="headerlink" title="详细内容"></a>详细内容</h2><p><a href="http://www.yiibai.com/spring/spring-el-method-invocation-example.html" target="_blank" rel="external">Spring EL方法调用实例</a></p>
<h1 id="Spring-EL运算符"><a href="#Spring-EL运算符" class="headerlink" title="Spring EL运算符"></a>Spring EL运算符</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>Spring EL支持大多数标准的数学，逻辑和关系运算符。 例如，<ul>
<li><code>关系运算符:</code> 等于 (==, eq), 不等于 (!=, ne), 小于 (&lt;, lt), 小于或等于 (&lt;= , le), 大于 (&gt;, gt), 和大于或等于 (&gt;=, ge).</li>
<li><code>逻辑运算符:</code>且, 或, 非 (!).</li>
<li><code>数学运算符:</code>加法(+), 减法 (-), 乘法 (*), 除法(/), 除模(%) 和指数幂 (^).</li>
</ul>
</li>
</ul>
<h2 id="代码解析-2"><a href="#代码解析-2" class="headerlink" title="代码解析"></a>代码解析</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="meta">@Component</span>(<span class="string">"customerBean"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">//Relational operators</span></div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 == 1&#125;"</span>) <span class="comment">//true</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testEqual;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 != 1&#125;"</span>) <span class="comment">//false</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testNotEqual;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 &lt; 1&#125;"</span>) <span class="comment">//false</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testLessThan;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 &lt;= 1&#125;"</span>) <span class="comment">//true</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testLessThanOrEqual;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 &gt; 1&#125;"</span>) <span class="comment">//false</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testGreaterThan;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 &gt;= 1&#125;"</span>) <span class="comment">//true</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testGreaterThanOrEqual;</div><div class="line"></div><div class="line">	<span class="comment">//Logical operators , numberBean.no == 999</span></div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;numberBean.no == 999 and numberBean.no &lt; 900&#125;"</span>) <span class="comment">//false</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testAnd;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;numberBean.no == 999 or numberBean.no &lt; 900&#125;"</span>) <span class="comment">//true</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testOr;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;!(numberBean.no == 999)&#125;"</span>) <span class="comment">//false</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testNot;</div><div class="line"></div><div class="line">	<span class="comment">//Mathematical operators</span></div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 + 1&#125;"</span>) <span class="comment">//2.0</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> testAdd;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;'1' + '@' + '1'&#125;"</span>) <span class="comment">//1@1</span></div><div class="line">	<span class="keyword">private</span> String testAddString;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 - 1&#125;"</span>) <span class="comment">//0.0</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> testSubtraction;</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 * 1&#125;"</span>) <span class="comment">//1.0</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> testMultiplication;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;10 / 2&#125;"</span>) <span class="comment">//5.0</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> testDivision;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;10 % 10&#125;"</span>) <span class="comment">//0.0</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> testModulus ;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;2 ^ 2&#125;"</span>) <span class="comment">//4.0</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> testExponentialPower;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"Customer [testEqual="</span> + testEqual + <span class="string">", testNotEqual="</span></div><div class="line">				+ testNotEqual + <span class="string">", testLessThan="</span> + testLessThan</div><div class="line">				+ <span class="string">", testLessThanOrEqual="</span> + testLessThanOrEqual</div><div class="line">				+ <span class="string">", testGreaterThan="</span> + testGreaterThan</div><div class="line">				+ <span class="string">", testGreaterThanOrEqual="</span> + testGreaterThanOrEqual</div><div class="line">				+ <span class="string">", testAnd="</span> + testAnd + <span class="string">", testOr="</span> + testOr + <span class="string">", testNot="</span></div><div class="line">				+ testNot + <span class="string">", testAdd="</span> + testAdd + <span class="string">", testAddString="</span></div><div class="line">				+ testAddString + <span class="string">", testSubtraction="</span> + testSubtraction</div><div class="line">				+ <span class="string">", testMultiplication="</span> + testMultiplication</div><div class="line">				+ <span class="string">", testDivision="</span> + testDivision + <span class="string">", testModulus="</span></div><div class="line">				+ testModulus + <span class="string">", testExponentialPower="</span></div><div class="line">				+ testExponentialPower + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="详情链接"><a href="#详情链接" class="headerlink" title="详情链接"></a>详情链接</h2><p><a href="http://www.yiibai.com/spring/spring-el-operators-example.html" target="_blank" rel="external">Spring EL运算符实例</a></p>
<h1 id="更多详情内容"><a href="#更多详情内容" class="headerlink" title="更多详情内容"></a>更多详情内容</h1><p><a href="http://www.yiibai.com/spring/spring-el-lists-maps-example.html" target="_blank" rel="external">Spring EL Lists,Maps实例</a><br><a href="http://www.yiibai.com/spring/spring-el-regular-expression-example.html" target="_blank" rel="external">Spring EL正则表达式实例</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;Spring EL与OGNL和JSF EL相似，计算评估或在bean创建时执行。此外，&lt;em&gt;所有的Spring表
    
    </summary>
    
      <category term="spring" scheme="https://super3h.me/categories/spring/"/>
    
    
  </entry>
  
  <entry>
    <title>Spring自动扫描组件</title>
    <link href="https://super3h.me/2017/02/25/Spring%E8%87%AA%E5%8A%A8%E6%89%AB%E6%8F%8F%E7%BB%84%E4%BB%B6/"/>
    <id>https://super3h.me/2017/02/25/Spring自动扫描组件/</id>
    <published>2017-02-25T02:35:10.542Z</published>
    <updated>2017-02-25T03:06:22.002Z</updated>
    
    <content type="html"><![CDATA[<h1 id="自动组件扫描"><a href="#自动组件扫描" class="headerlink" title="自动组件扫描"></a>自动组件扫描</h1><blockquote>
<p>启用Spring组件扫描功能。<br>使用@Component注释来表示这是类是一个自动扫描组件。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.dao;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerDAO</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"Hello , This is CustomerDAO"</span>;</div><div class="line">	&#125;	</div><div class="line">&#125;</div><div class="line"><span class="comment">//DAO层，添加@Component，表明这也是一个自动扫描组件。</span></div><div class="line"><span class="keyword">package</span> com.yiibai.customer.services;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.yiibai.customer.dao.CustomerDAO;</div><div class="line"></div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerService</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	CustomerDAO customerDAO;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"CustomerService [customerDAO="</span> + customerDAO + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>将这个<code>“context:component”</code>在bean配置文件，这意味着，在 Spring 中启用自动扫描功能。<code>base-package</code> 是指明存储组件，Spring将扫描该文件夹，并找出Bean(注解为@Component)并注册到 Spring 容器。</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</div><div class="line">	http://www.springframework.org/schema/context</div><div class="line">	http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.yiibai.customer"</span> /&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>执行:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.yiibai.customer.services.CustomerService;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( String[] args )</span></span></div><div class="line">    &#123;</div><div class="line">    	ApplicationContext context = </div><div class="line">    	   <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="keyword">new</span> String[] &#123;<span class="string">"Spring-AutoScan.xml"</span>&#125;);</div><div class="line"></div><div class="line">    	CustomerService cust = (CustomerService)context.getBean(<span class="string">"customerService"</span>);</div><div class="line">    	System.out.println(cust);</div><div class="line">    	</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>输出结果<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CustomerService [customerDAO=Hello , This is CustomerDAO]</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="自定义自动扫描组件名称"><a href="#自定义自动扫描组件名称" class="headerlink" title="自定义自动扫描组件名称"></a>自定义自动扫描组件名称</h1><ul>
<li><p>默认情况下，Spring 将小写部件的第一字符 从’CustomerService’到’customerService’。可以检索该组件名称为“customerService”。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CustomerService cust = (CustomerService)context.getBean(<span class="string">"customerService"</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>要创建组件的自定义名称，你可以这样自定义名称：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Service</span>(<span class="string">"AAA"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerService</span> </span></div><div class="line">...</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>现在，可以用’AAA’这个名称进行检索。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CustomerService cust = (CustomerService)context.getBean(<span class="string">"AAA"</span>);</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="自动组件扫描注释类型"><a href="#自动组件扫描注释类型" class="headerlink" title="自动组件扫描注释类型"></a>自动组件扫描注释类型</h1><ul>
<li>在Spring2.5中，有4种类型的组件自动扫描注释类型<ul>
<li><code>@Component</code> – 指示自动扫描组件。</li>
<li><code>@Repository</code> – 表示在持久层DAO组件。</li>
<li><code>@Service</code> – 表示在业务层服务组件。</li>
<li><code>@Controller</code> – 表示在表示层控制器组件。<blockquote>
<p>因此，使用哪一个？其实并不那么重要。参见 @Repository，@Service 或 @Controller 源代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</div><div class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</div><div class="line"><span class="meta">@Documented</span></div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Repository &#123;</div><div class="line"></div><div class="line">	<span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>你可能会发现，<em>所有的 @Repository, @Service 或 @Controller 被注解为 @Component。</em>因此<font color="#008AE2">，我们可以只使用 @Component 对所有组件进行自动扫描？是的，Spring会自动扫描所有组件的 @Component 注解。</font><br>它工作正常，但不是一个好的做法，为便于阅读，应该始终声明<code>@Repository，@ Service 或 @Controller</code> 在指定的层，使你的代码更易于阅读，如下：</p>
<ul>
<li>DAO 层<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.dao;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</div><div class="line"></div><div class="line"><span class="meta">@Repository</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerDAO</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"Hello , This is CustomerDAO"</span>;</div><div class="line">	&#125;	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<ul>
<li>Service 层<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.services;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.yiibai.customer.dao.CustomerDAO;</div><div class="line"></div><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerService</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	CustomerDAO customerDAO;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"CustomerService [customerDAO="</span> + customerDAO + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line">		</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Spring过滤器组件自动扫描"><a href="#Spring过滤器组件自动扫描" class="headerlink" title="Spring过滤器组件自动扫描"></a>Spring过滤器组件自动扫描</h1><h2 id="过滤组件-包含"><a href="#过滤组件-包含" class="headerlink" title="过滤组件 - 包含"></a>过滤组件 - 包含</h2><blockquote>
<p>参见下面的例子中使用Spring “过滤” 扫描并注册匹配定义<code>“regex”</code>，<em>即使该类组件的名称未标注 @Component 。</em></p>
<ul>
<li>DAO 层<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.dao;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerDAO</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"Hello , This is CustomerDAO"</span>;</div><div class="line">	&#125;	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<ul>
<li><p>Service 层</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.services;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> com.yiibai.customer.dao.CustomerDAO;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerService</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	CustomerDAO customerDAO;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"CustomerService [customerDAO="</span> + customerDAO + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line">		</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Spring 过滤</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</div><div class="line">	http://www.springframework.org/schema/context</div><div class="line">	http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.yiibai"</span> &gt;</span></div><div class="line"></div><div class="line">		<span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"regex"</span> </span></div><div class="line">                       <span class="attr">expression</span>=<span class="string">"com.yiibai.customer.dao.*DAO.*"</span> /&gt;</div><div class="line"></div><div class="line">		<span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"regex"</span> </span></div><div class="line">                       <span class="attr">expression</span>=<span class="string">"com.yiibai.customer.services.*Service.*"</span> /&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>执行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.yiibai.customer.services.CustomerService;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( String[] args )</span></span></div><div class="line">    &#123;</div><div class="line">    	ApplicationContext context = </div><div class="line">		<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="keyword">new</span> String[] &#123;<span class="string">"Spring-AutoScan.xml"</span>&#125;);</div><div class="line"></div><div class="line">    	CustomerService cust = (CustomerService)context.getBean(<span class="string">"customerService"</span>);</div><div class="line">    	System.out.println(cust);</div><div class="line">    	</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//输出</span></div><div class="line">CustomerService [customerDAO=Hello , This is CustomerDAO]</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>在这个XML过滤中，所有文件的名称中包含 DAO 或 Service(<em>DAO.</em>, <em>Services.</em>) 单词将被检测并在 Spring 容器中注册。</p>
</blockquote>
<h2 id="过滤组件-不包含"><a href="#过滤组件-不包含" class="headerlink" title="过滤组件 - 不包含"></a>过滤组件 - 不包含</h2><blockquote>
<p>另外，<em>您还可以排除指定组件，以避免 Spring 检测和 Spring 容器注册。</em><font color="red">不包括在这些文件中标注有 @Service 。</font><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.yiibai.customer"</span> &gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> </span></div><div class="line">			<span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Service"</span> /&gt;		</div><div class="line">	<span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>不包括那些包含DAO这个词组文件名。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.yiibai"</span> &gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"regex"</span> </span></div><div class="line">			<span class="attr">expression</span>=<span class="string">"com.yiibai.customer.dao.*DAO.*"</span> /&gt;		</div><div class="line">	<span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://www.yiibai.com/spring/spring-auto-scanning-components.html" target="_blank" rel="external">Spring自动扫描组件</a><br><a href="http://www.yiibai.com/spring/spring-filtering-components-in-auto-scanning.html" target="_blank" rel="external">Spring过滤器组件自动扫描</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;自动组件扫描&quot;&gt;&lt;a href=&quot;#自动组件扫描&quot; class=&quot;headerlink&quot; title=&quot;自动组件扫描&quot;&gt;&lt;/a&gt;自动组件扫描&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;启用Spring组件扫描功能。&lt;br&gt;使用@Component注释来表示这是类是一
    
    </summary>
    
      <category term="spring" scheme="https://super3h.me/categories/spring/"/>
    
    
  </entry>
  
  <entry>
    <title>spring-xmlns,xmlns:xsi和xsi:schemaLocation</title>
    <link href="https://super3h.me/2017/02/24/spring-xmlns,xmlns%20xsi%E5%92%8Cxsi%20schemaLocation/"/>
    <id>https://super3h.me/2017/02/24/spring-xmlns,xmlns xsi和xsi schemaLocation/</id>
    <published>2017-02-24T12:13:43.477Z</published>
    <updated>2017-02-24T12:46:14.995Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<p><em>相信很多人和我一样，在编写Spring或者Maven或者其他需要用到XML文档的程序时，通常都是将这些XML文档头拷贝过来，并没有理解其中元素（比 如xmlns，xmlns:xsi，xsi:schemaLocation）的真正含义，不知道哪些元素是多余的，也不知道为什么要加那些元素。这样当有 时候网上Copy的XML头有错的时候自己却不知道怎么下手。我也是这样的，于是今天花了点时间好好的理解了一下这些元素及其用法，现整理与此。</em></p>
</blockquote>
<h1 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h1><blockquote>
<p>话不多说，先来一段Spring的XML样本，相信大家都很眼熟：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></div><div class="line">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans </span></div><div class="line">                           http://www.springframework.org/schema/beans/spring-beans.xsd</div><div class="line">                           http://www.springframework.org/schema/context </div><div class="line">                           http://www.springframework.org/schema/context/spring-context.xsd</div><div class="line">                           http://www.springframework.org/schema/mvc</div><div class="line">                           http://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt;</div><div class="line">                           </div><div class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"xxx.xxx.controller"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/images/**"</span> <span class="attr">location</span>=<span class="string">"/images/"</span> /&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxx"</span> <span class="attr">class</span>=<span class="string">"xxx.xxx.xxx.Xxx"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"xxx"</span> <span class="attr">value</span>=<span class="string">"xxxx"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>这 个文档中，根元素<beans>就不用说了，接下来是xmlns。那么什么是xmlns呢？<font color="#FF899C">xmlns其实是XML Namespace的缩写，可译为“XML命名空间”，但个人觉得，翻译后的名字反而不好理解，所以我们就叫它为XML Namespace吧。</font></beans></p>
</blockquote>
<h1 id="为什么需要xmlns？"><a href="#为什么需要xmlns？" class="headerlink" title="为什么需要xmlns？"></a>为什么需要xmlns？</h1><blockquote>
<p>考虑这样两个XML文档：表示HTML表格元素的<code>&lt;table/&gt;</code>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Apples<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Bananas<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></div></pre></td></tr></table></figure>
<p>和描述一张桌子的<code>&lt;table/&gt;</code>：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>African Coffee Table<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">width</span>&gt;</span>80<span class="tag">&lt;/<span class="name">width</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">length</span>&gt;</span>120<span class="tag">&lt;/<span class="name">length</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><em>假如这两个 XML 文档被一起使用，由于两个文档都包含带有不同内容和定义的 <code>&lt;table&gt;</code>元素，就会发生命名冲突。XML 解析器是无法确定如何处理这类冲突。为了解决上述问题，xmlns就产生了。</em></p>
</blockquote>
<h1 id="如何是用xmlns？"><a href="#如何是用xmlns？" class="headerlink" title="如何是用xmlns？"></a>如何是用xmlns？</h1><blockquote>
<p>很简单，使用语法：<code>xmlns:namespace-prefix=&quot;namespaceURI&quot;</code>。其中<font color="#42CA98">namespace-prefix为自定义前缀，只要在这个XML文档中保证前缀不重复即可；namespaceURI是这个前缀对应的XML Namespace的定义。</font>例如，<br><figure class="highlight d"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xmlns:context=<span class="string">"http://www.springframework.org/schema/context"</span></div></pre></td></tr></table></figure></p>
<p>这一句定义了一个<a href="http://www.springframwork.org/schema/context的Namespace（这和Java类中的包的声明很相似），并将其和前缀context绑定。所以上面的Spring" target="_blank" rel="external">http://www.springframwork.org/schema/context的Namespace（这和Java类中的包的声明很相似），并将其和前缀context绑定。所以上面的Spring</a> XML文档中会有这么一句：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"xxx.xxx.controller"</span> /&gt;</span></div></pre></td></tr></table></figure></p>
<font color="#42CA98">这里的<component-scan>元素就来自别名为context的XML Namespace，也就是在<a href="http://www.springframework.org/schema/context中定义的。" target="_blank" rel="external">http://www.springframework.org/schema/context中定义的。</a></component-scan></font>

</blockquote>
<ul>
<li>我们还可以将前缀定义为abc：<figure class="highlight d"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xmlns:abc=<span class="string">"namespaceURI"</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>这样再使用这个namespaceURI中的元素时，需要以abc为前缀，例如：<code>&lt;abc:xxx/&gt;</code>。再拿上面的例子解释怎么使用xmlns：</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 这里xmlns:h="url1"表示这个table是用h作为标记，table的写法在url1中定义 --&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">h:table</span> <span class="attr">xmlns:h</span>=<span class="string">"url1"</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;<span class="name">h:tr</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">h:td</span>&gt;</span>Apples<span class="tag">&lt;/<span class="name">h:td</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">h:td</span>&gt;</span>Bananas<span class="tag">&lt;/<span class="name">h:td</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;/<span class="name">h:tr</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">h:table</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 这里xmlns:f="url2"表示这个table是用f作为标记，table的写法在url2中定义 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">f:table</span> <span class="attr">xmlns:f</span>=<span class="string">"url2"</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;<span class="name">f:name</span>&gt;</span>African Coffee Table<span class="tag">&lt;/<span class="name">f:name</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;<span class="name">f:width</span>&gt;</span>80<span class="tag">&lt;/<span class="name">f:width</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;<span class="name">f:length</span>&gt;</span>120<span class="tag">&lt;/<span class="name">f:length</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">f:table</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><font color="#7030A0">后者与前者仅仅使用不同前缀，我们为<code>&lt;table&gt;</code>标签添加了一个 xmlns 属性，这样就为前缀赋予了一个与某个命名空间相关联的限定名称。</font>此时再把它们放在一起，XML解析器就不会报错了。</p>
</blockquote>
<h1 id="xmlns和xmlns-xsi有什么不同？"><a href="#xmlns和xmlns-xsi有什么不同？" class="headerlink" title="xmlns和xmlns:xsi有什么不同？"></a>xmlns和xmlns:xsi有什么不同？</h1><ul>
<li>xmlns表示默认的Namespace。例如Spring XML文档中的:<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xmlns="http://www.springframework.org/schema/beans"</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>这一句表示该文档默认的XML Namespace为<a href="http://www.springframwork.org/schema/beans。" target="_blank" rel="external">http://www.springframwork.org/schema/beans。</a><font color="#7030A0">对于默认的Namespace中的元素，可以不使用前缀。</font>例如Spring XML文档中的<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxx"</span> <span class="attr">class</span>=<span class="string">"xxx.xxx.xxx.Xxx"</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"xxx"</span> <span class="attr">value</span>=<span class="string">"xxxx"</span>/&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>xmlns:xsi表示使用xsi作为前缀的Namespace，当然前缀xsi需要在文档中声明。</p>
</blockquote>
<h1 id="xsi-schemaLocation有何作用？"><a href="#xsi-schemaLocation有何作用？" class="headerlink" title="xsi:schemaLocation有何作用？"></a>xsi:schemaLocation有何作用？</h1><ul>
<li><p><code>xsi:schemaLocation</code>属性其实是Namespace为<a href="http://www.w3.org/2001/XMLSchema-instance里的schemaLocation属性，正是因为我们一开始声明了" target="_blank" rel="external">http://www.w3.org/2001/XMLSchema-instance里的schemaLocation属性，正是因为我们一开始声明了</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</div></pre></td></tr></table></figure>
</li>
<li><p>这里才写作xsi:schemaLocation（当然一般都使用这个前缀）。<font color="#EA623C">它定义了XML Namespace和对应的 XSD（Xml Schema Definition）文档的位置的关系。它的值由一个或多个URI引用对组成，两个URI之间以空白符分隔（空格和换行均可）。第一个URI是定义的 XML Namespace的值，第二个URI给出Schema文档的位置，Schema处理器将从这个位置读取Schema文档，该文档的targetNamespace必须与第一个URI相匹配。</font>例如：</p>
<figure class="highlight d"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">xsi:schemaLocation=<span class="string">"http://www.springframework.org/schema/context </span></div><div class="line">                    http://www.springframework.org/schema/context/spring-context.xsd"</div></pre></td></tr></table></figure>
</li>
<li><p>这里表示Namespace为<code>http://www.springframework.org/schema/context</code>的Schema的位置为<a href="http://www.springframework.org/schema/context/spring-context.xsd。" target="_blank" rel="external">http://www.springframework.org/schema/context/spring-context.xsd</a>这里我们可以打开这个Schema的位置，下面是这个文档的开始部分：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;xsd:schema xmlns="http://www.springframework.org/schema/context" </div><div class="line">            xmlns:xsd="http://www.w3.org/2001/XMLSchema" </div><div class="line">            xmlns:beans="http://www.springframework.org/schema/beans" </div><div class="line">            xmlns:tool="http://www.springframework.org/schema/tool" </div><div class="line">            &lt;!-- 这里的targetNamespace和上方xsi:schemaLocation中的第一个URI匹配 --&gt; </div><div class="line">            targetNamespace="http://www.springframework.org/schema/context" </div><div class="line">            elementFormDefault="qualified" </div><div class="line">            attributeFormDefault="unqualified"&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>有了上面的说明后，再去理解开始的Spring XML文档，一定会有不一样的感觉！ </p>
</blockquote>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://www.cnblogs.com/zhao1949/p/5652167.html" target="_blank" rel="external">关于XML文档的xmlns、xmlns:xsi和xsi:schemaLocation </a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;相信很多人和我一样，在编写Spring或者Maven或者其他需要用到XML文档的程序时，通常都是将这些XM
    
    </summary>
    
      <category term="spring" scheme="https://super3h.me/categories/spring/"/>
    
    
  </entry>
  
  <entry>
    <title>Spring使用@Autowired注解自动装配</title>
    <link href="https://super3h.me/2017/02/24/Spring%E4%BD%BF%E7%94%A8@Autowired%E6%B3%A8%E8%A7%A3%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/"/>
    <id>https://super3h.me/2017/02/24/Spring使用@Autowired注解自动装配/</id>
    <published>2017-02-24T11:09:22.924Z</published>
    <updated>2017-02-24T11:23:35.634Z</updated>
    
    <content type="html"><![CDATA[<h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><blockquote>
<p>在大多数情况下，你可能只需要在特定的 bean 自动装配属性。<br>在Spring中，<em>可以使用 @Autowired 注解通过setter方法，构造函数或字段自动装配Bean。</em>此外，它可以在一个特定的bean属性自动装配。<br><code>注意:</code><strong>@Autowired注解是通过匹配数据类型自动装配Bean</strong></p>
</blockquote>
<h1 id="Beans"><a href="#Beans" class="headerlink" title="Beans"></a>Beans</h1><blockquote>
<p>一个 Customer bean 在bean配置文件中声明。稍后，您将使用 “@Autowired” 来自动装配一个Person bean。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">package com.yiibai.common;</div><div class="line"></div><div class="line">public class Customer </div><div class="line">&#123;</div><div class="line">	//you want autowired this field.</div><div class="line">	private Person person;</div><div class="line">	</div><div class="line">	private int type;</div><div class="line">	private String action;</div><div class="line">	</div><div class="line">	//getter and setter method</div><div class="line">	</div><div class="line">&#125;</div><div class="line">&lt;beans xmlns="http://www.springframework.org/schema/beans"</div><div class="line">        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</div><div class="line">        xsi:schemaLocation="http://www.springframework.org/schema/beans</div><div class="line">        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;</div><div class="line"></div><div class="line">	&lt;bean id="CustomerBean" class="com.yiibai.common.Customer"&gt;</div><div class="line">		&lt;property name="action" value="buy" /&gt;</div><div class="line">		&lt;property name="type" value="1" /&gt;</div><div class="line">	&lt;/bean&gt;</div><div class="line"></div><div class="line">	&lt;bean id="PersonBean" class="com.yiibai.common.Person"&gt;</div><div class="line">		&lt;property name="name" value="yiibai" /&gt;</div><div class="line">		&lt;property name="address" value="address 123" /&gt;</div><div class="line">		&lt;property name="age" value="28" /&gt;</div><div class="line">	&lt;/bean&gt;</div><div class="line">	</div><div class="line">&lt;/beans&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="注册AutowiredAnnotationBeanPostProcessor"><a href="#注册AutowiredAnnotationBeanPostProcessor" class="headerlink" title="注册AutowiredAnnotationBeanPostProcessor"></a>注册AutowiredAnnotationBeanPostProcessor</h1><blockquote>
<p>要启用@Autowired，必须注册“AutowiredAnnotationBeanPostProcessor’，你可以用两种方式做到这一点：</p>
</blockquote>
<h2 id="Include"><a href="#Include" class="headerlink" title="Include "></a>Include <context:annotation-config></context:annotation-config></h2><blockquote>
<p>添加 Spring 上下文和<code>&lt;context:annotation-config /&gt;</code>在bean配置文件中<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</div><div class="line">	http://www.springframework.org/schema/context</div><div class="line">	http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">context:annotation-config</span> /&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"CustomerBean"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Customer"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"action"</span> <span class="attr">value</span>=<span class="string">"buy"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"type"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"PersonBean"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Person"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"yiibai"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">value</span>=<span class="string">"address ABC"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"29"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><context:annotation-config> 是用于激活那些已经在spring容器里注册过的bean（<em>无论是通过xml的方式还是通过package sanning的方式</em>）上面的注解。<br><code>注意:</code><context:component-scan>除了具有<context:annotation-config>的功能之外，<context:component-scan>还可以在指定的package下扫描以及注册javabean 。</context:component-scan></context:annotation-config></context:component-scan></context:annotation-config></p>
</blockquote>
<h2 id="包含-AutowiredAnnotationBeanPostProcessor"><a href="#包含-AutowiredAnnotationBeanPostProcessor" class="headerlink" title="包含 AutowiredAnnotationBeanPostProcessor"></a>包含 AutowiredAnnotationBeanPostProcessor</h2><blockquote>
<p>直接在bean配置文件包含“AutowiredAnnotationBeanPostProcessor”。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> </span></div><div class="line"><span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"</span>/&gt;</div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"CustomerBean"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Customer"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"action"</span> <span class="attr">value</span>=<span class="string">"buy"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"type"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"PersonBean"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Person"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"yiibai"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">value</span>=<span class="string">"address ABC"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"29"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="Autowired示例"><a href="#Autowired示例" class="headerlink" title="@Autowired示例"></a>@Autowired示例</h2><blockquote>
<p>现在，你可以通过 @Autowired 自动装配 bean，它可以在 setter 方法，构造函数或字段中使用。</p>
</blockquote>
<h3 id="Autowired-setter-方法"><a href="#Autowired-setter-方法" class="headerlink" title="@Autowired setter 方法"></a>@Autowired setter 方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">private</span> Person person;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> type;</div><div class="line">	<span class="keyword">private</span> String action;</div><div class="line">	<span class="comment">//getter and setter methods</span></div><div class="line">	</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPerson</span><span class="params">(Person person)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.person = person;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Autowired-构造方法"><a href="#Autowired-构造方法" class="headerlink" title="@Autowired 构造方法"></a>@Autowired 构造方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">private</span> Person person;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> type;</div><div class="line">	<span class="keyword">private</span> String action;</div><div class="line">	<span class="comment">//getter and setter methods</span></div><div class="line">	</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Customer</span><span class="params">(Person person)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.person = person;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Autowired-字段"><a href="#Autowired-字段" class="headerlink" title="@Autowired 字段"></a>@Autowired 字段</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	<span class="keyword">private</span> Person person;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> type;</div><div class="line">	<span class="keyword">private</span> String action;</div><div class="line">	<span class="comment">//getter and setter methods</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>上面的例子会自动装配“PersonBean”到Customer的person属性。<br>执行它<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( String[] args )</span></span></div><div class="line">    &#123;</div><div class="line">    	ApplicationContext context = </div><div class="line">    	  <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="keyword">new</span> String[] &#123;<span class="string">"applicationContext.xml"</span>&#125;);</div><div class="line">    	</div><div class="line">    	Customer cust = (Customer)context.getBean(<span class="string">"CustomerBean"</span>);</div><div class="line">    	System.out.println(cust);</div><div class="line">    	</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>输出:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Customer [person=Person [name=YiibaiA], type=1, action=buy]</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="依赖检查"><a href="#依赖检查" class="headerlink" title="依赖检查"></a>依赖检查</h1><blockquote>
<p>默认情况下，@Autowired将执行相关检查，以确保属性已经装配正常。当Spring无法找到匹配的Bean装配，它会抛出异常。要解决这个问题，可以通过 <strong>@Autowired 的“required”属性设置为false来禁用此检查功能。</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Autowired</span>(required=<span class="keyword">false</span>)</div><div class="line">	<span class="keyword">private</span> Person person;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> type;</div><div class="line">	<span class="keyword">private</span> String action;</div><div class="line">	<span class="comment">//getter and setter methods</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在上面的例子中，如果Spring不能找到一个匹配的Bean，person属性将不设定。</p>
</blockquote>
<h1 id="Qualifier"><a href="#Qualifier" class="headerlink" title="@Qualifier"></a>@Qualifier</h1><blockquote>
<p>@Qualifier注解我们用来控制bean应在字段上自动装配。例如，具有两个类似的 person bean 配置文件。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</div><div class="line">	http://www.springframework.org/schema/context</div><div class="line">	http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">context:annotation-config</span> /&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"CustomerBean"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Customer"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"action"</span> <span class="attr">value</span>=<span class="string">"buy"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"type"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"PersonBean1"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Person"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"yiibai-1"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">value</span>=<span class="string">"address-1"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"29"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"PersonBean2"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Person"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"yiibai-2"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">value</span>=<span class="string">"address-2"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"28"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>Spring知道哪个 bean 应当装配？<br>为了解决这个问题，可以使用 @Qualifier 自动装配一个特定的 bean，例如，<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	<span class="meta">@Qualifier</span>(<span class="string">"PersonBean1"</span>)</div><div class="line">	<span class="keyword">private</span> Person person;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> type;</div><div class="line">	<span class="keyword">private</span> String action;</div><div class="line">	<span class="comment">//getter and setter methods</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这意味着，“PersonBean1” bean被自动装配到customer的person属性</p>
</blockquote>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://www.yiibai.com/spring/spring-auto-wiring-beans-with-autowired-annotation.html" target="_blank" rel="external">Spring使用@Autowired注解自动装配</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;引言&quot;&gt;&lt;a href=&quot;#引言&quot; class=&quot;headerlink&quot; title=&quot;引言&quot;&gt;&lt;/a&gt;引言&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;在大多数情况下，你可能只需要在特定的 bean 自动装配属性。&lt;br&gt;在Spring中，&lt;em&gt;可以使用 @Aut
    
    </summary>
    
      <category term="spring" scheme="https://super3h.me/categories/spring/"/>
    
    
  </entry>
  
</feed>
