---
title: tomcat的部署
categories: J2EE
---

# 静态部署
- 直接将`web`项目文件件拷贝到`webapps` 目录中
    1.  `Tomcat`的`Webapps`目录是Tomcat默认的应用目录，当服务器启动时，会加载所有这个目录下的应用。** 所以可以将`JSP`程序打包成一个 `war`包放在目录下，服务器会自动解开这个war包，并在这个目录下生成一个同名的文件夹。**
    2. `说明:` 一个`war`包就是有特性格式的jar包，它是将一个web程序的所有内容进行压缩得到。
    3. `方式:`可以使用许多开发工具的`IDE`环境，如`Eclipse`等。也可以用 `cmd` 命令：`jar -cvf mywar.war  myweb `
    4.  `webapps`这个默认的应用目录也是可以改变。打开`Tomcat`的`conf`目录下的`server.xml`文件，找到下面内容：
``` xml
    <Host name="localhost" appBase="webapps"
       unpackWARs="true" autoDeploy="true"
       xmlValidation="false" xmlNamespaceAware="false">
       <!-- 将appBase修改即可-->
```
- 在`server.xml`中指定:
    1. 在`Tomcat`的配置文件中，一个`Web`应用就是一个特定的`Context`，可以通过在`server.xml`中新建`Context`里部署一个`JSP`应用程序。打开`server.xml`文件，在`Host`标签内建一个`Context`，内容如下。
    2. 在`tomcat`中的`conf`目录中，在`server.xml`中的，`<host/>`节点中添加： 
``` xml
<Context path="/hello" docBase="D:\ workspace\hello\WebRoot" debug="0" privileged="true"> 
</Context>
```
或者
``` xml
<Context path="/myapp" reloadable="true" docBase="D:\myapp" workDir="D:\myapp\work"/>
```
或者
``` xml
<Context path="/sms4" docBase="D:\workspace\sms4\WebRoot"/>
```
说明：
`path:`是虚拟路径；
`docBase:` 是应用程序的物理路径；
`workDir:` 是这个应用的工作目录，存放运行时生成的与这个应用相关的文件；
 
`debug:` 则是设定debug level,  0表示提供最少的信息，9表示提供最多的信息
`privileged:`设置为true的时候，才允许Tomcat的Web应用使用容器内的Servlet
`reloadable:` 如果为true，则tomcat会自动检测应用程序的/WEB-INF/lib 和/WEB-INF/classes目录的变化，自动装载新的应用程序，可以在不重起tomcat的情况下改变应用程序，实现热部署
`antiResourceLocking`和`antiJARLocking`  热部署是需要配置的参数，默认false避免更新了某个webapp，**有时候Tomcat并不能把旧的webapp完全删除，通常会留下WEB-INF/lib下的某个jar包，必须关闭Tomcat才能删除，这就导致自动部署失败。**设置为true，Tomcat在运行对应的webapp时，会把相应的源文件和jar文件复制到一个临时目录里。

-  创建一个Context文件
    1. 在`conf`目录中，新建 `Catalina＼localhost`目录(`自带的就不用建了`)，在该目录中新建一个xml文件，名字不可以随意取，要和path后的那个名字一致，按照下边这个path的配置，xml的名字应该就应该是hello（hello.xml），该xml文件的内容为：
``` xml
<Context path="/hello" docBase="E:\workspace\hello\WebRoot" debug="0" privileged="true"></Context>
```
tomcat自带例子如下：
``` xml
<Context docBase="${catalina.home}/server/webapps/host-manager"
         privileged="true" antiResourceLocking="false" antiJARLocking="false">
</Context>
```
- 这个例子是tomcat自带的，编辑的内容实际上和第二种方式是一样的，其中这xml文件名字就是访问路径，这样可以隐藏应用的真实名字。
-  删除一个Web应用同时也要删除webapps下相应的文件夹和server.xml中相应的Context，还要将Tomcat的conf\catalina\localhost目录下相应的xml文件删除，否则Tomcat仍会去配置并加载。。。
    
# 动态部署
- 登陆tomcat管理控制台：[http://localhost:8080/](http://localhost:8080/)，输入用户名和密码后便可管理应用并动态发布。
- 在Context Path(option):中输入/yourwebname ，这代表你的应用的访问地址。
- XML Configration file URL中要指定一个xml文件，比如我们在F:\下建立一个hmcx.xml文件，内容如下： <Context reloadable="false" />其中docBase不用写了，因为在下一个文本框中填入。或者更简单点，这个文本框什么都不填，在WAR or Directory URL:中键入F:\hmcx即可，然后点击Deploy按钮，上面就可以看到了web应用程序，名字就Context Path(option):中的名字。
- 如果部署.war文件还有更加简单的方式，下面还有个Select WAR file uploae点击浏览选择.war文件，然后点击Deploy也可以。