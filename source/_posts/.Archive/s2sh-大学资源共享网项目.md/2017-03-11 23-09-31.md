---
title: s2sh-大学资源共享网项目
categories: s2sh
---

# 所遇问题
## 数据库问题
> 突然发现当数据库中没有数据，直接级联添加`学校-学院-课程`，竟然会报如下错:

``` sql
ERROR SqlExceptionHelper Cannot add or update a child row: a foreign key constraint fails (`s2shtest01`.`academy`, CONSTRAINT `FKiuc88a6pjg69r9krnm57slii4` FOREIGN KEY (`aid`) REFERENCES `school` (`sid`))
```
> 刚开始以为是`hibernate`没有添加`cascade`的缘故，集体原因不详，猜测为主从表不一致的问题.

## json解决hibernate中级联对象延迟加载问题
- 简介
> 相信大部分用过Ext的GridPanel显示数据的朋友都遇到过外键数据的问题，首先是转换格式，将数据库里查出来的List集合要转换为JSON格式，如果只是用

``` java
JSONObject json = new JSONObject();    
JSONArray dataArray = JSONArray.fromObject(list);
```

> 原因: