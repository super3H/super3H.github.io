---
title: Spring使用@Autowired注解自动装配
categories: spring
---

# 引言
> 在大多数情况下，你可能只需要在特定的 bean 自动装配属性。
> 在Spring中，*可以使用 @Autowired 注解通过setter方法，构造函数或字段自动装配Bean。*此外，它可以在一个特定的bean属性自动装配。
> `注意:`**@Autowired注解是通过匹配数据类型自动装配Bean**

# Beans
> 一个 Customer bean 在bean配置文件中声明。稍后，您将使用 “@Autowired” 来自动装配一个Person bean。
``` java
package com.yiibai.common;

public class Customer 
{
	//you want autowired this field.
	private Person person;
	
	private int type;
	private String action;
	
	//getter and setter method
	
}
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

	<bean id="CustomerBean" class="com.yiibai.common.Customer">
		<property name="action" value="buy" />
		<property name="type" value="1" />
	</bean>

	<bean id="PersonBean" class="com.yiibai.common.Person">
		<property name="name" value="yiibai" />
		<property name="address" value="address 123" />
		<property name="age" value="28" />
	</bean>
	
</beans>
```

# 注册AutowiredAnnotationBeanPostProcessor
> 要启用@Autowired，必须注册“AutowiredAnnotationBeanPostProcessor'，你可以用两种方式做到这一点：

## Include <context:annotation-config />
> 添加 Spring 上下文和`<context:annotation-config />`在bean配置文件中
``` xml
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
	http://www.springframework.org/schema/context
	http://www.springframework.org/schema/context/spring-context-2.5.xsd">

	<context:annotation-config />

	<bean id="CustomerBean" class="com.yiibai.common.Customer">
		<property name="action" value="buy" />
		<property name="type" value="1" />
	</bean>

	<bean id="PersonBean" class="com.yiibai.common.Person">
		<property name="name" value="yiibai" />
		<property name="address" value="address ABC" />
		<property name="age" value="29" />
	</bean>
	
</beans>
```
> <context:annotation-config> 是用于激活那些已经在spring容器里注册过的bean（*无论是通过xml的方式还是通过package sanning的方式*）上面的注解。
> `注意:`<context:component-scan>除了具有<context:annotation-config>的功能之外，<context:component-scan>还可以在指定的package下扫描以及注册javabean 。
