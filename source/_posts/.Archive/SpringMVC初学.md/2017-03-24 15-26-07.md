---
title: SpringMVC初学
categories: SpringMVC
---

# SpringMVC框架介绍
> Spring的MVC框架主要由DispatcherServlet、处理器映射、处理器(控制器)、视图解析器、视图组成。

# SpringMVC原理图
![](SpringMVC初学/1.jpg)
- `1.Http请求：` 客户端请求提交到DispatcherServlet。 
- `2.寻找处理器：`由DispatcherServlet控制器查询一个或多个HandlerMapping，找到处理请求的Controller。
- `3.调用处理器：`DispatcherServlet将请求提交到Controller。 
- `4、5、调用业务处理和返回结果：`Controller调用业务逻辑处理后，返回ModelAndView。 
- `6、7、处理视图映射并返回模型：` DispatcherServlet查询一个或多个ViewResoler视图解析器，找到ModelAndView指定的视图。 
- `8.Http响应：`视图负责将结果显示到客户端。

# SpringMVC接口解释
- `DispatcherServlet接口：`
        <font color='#48B492'>Spring提供的前端控制器，所有的请求都有经过它来统一分发。在DispatcherServlet将请求分发给Spring Controller之前，需要借助于Spring提供的HandlerMapping定位到具体的Controller。</font>
- `HandlerMapping接口：`
        <font color='#48B492'>能够完成客户请求到Controller映射。</font>
- `Controller接口：`
        <font color='#48B492'>需要为并发用户处理上述请求，因此实现Controller接口时，必须保证线程安全并且可重用。
        Controller将处理用户请求，这和Struts Action扮演的角色是一致的。一旦Controller处理完用户请求，则返回ModelAndView对象给DispatcherServlet前端控制器，ModelAndView中包含了模型（Model）和视图（View）。
        从宏观角度考虑，DispatcherServlet是整个Web应用的控制器；从微观考虑，Controller是单个Http请求处理过程中的控制器，而ModelAndView是Http请求过程中返回的模型（Model）和视图（View）。</font>
- `ViewResolver接口：`
        <font color='#48B492'>Spring提供的视图解析器（ViewResolver）在Web应用中查找View对象，从而将相应结果渲染给客户。</font>

# DispatcherServlet
> DispatcherServlet是整个Spring MVC的核心。它负责接收HTTP请求组织协调Spring MVC的各个组成部分。其主要工作有以下三项：
    1. 截获符合特定格式的URL请求。
    2. 初始化DispatcherServlet上下文对应的WebApplicationContext，并将其与业务层、持久化层的WebApplicationContext建立关联。
    3. 初始化Spring MVC的各个组成组件，并装配到DispatcherServlet中。

# web-xml配置解释
``` xml
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://xmlns.jcp.org/xml/ns/javaee" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd" id="WebApp_ID" version="3.1">
  <display-name>SpringMVC_day01</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  
  <servlet>
  	<servlet-name>HelloWeb</servlet-name>
  	<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  	<init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>WEB-INF/spring/HelloWeb-servlet.xml</param-value>
    </init-param>
  	<load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
  	<servlet-name>HelloWeb</servlet-name>
  	<url-pattern></url-pattern>
  </servlet-mapping>
</web-app>
```
- `init-param:`
    - <font color='#137300'>HelloWeb DispatcherServlet初始化时，框架将尝试从位于应用程序的WebContent/WEB-INF目录中的名为[servlet-name]-servlet.xml的文件加载应用程序上下文。</font>
    - <font color='#137300'>这里我们配置此参数，让其从`WEB-INF/spring/HelloWeb-servlet.xml`下读取配置文件</font>
- `load-on-startup:`
    - <font color='#137300'>当值为0或者大于0时，表示容器在应用启动时就加载这个servlet；</font>
    - <font color='#137300'>当是一个负数时或者没有指定时，则指示容器在该servlet被选择时才加载。</font>
    - <font color='#137300'> 正数的值越小，启动该servlet的优先级越高</font>

# Controller解释
``` java
package com.hhh.springmvc;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
@RequestMapping(value="/hello")
public class HelloController {
	
	@RequestMapping(method=RequestMethod.GET)
	public String printHello(ModelMap modelMap){
		modelMap.put("message", "hello spring mvc");
		return "hello";
	}
}

```
> `@Controller`注释将类定义为Spring MVC控制器。这里`@RequestMapping`的第一个用法表示此控制器上的所有处理方法都与`/hello`路径相关。 下一个注释`@RequestMapping(method = RequestMethod.GET)`用于声明`printHello()`方法作为控制器的默认服务方法来处理HTTP GET请求。可以定义另一个方法来处理同一URL的任何POST请求。
可以以另一种形式在上面的控制器中编写，在`@RequestMapping`中添加其他属性，如下所示：

``` java

```
# 参考链接
[【Spring】Spring MVC原理及配置详解](http://blog.csdn.net/jianyuerensheng/article/details/51258942)
[SpringMVC工作原理](http://blog.csdn.net/liang5630/article/details/43733733)
