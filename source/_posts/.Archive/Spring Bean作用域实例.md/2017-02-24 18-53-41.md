---
title: Spring Bean作用域实例
categories: spring
---

# 简介
- 在Spring中，bean作用域用于确定哪种类型的 bean 实例应该从Spring容器中返回给调用者。bean支持的5种范围域：
    - `单例：` 每个Spring IoC 容器返回一个bean实例
    - `原型：`当每次请求时返回一个新的bean实例
    - `请求：`返回每个HTTP请求的一个Bean实例
    - `会话：`返回每个HTTP会话的一个bean实例
    - `全局会话：`返回全局HTTP会话的一个bean实例
> 在大多数情况下，可能只处理了 Spring 的核心作用域 - 单例和原型，默认作用域是单例。
注：**意味着只有在一个基于web的Spring ApplicationContext情形下有效！**

# 单例VS原型
> 这里有一个例子来说明，bean的作用域单例和原型之间的不同：
``` java
package com.yiibai.customer.services;

public class CustomerService 
{
	String message;
	
	public String getMessage() {
		return message;
	}

	public void setMessage(String message) {
		this.message = message;
	}
}
```
## 单例例子
> 如果 bean 配置文件中没有指定 bean 的范围，默认为单例。
``` xml
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

       <bean id="customerService" 
            class="com.yiibai.customer.services.CustomerService" />
		
</beans>
```
> 执行结果：
``` java
package com.yiibai.common;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.yiibai.customer.services.CustomerService;

public class App 
{
    public static void main( String[] args )
    {
    	ApplicationContext context = 
    	 new ClassPathXmlApplicationContext(new String[] {"Spring-Customer.xml"});

    	CustomerService custA = (CustomerService)context.getBean("customerService");
    	custA.setMessage("Message by custA");
    	System.out.println("Message : " + custA.getMessage());
    	
    	//retrieve it again
    	CustomerService custB = (CustomerService)context.getBean("customerService");
    	System.out.println("Message : " + custB.getMessage());
    }
}
```
> 输出结果
``` json
Message : Message by custA
Message : Message by custA
```
> 