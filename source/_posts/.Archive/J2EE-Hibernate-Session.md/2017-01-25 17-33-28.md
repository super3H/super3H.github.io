---
title: Session的缓存及对象的状态
categories: J2EE-Hibernate
---
# Session的缓存
Java是纯面向对象的语言，因此不可能像C语言那样直接操纵内存，例如声明一段可用的内存空间。在Java里面，缓存通常是指Java对象的属性占用的 内存空间，通常是一些集合类型的属性。**在session接口的实现类SessionImpl中定义了一系列的Java集合，这些Java集合就构成了 Session的缓存。**
       使用缓存的一个很明显的好处就是可以减少数据库访问的频率，提高应用程序的性能，因为从内存中读取数据显然要比从数据库中查询快多了。

# Hibernate中Java对象的状态
在一个Hibernate应用中，Java对象可以处于以下三个状态之一：

- **瞬时状态(Transient)：**也叫临时状态，处于这个状态的对象还被没有纳入Hibernate的缓存管理体系，跟任何session都不关联，在数据库中也没有对应的记录。超过作用域会被JVM垃圾回收器回收，一般是new出来且与session没有关联的对象。
- **持久化状态(Persistent)：**处于这个状态的对象位于Session的缓存中，并且和数据库中的一条数据记录相对应。并且相关联的session没有关闭，事务没有提交，持久对象状态发生改变，在事务提交时会影响到数据库(hibernate能检测到)。
- **脱管状态(Detached)：**也叫游离状态，处于这个状态的对象不再位于Session的缓存中，当前没有session与之关联；托管对象状态发生改变，hibernate不能检测到。它与临时对象的最大区别在于，游离对象在数据库中还可能存在一条与它对应的记录。