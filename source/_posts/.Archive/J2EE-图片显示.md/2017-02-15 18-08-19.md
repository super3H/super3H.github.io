---
title: J2EE-浏览器中显示图片
categories: J2EE-Hibernate
---

# 前端改法
Jsp中改法如下:
``` jsp
<img src="http://localhost:8080$/TestProject/showImageServlet?filename=测试的图片一枚.jpg">预览图片</img>
```

# 后台改法
`Servlet`改法如下:
``` java
public void showImage(HttpServletRequest request, HttpServletResponse response) throws Exception
{
    response.setContentType("text/html; charset=UTF-8");
    response.setContentType("image/jpeg");
    String fname = request.getParameter("filename");
    String newpath = new String(fname.getBytes("ISO-8859-1"), "UTF-8");
    String absolutePath = rootPath + newpath;
    FileInputStream fis = new FileInputStream(absolutePath);
    OutputStream os = response.getOutputStream();
    try
    {
    int count = 0;
    byte[] buffer = new byte[1024 * 1024];
    while ((count = fis.read(buffer)) != -1)
    os.write(buffer, 0, count);
    os.flush();
    }
    catch (IOException e)
    {
    e.printStackTrace();
    }
    finally
    {
    if (os != null)
    os.close();
    if (fis != null)
    fis.close();
    }
}
```