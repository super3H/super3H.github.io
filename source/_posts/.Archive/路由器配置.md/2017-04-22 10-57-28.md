---
title: 路由器配置
categories: 计算机网络
---
# 题目
![](路由器配置/1.png)
有一个企业网络拓扑结构如上图，回答如下问题：
1. 给出子网划分方案，并给出每个子网主机的地址空间；
2. 完成网络地址分配，以表格的形式提供；
3. 完成主机PCD、www、及DNS的配置，以表格的形式提供；
4. 完成路由器Router2的端口地址及静态路由配置并保存。

# 分析
## 划分子网
由图知：**共有四个子网，主机号需提供2位给网络号：所以分别为:00,01,10,11，所以可得以下地址(这里把全1的广播号和全0的网络号都算进去了)**

| 网络       | 地址空间 |
| ------------- |:-------------:|
| net1      | 218.197.15.0~218.197.15.63 |
| net2      | 218.197.15.64~218.197.15.127|
| net3      | 218.197.15.128~218.197.15.191 |
|net4       | 218.197.15.192~218.197.15.255  | 
这里我们在图上配置好我们的图:
![](路由器配置/2.png)
这里net1、net2、net3、net4都需以其实地址开始，即0,64,128,192

## 划分主机地址
我们想看左边那一块,由题目可知，**给主机分配218.197.17.1~218.197.17.254即可(除去网络号和主机号)**，配置如下：
![](路由器配置/3.png)
接下来我们给pc机和服务器配置相应的ip:
- pc机配置如下：
![](路由器配置/4.png)
> 另一个pc机操作也同上

- 服务器配置如下:
![](路由器配置/5.png)
> 另一个服务器操作也同上

**配置完后，主机、服务器之间就可以相互ping通了！！**,操作如下:
![](路由器配置/6.png)
**接下来我们用pc0来ping主机和服务器**
![](路由器配置/7.png)
**接下来我们配置其网关，网关范围也在218.197.17.1~218.197.17.254(除去网络号和主机号)之间**:
- 配置链接左边那块的路由器
![](路由器配置/11.png)
>  **配置默认网关只用在圆柱体的路由器上的`fa0/0`端口配置以上信息即可，切记一定要点击启用，否则图上的绿点就是红点 (博主已经全部启用，所以你们看到的是红色) ps:鼠标悬停在绿色(红色)的小圆点上就可以知道其端口号**

- 配置各个pc、服务器的默认网关、和dns服务器
![](路由器配置/12.png)
>**DNS服务器IP我们一开始配置的为218.197.17.100，网关配置的为218.197.17.100，这里博主只演示了CopyPC0的配置，其他几个同理！！**,接下来我们ping一下网关即可验证：

![](路由器配置/13.png)

**最右边操作也同理:ip地址范围218.197.16.1~218.197.16.254即可(网络号和广播号除外)**,我的Ip地址，网关配置(最后成果是右边pc能访问左边的服务器，所以这里pc的DNS服务器我们也配置成左边的DNS服务器的IP)如下:
![](路由器配置/14.png)
## 配置4个路由的端口

| 网络       | 地址空间 |
| ------------- |:-------------:|
| net1      | 218.197.15.0~218.197.15.63 |
| net2      | 218.197.15.64~218.197.15.127|
| net3      | 218.197.15.128~218.197.15.191 |
|net4       | 218.197.15.192~218.197.15.255  | 
**net1之间的地址空间范围为:218.197.15.1~218.197.15.62(除去广播号和网络号)**,我们在net1之间的两个端口配置上以上的范围即可:
![](路由器配置/15.png)
> 操作如下:

![](路由器配置/16.png)
这里解释一下子网掩码写192的原因:**由于前面我们划分子网给了2位作为网络号，所以最后8位为1100 0000**
其他配置同理:
![](路由器配置/17.png)
操作完成后，我们来用pc机ping一下来确认:
![](路由器配置/18.png)
**可以看到我们ping218.197.15.62，可以通，但是218.197.15.1不行，因为这个路由器并不知道发送方在哪个网络，从而不知道数据发送给谁，因此这里我们需要给其配置静态路由**，配置如下：
![](路由器配置/19.png)
**这里目的网络为218.197.17.0这个网络，子网掩码也为这个网络的掩码，下一跳是指需要经过的下一个路由器端口，通过该路由器才能将数据路由出去**，这里我们ping一下218.197.15.1来确认一下即可:
![](路由器配置/20.png)
> **倘若我们要通过最左边的电脑来访问左右边的电脑咋办？？**
> `分析：`最左边访问最右边，**当然要通过管理最左边的路由器来路由数据**，所以这里我们配置其静态路由：

![](路由器配置/21.png)
> 这里有两条路可以走，博主选的上面这条路，配置完后就可以访问了么？？我们来试一下：

![](路由器配置/22.png)
> 发现都没办法到达目的地，**因为这里我们通过最上方的路由器来路由数据，但它不知道到目的网络在哪，我们再来配置他的静态路由

![](路由器配置/23.png)
> 这个时候我们来ping一下:

![](路由器配置/24.png)
**发现可以到达目的网络，但是请求超时，因为这个路由器并不知道发送方在哪个网络，从而不知道数据发送给谁，因此这里我们需要给其配置静态路由**
![](路由器配置/25.png)
> 在ping一下确认：

![](路由器配置/26.png)
> **ping通了，这个时候你会纳闷，数据经过最上方的路由器路由，但是最上方的路由器没有配置目的网络到218.197.17.0啊！！！其实我们刚开始就已经配了，往上翻一下就知道了！！**

# 总结
> 之前博主也一直不知道，知道期中考试考了这个，我才重视起来，多亏同学不停地教我，花了博主一晚上才弄懂！！
> **俗话说:Talk is cheap,show me the code**


