---
title: Hibernate学习
---

# 简介
> Hibernate是一种对JDBC做了轻量级封装的对象---关系映射工具，所谓轻量级封装，是指Hibernate并没有完全封装JDBC，Java应用即可以通过Hibernate API访问数据库，还可以绕过Hibernate API，直接通过JDBC API来访问数据库。

- `Hibernate`官网下载地址[Hibernate官网](http://www.hibernate.org)。现在最新的是： hibernate-release-5.2.5.Final
 > 解压后的目录结构：
 > `Documentation`: 该文件夹下是开发帮助文档
 > `Lib`: 该文件夹是开发使用的库。以下包为必须的：
 - `required`目录是开发时必须导入的`JAR`文件；
 - `optional\c3p0`目录为开源的`JDBC`连接池(与其相对应的为的`dbcp`,区别：`dbcp`没有自动回收空闲连接的功能||`c3p0`有自动回收空闲连接功能，一般都用c3p0)
 -  `mysql-connector-java`JDBC驱动包
  > `Project`: 该文件夹是项目源码文件
- 持久化JAVA类必须遵循的原则
  > A、为类的持久化字段声明访问方法（`get/set`），`Hibernate`对`JavaBeans`风格的属性实行持久化。
 > B、实现一个默认的构造方法，这样的话`Hibernate`就可以使用`Constructor.newInstance()`方法来实例化对象。
 > C、如果是集合类型的属性，它的类型必须定义为集合的接口，例如：`List`、`Set`
 > D、提供一个标识属性（`Identifier property` )，如果没有该属性，一些功能不起作用，比如：级联更新，`session.saveOrUpdate()`。
 
# 开发步骤
- 编写实体类UserInfor.java
- 实体类中的属性名有二个以上（含两个）的小写字母开头！！！！
``` java
import java.util.Date;
public class UserInfor {
   
    private int userId;
    private String userName;
    private int userAge;
    public UserInfor() {
        // 一定要有一个无参的构造方法，因为Hibernate都是根据他生成对象的
    }
    public UserInfor(int userid)
    {// 最好要有一个含主键的构造方法，因为在Hibernate中便于查询
        this.userId = userid;
    }
    //....下面都是get***（）set***()封装属性
    }
```
- 创建实体类的映射文件***.hbm.xml（与实体类同包，并且名字可以自定义，这里是：userInfor.hbm.xml）
 > 技巧: 可以在上面解压后的`Project`文件夹中搜索`*.hbm.xml`，找到示例文在加以修改即可！！！

``` xml
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.entity">

    <class name="UserInfor" table="Wuser" >
        <id name="userId" >
            <generator class="native"/>
        </id>
        <property name="userName"/>
        <property name="userAge"/>
        <property name="userBirthday"/>
    </class>
</hibernate-mapping>
```
> 具体hibernate详情请看[详解](http://chen25362936.blog.163.com/blog/static/2565547420101113112752675/)

- 根元素：`<hibernate-mapping>`
- [x] 每一个`hbm.xml`文件都有唯一的一个根元素，包含一些可选的属性 `package`：指定一个包前缀，即该`xml`文件的位置
- `<class>`定义类
- [x] 根元素的子元素，用以定义一个持久化类与数据表的映射关系,如下是该元素包含的一些可选的属性-->`name`：持久化类(或者接口)的`Java`全限定名,如果这个属性不存在,则Hibernate将假定这是一个非`POJO`的实体映射；`table`：对应数据库表名
- `<id>`定义主键
- [x] `Hibernate`使用`OID`(对象标识符)来标识对象的唯一性，`OID`是关系数据库中主键在`Java`对象模型中的等价物,在运行时,`Hibernate`根据`OID`来维持`Java`对象和数据库表中记录的对应关系
1. name：持久化类的标识属性的名字
2. column：数据库表的主键这段的名字