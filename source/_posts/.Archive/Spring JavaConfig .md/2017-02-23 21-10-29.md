---
title: Spring JavaConfig
categories: spring
---
# 注解替代
> 从Spring 3起，JavaConfig功能已经包含在Spring核心模块，它允许开发者将bean定义和在Spring配置XML文件到Java类中。
> 但是，*仍然允许使用经典的XML方式来定义bean和配置，JavaConfig是另一种替代解决方案。*
看来看经典的XML定义和JavaConfig的不同，如下定义在Spring容器中的bean
``` xml
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
 
	<bean id="helloBean" class="com.yiibai.hello.impl.HelloWorldImpl">
		
</beans>
```
> 等效于以下JavaConfig的配置：
``` java
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import com.yiibai.hello.HelloWorld;
import com.yiibai.hello.impl.HelloWorldImpl;

@Configuration
public class AppConfig {
	
    @Bean(name="helloBean")
    public HelloWorld helloWorld() {
        return new HelloWorldImpl();
    }
	
}
```

# 举例
## 单个加载
> 一个简单的Bean
``` java
package com.hhh.helloWorld;

public interface HelloWorld {
	
	void sayHello();
}

```
``` java
package com.hhh.helloWorld.impl;

import com.hhh.helloWorld.HelloWorld;

public class HelloWorldImpl implements HelloWorld {

	public void sayHello() {
		System.out.println("hello world");
	}

}

```
> 使用 `@Configuration` 注释告诉 Spring，这是核心的 Spring 配置文件，并通过 `@Bean` 定义 bean
``` java
package com.hhh.appconfig;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import com.hhh.helloWorld.HelloWorld;
import com.hhh.helloWorld.impl.HelloWorldImpl;

@Configuration
public class AppConfig {
	
	@Bean(name="helloWorld")
	public HelloWorld helloWorld(){
		return new HelloWorldImpl();
	}
}

```
> 使用` AnnotationConfigApplicationContext` 加载您的JavaConfig类
``` java
package com.hhh.test;

import org.junit.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

import com.hhh.appconfig.AppConfig;
import com.hhh.appconfig.AppConfig2;
import com.hhh.core.CustomerBo;
import com.hhh.core.SchedulerBo;
import com.hhh.helloWorld.HelloWorld;

public class TestAnnotation {
	
	@Test
	public void testHello(){
    	//spring通过注解拿到HelloWorld对象
		ApplicationContext context = new AnnotationConfigApplicationContext(AppConfig.class);
		HelloWorld hello = (HelloWorld) context.getBean("helloWorld");
		hello.sayHello();
		//通过new而得到的对象
		AppConfig config = new AppConfig();
		HelloWorld world = config.helloWorld();
		world.sayHello();
	}
}
```
##  通过`import`加载多个
> 两个简单的Spring bean。
``` java
//File : CustomerBo.java
package com.hhh.core;

public class CustomerBo {
	public void printMsg(String msg) {

		System.out.println("CustomerBo : " + msg);
	}
}
/***************************************************/
//File : SchedulerBo.java
package com.hhh.core;

public class SchedulerBo {
	
	public void printMsg(String msg) {

		System.out.println("SchedulerBo : " + msg);
	}
}


```
> 现在，使用JavaConfig @Configuration声明上述Bean类。
``` java
//File : CustomerConfig.java
package com.hhh.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import com.hhh.core.CustomerBo;

@Configuration
public class CustomerConfig {
	
	@Bean(name="customer")
	public CustomerBo customerBo(){
		return new CustomerBo();
	}
}
/*****************************************************/
//File : SchedulerConfig.java
package com.hhh.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import com.hhh.core.SchedulerBo;

@Configuration
public class SchedulerConfig {
	
	@Bean(name="scheduler")
	public SchedulerBo schedulerBo(){
		return new SchedulerBo();
	}
}

```
> 加载主配置文件，并进行测试
``` java

```