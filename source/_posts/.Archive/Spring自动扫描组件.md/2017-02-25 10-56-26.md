---
title: Spring自动扫描组件
categories: spring
---

# 自动组件扫描
> 启用Spring组件扫描功能。
> 使用@Component注释来表示这是类是一个自动扫描组件。

``` java
package com.yiibai.customer.dao;

import org.springframework.stereotype.Component;

@Component
public class CustomerDAO 
{
	@Override
	public String toString() {
		return "Hello , This is CustomerDAO";
	}	
}
//DAO层，添加@Component，表明这也是一个自动扫描组件。
package com.yiibai.customer.services;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.yiibai.customer.dao.CustomerDAO;

@Component
public class CustomerService 
{
	@Autowired
	CustomerDAO customerDAO;

	@Override
	public String toString() {
		return "CustomerService [customerDAO=" + customerDAO + "]";
	}
} 
```
> 将这个`“context:component”`在bean配置文件，这意味着，在 Spring 中启用自动扫描功能。`base-package` 是指明存储组件，Spring将扫描该文件夹，并找出Bean(注解为@Component)并注册到 Spring 容器。

``` xml
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
	http://www.springframework.org/schema/context
	http://www.springframework.org/schema/context/spring-context-2.5.xsd">

	<context:component-scan base-package="com.yiibai.customer" />

</beans>
```
> 执行:
``` java
package com.yiibai.common;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.yiibai.customer.services.CustomerService;

public class App 
{
    public static void main( String[] args )
    {
    	ApplicationContext context = 
    	   new ClassPathXmlApplicationContext(new String[] {"Spring-AutoScan.xml"});

    	CustomerService cust = (CustomerService)context.getBean("customerService");
    	System.out.println(cust);
    	
    }
}
```
> 输出结果
``` java
CustomerService [customerDAO=Hello , This is CustomerDAO]
```

# 自定义自动扫描组件名称
- 默认情况下，Spring 将小写部件的第一字符 从'CustomerService'到'customerService'。可以检索该组件名称为“customerService”。
``` java
CustomerService cust = (CustomerService)context.getBean("customerService");
```
- 要创建组件的自定义名称，你可以这样自定义名称：
``` java
@Service("AAA")
public class CustomerService 
...
```
> 现在，可以用'AAA'这个名称进行检索。
``` java
CustomerService cust = (CustomerService)context.getBean("AAA");
```

# 自动组件扫描注释类型
* 在Spring2.5中，有4种类型的组件自动扫描注释类型
    * `@Component` – 指示自动扫描组件。
    * `@Repository` – 表示在持久层DAO组件。
    * `@Service` – 表示在业务层服务组件。
    * `@Controller` – 表示在表示层控制器组件。
> 因此，使用哪一个？其实并不那么重要。参见 @Repository，@Service 或 @Controller 源代码。
``` java
@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Component
public @interface Repository {

	String value() default "";

} 
```
> 你可能会发现，*所有的 @Repository, @Service 或 @Controller 被注解为 @Component。*因此<font color='#008AE2'>，我们可以只使用 @Component 对所有组件进行自动扫描？是的，Spring会自动扫描所有组件的 @Component 注解。</font>

