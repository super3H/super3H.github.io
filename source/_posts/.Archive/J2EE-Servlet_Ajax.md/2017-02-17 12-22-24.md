---
title: Servlet与ajax结合
---
# 项目想法
> 由于老是逛微博，发现每到滑轮到底时就会刷新数据，今天刚好有时间，就自己尝试了一下，由于三大框架还不太熟，所以用的是servlet。后期改成ssh。

# 项目过程
> 由于这是一个小项目，就讲下自己所遇到的问题吧。
> `首先:`从前台开始分析，滑轮滚到底会触发一个事件，代码如下:
``` js
$().ready(function(){
	$(window).bind("scroll",function(){
	var $height = $(this).height();//可见高度
	var $contentH = $(document).height();//内容高度
	var $scrollTop = $(this).scrollTop();//滚动的高度
	if(($scrollTop+$height)==$contentH){
		x += 1;
		$.post("${pageContext.request.contextPath}/clientServlet",{
				operation:"listAirticle",
				way:"post",
				page:page+x
			},function(data){
				var dataJson = eval("("+data+")");
				dataJson.weibos.forEach(function(value){
					var $p = "<p>"+value.airticle+"</p>";
					var $img = "<img width='200px' height='100px' src='http://localhost:8080${pageContext.request.contextPath}/clientServlet?showImg="+value.filename+"&operation=showImg&id="+value.id+"' />";
					$("body").append($p);
					$("body").append($img);
				})
			})
		}
	})
})
```