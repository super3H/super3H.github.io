---
title: SpringMVC表单
categories: SpringMVC
---

# SpringMVC表单
## 过程中所遇问题
> 报错如下

``` java
The request sent by the client was syntactically incorrect.
```
前台提交form，tomcat返回 http status 400   The request sent by the client was syntactically incorrect，控制台无任何错误输出。

- `原因:`**这是因为前台form表单中的某些参数 和 后台接受的参数类型不一致导致的。即参数名称相同，但是类型不一致。spring mvc在绑定参数的时候出现异常，所以返回400错误。但是坑爹的地方在于，这个异常会被spring mvc吃掉，不会显示在控制台中。**
- `解决办法:`**检查form表单中的参数和后台的参数对应，看是否有参数名相同但是类型不一致的情况。或者把当前日志设为debug 级别，然后在日志中即可看到spring 抛出的异常信息，即可发现哪个参数出现了错误。**
> 详细内容可参考:[Spring MVC 遇到的问题集锦](https://my.oschina.net/building/blog/137824)

## 关于@ModelAttribute注解
``` java
@RequestMapping(value="/addStudent",method=RequestMethod.POST)
	   public String addStudent(@ModelAttribute Student student,ModelMap model) {
	      model.addAttribute("name", student.getName());
	      model.addAttribute("age", student.getAge());
	      model.addAttribute("id", student.getId());      
	      return "result";
   }
```
在这个例子里，`@ModelAttribute User user`中`@ModelAttribute`将前台表单的值封装到user中
> 更详细的内容:[spring学习之@ModelAttribute运用详解](http://blog.csdn.net/li_xiao_ming/article/details/8349115)

## ModelAndView对象解析
``` java
@RequestMapping(value="/asstudent",method=RequestMethod.GET)
	public ModelAndView showStudent(){
		return new ModelAndView("student","command",new Student());
	}
```
> 解析`ModelAndView`对象，我们从源码入手

``` java
/**
	 * Convenient constructor to take a single model object.
	 * @param viewName name of the View to render, to be resolved
	 * by the DispatcherServlet's ViewResolver
	 * @param modelName name of the single entry in the model
	 * @param modelObject the single model object
	 */
	public ModelAndView(String viewName, String modelName, Object modelObject) {
		this.view = viewName;
		addObject(modelName, modelObject);
	}
```
官方文档说的很清楚，第一个`String`参数为返回的视图名，也就是说:**我们访问 localhost:8080/项目名/asstudent Spring 会根据视图名跳转到`/WEB-INF/jsp/viewName.jsp`**，`modelName`:**所需要封装的参数名**，`modelObject`:**所需封装的对象**

# SpringMVC静态页面
代码如下:
``` java
@RequestMapping(value="/staticPage",method=RequestMethod.GET)
	public String redirect(){
		return "redirect:/pages/final.html";
	}
```
``` java
<mvc:resources location="/WEB-INF/pages/" mapping="/pages/**"/>
<mvc:annotation-driven />
```
## 