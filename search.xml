<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[路由器配置-不等长]]></title>
      <url>https://super3h.me/2017/05/05/%E8%B7%AF%E7%94%B1%E5%99%A8%E9%85%8D%E7%BD%AE-%E4%B8%8D%E7%AD%89%E9%95%BF/</url>
      <content type="html"><![CDATA[<h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><ul>
<li>网络号为：218.197.17.0</li>
<li>子网数： 4</li>
<li>每个子网分配数如下：<ul>
<li>A:70</li>
<li>B:35</li>
<li>C:30</li>
<li>D:20</li>
</ul>
</li>
<li><font color="#CD5555"><strong>问题：写出各个子网的ip范围</strong></font>

</li>
</ul>
<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><font color="#EA6753"><strong>4个子网，按等长划分，需要2位，每个子网主机量为2<sup>6</sup>-2=62&lt;70 ，所以我们使用不等长划分，按主机数量来划分</strong></font>

<h2 id="A子网"><a href="#A子网" class="headerlink" title="A子网"></a>A子网</h2><font color="#CD5555"><strong>70台需要7位(子网掩码:255.255.255.128)，划分如下</strong></font>

<table>
<thead>
<tr>
<th style="text-align:center">子网掩码后8位</th>
<th style="text-align:center">可选网络号</th>
<th style="text-align:center">地址范围</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">00 00 00 00</td>
<td style="text-align:center">218.197.17.0</td>
<td style="text-align:center">218.197.17.1</td>
</tr>
<tr>
<td style="text-align:center">10 00 00 00</td>
<td style="text-align:center">218.197.17.128</td>
<td style="text-align:center">218.197.17.126</td>
</tr>
</tbody>
</table>
<h2 id="B子网"><a href="#B子网" class="headerlink" title="B子网"></a>B子网</h2><font color="#CD5555"><strong>35台需要6位(子网掩码:255.255.255.192)，划分如下</strong></font>

<table>
<thead>
<tr>
<th style="text-align:center">子网掩码后8位</th>
<th style="text-align:center">可选网络号</th>
<th style="text-align:center">地址范围</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">10 00 00 00</td>
<td style="text-align:center">218.197.17.128</td>
<td style="text-align:center">218.197.17.129</td>
</tr>
<tr>
<td style="text-align:center">11 00 00 00</td>
<td style="text-align:center">218.197.17.192</td>
<td style="text-align:center">218.197.17.190</td>
</tr>
</tbody>
</table>
<blockquote>
<font color="#CD5555"><strong>注意:00 00 00 00~10 00 00 00之间的已经被A子网占用了</strong></font>

</blockquote>
<h2 id="C子网"><a href="#C子网" class="headerlink" title="C子网"></a>C子网</h2><font color="#CD5555"><strong>30台需要5位(子网掩码:255.255.255.224)，划分如下</strong></font>

<table>
<thead>
<tr>
<th style="text-align:center">子网掩码后8位</th>
<th style="text-align:center">可选网络号</th>
<th style="text-align:center">地址范围</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">11 00 00 00</td>
<td style="text-align:center">218.197.17.192</td>
<td style="text-align:center">218.197.17.193</td>
</tr>
<tr>
<td style="text-align:center">11 10 00 00</td>
<td style="text-align:center">218.197.17.224</td>
<td style="text-align:center">218.197.17.222</td>
</tr>
</tbody>
</table>
<h2 id="D子网"><a href="#D子网" class="headerlink" title="D子网"></a>D子网</h2><font color="#CD5555"><strong>20台需要5位(子网掩码:255.255.255.224)，划分如下</strong></font>

<table>
<thead>
<tr>
<th style="text-align:center">子网掩码后8位</th>
<th style="text-align:center">可选网络号</th>
<th style="text-align:center">地址范围</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">11 10 00 00</td>
<td style="text-align:center">218.197.17.224</td>
<td style="text-align:center">218.197.17.225</td>
</tr>
<tr>
<td style="text-align:center">11 11 11 10</td>
<td style="text-align:center">218.197.17.254</td>
<td style="text-align:center">218.197.17.252</td>
</tr>
</tbody>
</table>
<h1 id="网络拓扑图"><a href="#网络拓扑图" class="headerlink" title="网络拓扑图"></a>网络拓扑图</h1><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/05/05/路由器配置-不等长/1.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p><font color="#CD5555">路由器配置详细操作方法请参照上文:</font><a href="https://super3h.me/2017/04/21/%E8%B7%AF%E7%94%B1%E5%99%A8%E9%85%8D%E7%BD%AE/">路由器配置-等长</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[路由器配置-等长]]></title>
      <url>https://super3h.me/2017/04/21/%E8%B7%AF%E7%94%B1%E5%99%A8%E9%85%8D%E7%BD%AE-%E7%AD%89%E9%95%BF/</url>
      <content type="html"><![CDATA[<h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/1.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>有一个企业网络拓扑结构如上图，回答如下问题：</p>
<ol>
<li>给出子网划分方案，并给出每个子网主机的地址空间；</li>
<li>完成网络地址分配，以表格的形式提供；</li>
<li>完成主机PCD、www、及DNS的配置，以表格的形式提供；</li>
<li>完成路由器Router2的端口地址及静态路由配置并保存。</li>
</ol>
<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><h2 id="划分子网"><a href="#划分子网" class="headerlink" title="划分子网"></a>划分子网</h2><p>由图知：<strong>共有四个子网，主机号需提供2位给网络号：所以分别为:00,01,10,11，所以可得以下地址(这里把全1的广播号和全0的网络号都算进去了)，ps:配置时候不用管点是红色还是绿色，后面会介绍，做什么事都得一步一步！！！</strong></p>
<table>
<thead>
<tr>
<th>网络</th>
<th style="text-align:center">地址空间</th>
</tr>
</thead>
<tbody>
<tr>
<td>net1</td>
<td style="text-align:center">218.197.15.0~218.197.15.63</td>
</tr>
<tr>
<td>net2</td>
<td style="text-align:center">218.197.15.64~218.197.15.127</td>
</tr>
<tr>
<td>net3</td>
<td style="text-align:center">218.197.15.128~218.197.15.191</td>
</tr>
<tr>
<td>net4</td>
<td style="text-align:center">218.197.15.192~218.197.15.255</td>
</tr>
</tbody>
</table>
<p>这里我们在图上配置好我们的图:<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/2.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>这里net1、net2、net3、net4都需以其实地址开始，即0,64,128,192</p>
<h2 id="划分主机地址"><a href="#划分主机地址" class="headerlink" title="划分主机地址"></a>划分主机地址</h2><p>我们想看左边那一块,由题目可知，<strong>给主机分配218.197.17.1~218.197.17.254即可(除去网络号和主机号)</strong>，配置如下：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/3.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>接下来我们给pc机和服务器配置相应的ip:</p>
<ul>
<li><p>pc机配置如下：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/4.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<blockquote>
<p>另一个pc机操作也同上</p>
</blockquote>
</li>
<li><p>服务器配置如下:</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/5.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<blockquote>
<p>另一个服务器操作也同上</p>
</blockquote>
</li>
</ul>
<p><strong>配置完后，主机、服务器之间就可以相互ping通了！！</strong>,操作如下:<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/6.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br><strong>接下来我们用pc0来ping主机和服务器</strong><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/7.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br><strong>接下来我们配置其网关，网关范围也在218.197.17.1~218.197.17.254(除去网络号和主机号)之间</strong>:</p>
<ul>
<li><p>配置链接左边那块的路由器</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/11.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<blockquote>
<p> <strong>配置默认网关只用在圆柱体的路由器上的<code>fa0/0</code>端口配置以上信息即可，切记一定要点击启用，否则图上的绿点就是红点 (博主已经全部启用，所以你们看到的是绿色) ps:鼠标悬停在绿色(红色)的小圆点上就可以知道其端口号</strong></p>
</blockquote>
</li>
<li><p>配置各个pc、服务器的默认网关、和dns服务器</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/12.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<blockquote>
<p><strong>DNS服务器IP我们一开始配置的为218.197.17.100，网关配置的为218.197.17.250，这里博主只演示了CopyPC0的配置，其他几个同理！！</strong>,接下来我们ping一下网关即可验证：</p>
</blockquote>
</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/13.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p><strong>最右边操作也同理:ip地址范围218.197.16.1~218.197.16.254即可(网络号和广播号除外)</strong>,我的Ip地址，网关配置(最后成果是右边pc能访问左边的服务器，所以这里pc的DNS服务器我们也配置成左边的DNS服务器的IP)如下:<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/14.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<h2 id="配置4个路由的端口"><a href="#配置4个路由的端口" class="headerlink" title="配置4个路由的端口"></a>配置4个路由的端口</h2><table>
<thead>
<tr>
<th>网络</th>
<th style="text-align:center">地址空间</th>
</tr>
</thead>
<tbody>
<tr>
<td>net1</td>
<td style="text-align:center">218.197.15.0~218.197.15.63</td>
</tr>
<tr>
<td>net2</td>
<td style="text-align:center">218.197.15.64~218.197.15.127</td>
</tr>
<tr>
<td>net3</td>
<td style="text-align:center">218.197.15.128~218.197.15.191</td>
</tr>
<tr>
<td>net4</td>
<td style="text-align:center">218.197.15.192~218.197.15.255</td>
</tr>
</tbody>
</table>
<p><strong>net1之间的地址空间范围为:218.197.15.1~218.197.15.62(除去广播号和网络号)</strong>,我们在net1之间的两个端口配置上以上的范围即可:<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/15.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<blockquote>
<p>操作如下:</p>
</blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/16.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>这里解释一下子网掩码写192的原因:<strong>由于前面我们划分子网给了2位作为网络号，所以最后8位为1100 0000</strong><br>其他配置同理:<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/17.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>操作完成后，我们来用pc机ping一下来确认:<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/18.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br><strong>可以看到我们ping218.197.15.62，可以通，但是218.197.15.1不行，因为这个路由器并不知道发送方在哪个网络，从而不知道数据发送给谁，因此这里我们需要给其配置静态路由</strong>，配置如下：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/19.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br><strong>这里目的网络为218.197.17.0这个网络，子网掩码也为这个网络的掩码，下一跳是指需要经过的下一个路由器端口，通过该路由器才能将数据路由出去</strong>，这里我们ping一下218.197.15.1来确认一下即可:<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/20.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<blockquote>
<p><strong>倘若我们要通过最左边的电脑来访问左右边的电脑咋办？？</strong><br><code>分析：</code>最左边访问最右边，<strong>当然要通过管理最左边的路由器来路由数据</strong>，所以这里我们配置其静态路由：</p>
</blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/21.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<blockquote>
<p>这里有两条路可以走，博主选的上面这条路，配置完后就可以访问了么？？我们来试一下：</p>
</blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/22.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<blockquote>
<p>发现都没办法到达目的地，**因为这里我们通过最上方的路由器来路由数据，但它不知道到目的网络在哪，我们再来配置他的静态路由</p>
</blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/23.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<blockquote>
<p>这个时候我们来ping一下:</p>
</blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/24.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p><strong>发现可以到达目的网络，但是请求超时，因为这个路由器并不知道发送方在哪个网络，从而不知道数据发送给谁，因此这里我们需要给其配置静态路由</strong><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/25.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<blockquote>
<p>在ping一下确认：</p>
</blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/04/21/路由器配置-等长/26.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<blockquote>
<p><strong>ping通了，这个时候你会纳闷，数据经过最上方的路由器路由，但是最上方的路由器没有配置目的网络到218.197.17.0啊！！！其实我们刚开始就已经配了，往上翻一下就知道了！！</strong></p>
</blockquote>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><blockquote>
<p>之前博主也一直不知道，直到期中考试考了这个，我才重视起来，多亏同学不停地教我，花了博主一晚上才弄懂！！<br><strong>俗话说:Talk is cheap,show me the code，一定要练习，上面只展示了上半部分的路由，读者有心可以从下面路由数据，当你下面路由成功了，你才算真正的懂！！！</strong></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hexo-优化]]></title>
      <url>https://super3h.me/2017/02/09/hexo-%E4%BC%98%E5%8C%96/</url>
      <content type="html"><![CDATA[<h1 id="Hexo优化"><a href="#Hexo优化" class="headerlink" title="Hexo优化"></a>Hexo优化</h1><h2 id="静态文件压缩"><a href="#静态文件压缩" class="headerlink" title="静态文件压缩"></a>静态文件压缩</h2><p>1、 <code>cd</code>到根目录下<code>npm install xxx --save</code>，xxx为一下工具<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">"gulp"</span>: <span class="string">"^3.9.1"</span>,</div><div class="line"><span class="string">"gulp-minify-css"</span>: <span class="string">"^1.2.4"</span>,</div><div class="line"><span class="string">"gulp-uglify"</span>: <span class="string">"^1.5.3"</span>,</div></pre></td></tr></table></figure></p>
<p>2、在根目录下建立<code>gulpfile.js</code> 文件<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"></div><div class="line">    <span class="comment">//Plugins模块获取</span></div><div class="line">    <span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>);</div><div class="line">    <span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</div><div class="line">    <span class="comment">// 压缩 public 目录 css文件</span></div><div class="line">    gulp.task(<span class="string">'minify-css'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.css'</span>)</div><div class="line">            .pipe(minifycss())</div><div class="line">            .pipe(gulp.dest(<span class="string">'./public'</span>));</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">// 压缩 public 目录 html文件</span></div><div class="line">    gulp.task(<span class="string">'minify-html'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.html'</span>)</div><div class="line">        .pipe(htmlclean())</div><div class="line">        .pipe(htmlmin(&#123;</div><div class="line">             <span class="attr">removeComments</span>: <span class="literal">true</span>,</div><div class="line">             <span class="attr">minifyJS</span>: <span class="literal">true</span>,</div><div class="line">             <span class="attr">minifyCSS</span>: <span class="literal">true</span>,</div><div class="line">             <span class="attr">minifyURLs</span>: <span class="literal">true</span>,</div><div class="line">        &#125;))</div><div class="line">        .pipe(gulp.dest(<span class="string">'./public'</span>))</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">// 压缩 public/js 目录 js文件</span></div><div class="line">    gulp.task(<span class="string">'minify-js'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.js'</span>)</div><div class="line">            .pipe(uglify())</div><div class="line">            .pipe(gulp.dest(<span class="string">'./public'</span>));</div><div class="line">    &#125;);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// 执行 gulp 命令时执行的任务</span></div><div class="line">    gulp.task(<span class="string">'default'</span>, [</div><div class="line">        <span class="string">'minify-css'</span>,<span class="string">'minify-js'</span></div><div class="line">    ]);</div></pre></td></tr></table></figure></p>
<blockquote>
<p>由于压缩<code>html</code>和<code>img</code>报错 ，所以只压缩了<code>js</code>和<code>css</code></p>
<h2 id="其他优化"><a href="#其他优化" class="headerlink" title="其他优化"></a>其他优化</h2><p>请参考：<a href="https://yq.aliyun.com/articles/8608" target="_blank" rel="external">Hexo折腾记——性能优化篇</a><br><a href="http://www.jianshu.com/p/3884e5cb63e5" target="_blank" rel="external">hexo定制&amp;优化</a></p>
</blockquote>
<h2 id="网易云添加"><a href="#网易云添加" class="headerlink" title="网易云添加"></a>网易云添加</h2><p>第一步：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/02/09/hexo-优化/1.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>第二步：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/02/09/hexo-优化/2.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>第三步：<br> <figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/02/09/hexo-优化/3.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>第四步：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/02/09/hexo-优化/4.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<blockquote>
<p>笔者放在<code>themes\jacman\layout\_partial\sidebar.ejs</code>具体代码如下:</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;div id=<span class="string">"asidepart"</span>&gt;</div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"closeaside"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"closebutton"</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">title</span>=<span class="string">"&lt;%= __('hidesidebar') %&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">&lt;iframe frameborder=<span class="string">"no"</span> border=<span class="string">"0"</span> marginwidth=<span class="string">"0"</span> marginheight=<span class="string">"0"</span> width=<span class="number">300</span> height=<span class="number">450</span> src=<span class="string">"//music.163.com/outchain/player?type=0&amp;id=485228675&amp;auto=1&amp;height=430"</span> style=<span class="string">"margin-top:40px;margin-left:-10px;"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span></div><div class="line">&lt;aside <span class="class"><span class="keyword">class</span></span>=<span class="string">"clearfix"</span>&gt;</div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span> <span class="attr">theme.widgets.forEach</span>(<span class="attr">function</span>(<span class="attr">widget</span>)&#123; %&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>('<span class="attr">..</span>/<span class="attr">_widget</span>/' + <span class="attr">widget</span>) %&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">%</span> &#125;); %&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">aside</span>&gt;</span></div><div class="line">&lt;<span class="regexp">/div&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>样式也做了相应的修改：</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//themes\jacman\source\css\_partial\aside.styl</div><div class="line">//sidebar</div><div class="line">#asidepart</div><div class="line">  background color-section</div><div class="line">  margin 1em 0 0</div><div class="line">  padding 0.5em 2% 1em</div><div class="line">  @media tablet</div><div class="line">    position relative</div><div class="line">    float left</div><div class="line">    width 23%</div><div class="line">    margin 2em 0 0 3%</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//themes\jacman\source\css\_partial\index.styl</div><div class="line">#main</div><div class="line">  margin 1em 0 0</div><div class="line">  line-height line-height+0.3</div><div class="line">  @media tablet</div><div class="line">    margin 2em 0 0</div><div class="line">    width 70%</div><div class="line">    float left</div><div class="line">    transition margin 0.5s ease-out</div></pre></td></tr></table></figure>
<p><code>github名片修改：</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//E:\Hexo\blog\themes\jacman\layout\_widget\github-card.ejs</span></div><div class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"github-card"</span> data-github=<span class="string">"&lt;%= theme.author.github %&gt;"</span> data-width=<span class="string">"280"</span> data-height=<span class="string">"119"</span> data-theme=<span class="string">"medium"</span>&gt;</div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"//cdn.jsdelivr.net/github-cards/latest/widget.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line"></div><div class="line">&lt;<span class="regexp">/div&gt;</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p><code>注意:</code>谷歌和火狐无法播放音乐。<font color="green">原因如下：</font></p>
</blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/02/09/hexo-优化/5.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/02/09/hexo-优化/6.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<h1 id="多说评论修改"><a href="#多说评论修改" class="headerlink" title="多说评论修改"></a>多说评论修改</h1><p>原博主是大神，写的很清楚，完全不用动脑子，全程复制粘贴即可，感谢原博主，请点击此处<a href="http://moxfive.xyz/2015/09/29/duoshuo-style/" target="_blank" rel="external">多说样式折腾记录 — 添加 UA 浏览器标识、旋转头像等</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hexo-github 域名设置]]></title>
      <url>https://super3h.me/2017/02/08/Hexo-%E5%9F%9F%E5%90%8D/</url>
      <content type="html"><![CDATA[<h1 id="购买域名"><a href="#购买域名" class="headerlink" title="购买域名"></a>购买域名</h1><p>笔者是在<a href="https://dnspod.qcloud.com/?from=qcloud" target="_blank" rel="external">腾讯云</a>买的，网上教程都是<a href="https://wanwang.aliyun.com/domain/searchresult/" target="_blank" rel="external">万网</a>买的,两者都差不多，只要输入以下内容即可</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/02/08/Hexo-域名/yuming.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p><code>注意:</code>博主把蓝灯打开后，ip变为国外的了，此时访问<a href="http://super3h.me/">super3h.me</a>，显示<code>不安全</code>，因此会访问不了了</p>
<h1 id="添加CNAME"><a href="#添加CNAME" class="headerlink" title="添加CNAME"></a>添加CNAME</h1><p>然后回到博客项目根目录，在source/下新建一个名为CNAME的文件，里面的内容写入<a href="http://super3h.me/">super3h.me</a>即可。</p>
<p>然后在浏览器输入super3h.me，即可代替之前的github.io的域名，访问到自己的博客页面了</p>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://www.cnblogs.com/jarson-7426/p/5515870.html" target="_blank" rel="external">hexo博客进阶－相册和独立域名 </a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[python开发公众号]]></title>
      <url>https://super3h.me/2017/02/05/WeiXin-Python/</url>
      <content type="html"><![CDATA[<h1 id="原文参考"><a href="#原文参考" class="headerlink" title="原文参考"></a>原文参考</h1><p><a href="http://www.tuicool.com/articles/36nyU3b" target="_blank" rel="external">从零开始 Python 微信公众号开发</a><br><a href="https://my.oschina.net/yangyanxing/blog/159215" target="_blank" rel="external">使用python一步一步搭建微信公众平台</a><br><a href="https://my.oschina.net/yangyanxing/blog/196956?p=2&amp;temp=1486389579131#blog-comments-list" target="_blank" rel="external">添加用户关注后的欢迎信息与听音乐功能</a><br><a href="http://python.jobbole.com/84904/" target="_blank" rel="external">Python快速搭建自动回复微信公众号</a><br><a href="http://jingyan.baidu.com/article/1e5468f97c3472484961b7dd.html?qq-pf-to=pcqq.c2c" target="_blank" rel="external">未认证订阅号自定义菜单与开发者兼得</a></p>
<h1 id="所遇问题"><a href="#所遇问题" class="headerlink" title="所遇问题"></a>所遇问题</h1><h2 id="git-push-sae-master-1时候报如下错误"><a href="#git-push-sae-master-1时候报如下错误" class="headerlink" title="git push sae master:1时候报如下错误:"></a><code>git push sae master:1</code>时候报如下错误:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">G:\Web_python\xyPyTest&gt;git push sae master:1</div><div class="line">fatal: Authentication failed for &apos;https://git.sinacloud.com/super3h/&apos;</div></pre></td></tr></table></figure>
<blockquote>
<p><code>解决方案:</code>用户名密码就是你的github账户邮箱和密码，输入密码不是没反应，是你输入了但是不会显示，你输入完直接enter就ok了，sshkey是另外一种提交方式罢了！</p>
</blockquote>
<h2 id="lxml安装问题"><a href="#lxml安装问题" class="headerlink" title="lxml安装问题"></a><code>lxml</code>安装问题</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">E:\&gt;easy_install lxml</div><div class="line">Searching <span class="keyword">for</span> lxml</div><div class="line">Reading https://pypi.python.org/simple/lxml/</div><div class="line">Best match: lxml 3.7.2</div><div class="line">Downloading https://pypi.python.org/packages/66/45/f11<span class="built_in">fc</span>376f784c6f2e77ffc7a9d02374ff3ceb07ede8c56f918939409577c/lxml-3.7.2.tar.gz<span class="comment">#md5=8dcf8d6c692b7aed9370f7462ff09935</span></div><div class="line">error: (<span class="string">'The read operation timed out'</span>,)</div></pre></td></tr></table></figure>
<p><strong>解决方案:</strong><br>从官方网站下载与系统，Python版本匹配的lxml文件：<a href="http://pypi.python.org/pypi/lxml/2.3/" target="_blank" rel="external">lxml 2.3</a><br>执行 <code>easy_install lxml-2.3-py2.7-win-amd64.egg</code>即可。</p>
<p>详细解决方案请参考<a href="http://www.jb51.net/article/67125.htm" target="_blank" rel="external">Python lxml模块安装教程</a></p>
<h2 id="‘not-found’页面"><a href="#‘not-found’页面" class="headerlink" title="‘not found’页面"></a>‘not found’页面</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/02/05/WeiXin-Python/1.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>这个属于正常页面，因为index.wsgi只会接受<code>http://6.super3h.applinzi.com/weixin</code>的入口才会响应，对应微信配置如下：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/02/05/WeiXin-Python/2.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>具体详情请参考<a href="http://www.cnblogs.com/yym2013/p/5962208.html" target="_blank" rel="external">新浪云SAE搭建python环境</a>和<a href="http://blog.csdn.net/u011659379/article/details/48314317" target="_blank" rel="external">SAE部署Python-让云端自动运行Python代码</a></p>
<h2 id="自动回复无反应问题"><a href="#自动回复无反应问题" class="headerlink" title="自动回复无反应问题"></a>自动回复无反应问题</h2><p>原文参考代码有错<code>index.wsgi</code>中将<code>import lxml</code>改为<code>import lxml.etree as etree</code>，可进入sae日志中心查看代码错误原因，具体过程如下:</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2017/02/05/WeiXin-Python/3.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<h2 id="添加第三方依赖包"><a href="#添加第三方依赖包" class="headerlink" title="添加第三方依赖包"></a>添加第三方依赖包</h2><p>除了使用新浪云上已经预装的模块之外，您还可以通过以下方式给自己的应用添加第三方依赖包。</p>
<p>首先，在应用的根目录下创建一个第三方依赖包目录 <code>vendor</code> 。<br>调用<code>pip</code>命令安装依赖包，使用其<code>-t</code>选项指定第三方包的安装目录。3<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pip install -t vendor PACKAGE ...</div></pre></td></tr></table></figure></p>
<p>将 <code>vendor</code> 目录和应用的代码一起提交，即可在应用代码里使用安装的第三方依赖包了。</p>
<p>如果依赖包安装的目录名不为 <code>vendor</code> ，你需要在 <code>index.wsgi</code> 文件的最开始，添加以下代码，将目录加入到 <code>sys.path</code> 中。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sae</div><div class="line">sae.add_vendor_dir(<span class="string">'路径'</span>)</div><div class="line"><span class="comment"># 注意：以上代码得放在 index.wsgi 的最前面，所有其它代码之前。</span></div></pre></td></tr></table></figure></p>
<p><code>详情参考:</code><a href="https://www.sinacloud.com/doc/sae/python/tools.html#tian-jia-di-san-fang-yi-lai-bao" target="_blank" rel="external">添加第三方依赖包</a></p>
<h2 id="编码问题"><a href="#编码问题" class="headerlink" title="编码问题"></a>编码问题</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(unicode error) <span class="string">'utf8'</span> codec can<span class="string">'t decode byte 0xd6 in position 2: invalid continuation byte  yq26</span></div></pre></td></tr></table></figure>
<blockquote>
<p><code>具体原因：</code>编码不一致，微信为gbk编码，本地为utf-8编码二导致编码不一致<br><code>解决方案：</code>将本地用gbk解码，具体操作如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> self.render.reply_text(fromUser, toUser, int(time.time()), (<span class="string">'图中人物性别为:'</span>+datas[<span class="number">0</span>]+<span class="string">'\n'</span>+<span class="string">'年龄为:'</span>+datas[<span class="number">1</span>]).decode(<span class="string">'gbk'</span>))</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="输入-lt-gt-会被转义问题"><a href="#输入-lt-gt-会被转义问题" class="headerlink" title="输入&lt;&gt;会被转义问题"></a>输入&lt;&gt;会被转义问题</h2><p>由于<code>![CDATA[$content]]</code>而发生转义问题，改成如下模式即可:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$def with (toUser,fromUser,createTime,content)</div><div class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[$toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[$fromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>$createTime<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[text]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Content</span>&gt;</span>$content<span class="tag">&lt;/<span class="name">Content</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="音乐问题"><a href="#音乐问题" class="headerlink" title="音乐问题"></a>音乐问题</h2><p>由于百度云存储要钱的缘故。。。所以我选择了新浪云。</p>
<p><strong>问题：</strong> 苹果手机中不能听</p>
<p><strong>解决方案：</strong> 还没解决。。能力有限。</p>
<p><strong>后续:</strong> 那天闲来无事，进公众号点了首歌，发现不能放了，原来是新浪云把歌的链接给改了。。没办法存在了qq邮箱的中转站，原文点击此<a href="http://jingyan.baidu.com/article/ed2a5d1f3d91dd09f6be17e8.html" target="_blank" rel="external">教你快速添加qq空间背景音乐免费网络歌曲链接</a></p>
<h1 id="新闻列表"><a href="#新闻列表" class="headerlink" title="新闻列表"></a>新闻列表</h1><p><code>templates\reply_url.xml</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">$def with (toUser,fromUser,createTime,content,title,description,picUrl,url)</div><div class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[$toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[$fromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>$createTime<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[news]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Content</span>&gt;</span>&lt;![CDATA[$content]]&gt;<span class="tag">&lt;/<span class="name">Content</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ArticleCount</span>&gt;</span>1<span class="tag">&lt;/<span class="name">ArticleCount</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Articles</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Title</span>&gt;</span>&lt;![CDATA[$title]]&gt;<span class="tag">&lt;/<span class="name">Title</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Description</span>&gt;</span>&lt;![CDATA[$description]]&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">Description</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">PicUrl</span>&gt;</span>&lt;![CDATA[$picUrl]]&gt;<span class="tag">&lt;/<span class="name">PicUrl</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Url</span>&gt;</span>&lt;![CDATA[$url]]&gt;<span class="tag">&lt;/<span class="name">Url</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">Articles</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">FuncFlag</span>&gt;</span>0<span class="tag">&lt;/<span class="name">FuncFlag</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>weixinInterface.py添加这一句:</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">POST</span><span class="params">(self)</span>:</span> </div><div class="line">		<span class="keyword">if</span> msgType == <span class="string">'text'</span>:</div><div class="line">			content = xml.find(<span class="string">"Content"</span>).text</div><div class="line">			<span class="comment">#添加这一句</span></div><div class="line">			<span class="keyword">if</span> isinstance(replayText,list):</div><div class="line">				articleList = [article[<span class="string">'article'</span>]+<span class="string">'\n详情'</span>.decode(<span class="string">'gbk'</span>)+article[<span class="string">'detailurl'</span>] <span class="keyword">for</span> article <span class="keyword">in</span> replayText]<span class="comment"># 一定要写在此文件里，写在tulingAutoReply.py会报缩进问题</span></div><div class="line">				reply = random.choice(articleList)</div><div class="line">				<span class="keyword">return</span> self.render.reply_text(fromUser,toUser,int(time.time()),reply)</div></pre></td></tr></table></figure></p>
<p><code>tulingAutoReply.py</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding:utf-8</span></div><div class="line"><span class="keyword">import</span> json</div><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">import</span> traceback</div><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choice </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TulingAutoReply</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, tuling_key, tuling_url)</span>:</span></div><div class="line">        self.key = tuling_key</div><div class="line">        self.url = tuling_url</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">reply</span><span class="params">(self, reply)</span>:</span></div><div class="line">        body = &#123;<span class="string">'key'</span>: self.key, <span class="string">'info'</span>: reply&#125;</div><div class="line">        r = requests.post(self.url, data=body)</div><div class="line">        <span class="comment">#设置编码</span></div><div class="line">        r.encoding = <span class="string">'utf-8'</span></div><div class="line">        resp = r.text</div><div class="line">        <span class="keyword">if</span> resp <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> len(resp) == <span class="number">0</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">None</span></div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            js = json.loads(resp)</div><div class="line">			<span class="comment"># 回复为文本类</span></div><div class="line">            <span class="keyword">if</span> js[<span class="string">'code'</span>] == <span class="number">100000</span>:</div><div class="line">                <span class="keyword">return</span> js[<span class="string">'text'</span>]</div><div class="line">			<span class="comment"># 回复为链接类</span></div><div class="line">            <span class="keyword">elif</span> js[<span class="string">'code'</span>] == <span class="number">200000</span>:</div><div class="line">                <span class="keyword">return</span> js[<span class="string">'url'</span>]</div><div class="line">			<span class="comment"># 回复为新闻类</span></div><div class="line">            <span class="keyword">elif</span> js[<span class="string">'code'</span>] == <span class="number">302000</span>:</div><div class="line">			    <span class="keyword">return</span> js[<span class="string">'list'</span>]</div><div class="line">			<span class="comment"># 其他</span></div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                <span class="keyword">return</span> <span class="keyword">None</span></div><div class="line">        <span class="keyword">except</span> Exception:</div><div class="line">            traceback.print_exc()</div><div class="line">            <span class="keyword">return</span> <span class="keyword">None</span></div></pre></td></tr></table></figure></p>
<p>博主本来准备做语音识别，结果好像认证后才提供此接口，这里把原文贴出来，供大家参考<a href="https://zhuanlan.zhihu.com/p/21390250" target="_blank" rel="external">听得懂语音消息的聊天机器人</a></p>
<h1 id="微信图文信息直接跳转至外部链接"><a href="#微信图文信息直接跳转至外部链接" class="headerlink" title="微信图文信息直接跳转至外部链接"></a>微信图文信息直接跳转至外部链接</h1><p>点击菜单跳转到网页必须要认证才行，我们可以用关键字回复来实现跳转至外部链接<br><code>在templates下添加reply_url.xml，内容为:</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">$def with (toUser,fromUser,createTime,content,title,description,picUrl,url)</div><div class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[$toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[$fromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>$createTime<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[news]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Content</span>&gt;</span>&lt;![CDATA[$content]]&gt;<span class="tag">&lt;/<span class="name">Content</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ArticleCount</span>&gt;</span>1<span class="tag">&lt;/<span class="name">ArticleCount</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Articles</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Title</span>&gt;</span>&lt;![CDATA[$title]]&gt;<span class="tag">&lt;/<span class="name">Title</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Description</span>&gt;</span>&lt;![CDATA[$description]]&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">Description</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">PicUrl</span>&gt;</span>&lt;![CDATA[$picUrl]]&gt;<span class="tag">&lt;/<span class="name">PicUrl</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Url</span>&gt;</span>&lt;![CDATA[$url]]&gt;<span class="tag">&lt;/<span class="name">Url</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">Articles</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">FuncFlag</span>&gt;</span>0<span class="tag">&lt;/<span class="name">FuncFlag</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>weixinInterface.py添加这一句:</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> msgType == <span class="string">'text'</span>:</div><div class="line">			content = xml.find(<span class="string">"Content"</span>).text</div><div class="line">			<span class="keyword">if</span> content == <span class="string">'博客'</span>.decode(<span class="string">'gbk'</span>):</div><div class="line">				<span class="keyword">return</span> self.render.reply_url(fromUser,toUser,int(time.time()),content,<span class="string">'个人博客'</span>.decode(<span class="string">'gbk'</span>),<span class="string">'HHH的个人博客'</span>.decode(<span class="string">'gbk'</span>),<span class="string">r'https://mmbiz.qlogo.cn/mmbiz_jpg/z67Nqg3yAzRNVazozLUD7icuibRJdnCDaJd1dTfQ9673IDS6ttA5cFQwQCic7IrjPhbTcX1ycQDGibJhlGaFbwzyyg/0?wx_fmt=jpeg'</span>,<span class="string">r'http://super3h.github.io'</span>)</div></pre></td></tr></table></figure></p>
<h1 id="源码链接"><a href="#源码链接" class="headerlink" title="源码链接"></a>源码链接</h1><p>欢迎订阅 <a href="https://github.com/super3H/sae/tree/master" target="_blank" rel="external">ProgrammerBy3H</a> <code>求star star star！！</code></p>
]]></content>
    </entry>
    
  
  
</search>
