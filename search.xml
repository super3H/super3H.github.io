<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[爬虫-爬取学校官网]]></title>
      <url>https://super3h.me/2017/03/19/%E7%88%AC%E8%99%AB-%E7%88%AC%E5%8F%96%E5%AD%A6%E6%A0%A1%E5%AE%98%E7%BD%91/</url>
      <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<p>之前断断续续的学习爬虫，结果忘得差不多了，现在重新开始认真学，公众号也要认真弄了，之前做了就一直没管  哈哈  就图个装逼！！</p>
</blockquote>
<h1 id="结构分析"><a href="#结构分析" class="headerlink" title="结构分析"></a>结构分析</h1><p><img src="/2017/03/19/爬虫-爬取学校官网/1.png" alt=""></p>
<blockquote>
<p>正常的登录界面，可以写出以下代码:</p>
</blockquote>
<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 传入对应用户名(studentnumber),密码(password),学校官网(schoolURL)</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,studentnumber,password,schoolURL)</span>:</span></div><div class="line">        self.studentnumber = studentnumber</div><div class="line">        self.password = password</div><div class="line">        self.schoolURL = schoolURL</div><div class="line">        resp = requests.get(schoolURL)</div><div class="line">        self.sl = etree.HTML(resp.content)</div></pre></td></tr></table></figure>
<blockquote>
<p>接下来就是验证码了，由于并没有找到好的库来识别验证码，就采用人工输入好了，就像超级课程表那样</p>
</blockquote>
<h2 id="验证码"><a href="#验证码" class="headerlink" title="验证码"></a>验证码</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#拿到图片</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getCheckCode</span><span class="params">(self)</span>:</span></div><div class="line">        imgURL = self.schoolURL+<span class="string">'/CheckCode.aspx'</span></div><div class="line">        imgResp = requests.get(imgURL, stream=<span class="keyword">True</span>)</div><div class="line">        image = imgResp.content</div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            <span class="keyword">with</span> open(<span class="string">'code.jpg'</span>,<span class="string">'wb'</span>) <span class="keyword">as</span> f:</div><div class="line">                f.write(image)</div><div class="line">        <span class="keyword">except</span> IOError,e:</div><div class="line">            print(<span class="string">"IO Error:%s"</span> % e)</div><div class="line">        <span class="keyword">finally</span>:</div><div class="line">            f.close()</div></pre></td></tr></table></figure>
<blockquote>
<p>拿到图片，并下载到本地</p>
</blockquote>
<h2 id="数据准备"><a href="#数据准备" class="headerlink" title="数据准备"></a>数据准备</h2><p><img src="/2017/03/19/爬虫-爬取学校官网/2.png" alt=""></p>
<blockquote>
<p>由图可知所需发送的数据:</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">getData</span><span class="params">(self,checkCode)</span>:</span></div><div class="line">        VIEWSTATE = self.sl.xpath(<span class="string">'//input[@name="__VIEWSTATE"]/@value'</span>)[<span class="number">0</span>]</div><div class="line">        VIEWSTATEGENERATOR = self.sl.xpath(<span class="string">'//input[@name="__VIEWSTATEGENERATOR"]/@value'</span>)[<span class="number">0</span>]</div><div class="line">        data = &#123;</div><div class="line">            <span class="string">'__VIEWSTATE'</span>: VIEWSTATE,</div><div class="line">            <span class="string">'__VIEWSTATEGENERATOR'</span>: VIEWSTATEGENERATOR,</div><div class="line">            <span class="string">'txtUserName'</span>: self.studentnumber,</div><div class="line">            <span class="string">'Textbox1'</span>: <span class="string">''</span>,</div><div class="line">            <span class="string">'Textbox2'</span>: self.password,</div><div class="line">            <span class="string">'txtSecretCode'</span>: checkCode,</div><div class="line">            <span class="string">'RadioButtonList1'</span>:<span class="string">u'学生'</span>.encode(<span class="string">'gb2312'</span>),</div><div class="line">            <span class="string">'Button1'</span>:<span class="string">''</span>,</div><div class="line">            <span class="string">'lbLanguage'</span>:<span class="string">''</span>,</div><div class="line">            <span class="string">'hidPdrs'</span>:<span class="string">''</span>,</div><div class="line">            <span class="string">'hidsc'</span>:<span class="string">''</span></div><div class="line">            &#125;</div><div class="line">        <span class="keyword">return</span> data</div></pre></td></tr></table></figure>
<h2 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h2><blockquote>
<p>登录并拿到登陆者的姓名</p>
</blockquote>
<p><img src="/2017/03/19/爬虫-爬取学校官网/3.png" alt=""><br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(self,checkCode)</span>:</span>    </div><div class="line">        headers = &#123;</div><div class="line">            <span class="string">"User-Agent"</span>:<span class="string">"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.110 Safari/537.36"</span>,</div><div class="line">        &#125;</div><div class="line">        data = self.getData(checkCode)</div><div class="line">        <span class="comment">#登陆教务系统</span></div><div class="line">        response = requests.post(self.schoolURL,data=data,headers=headers)</div><div class="line">        successSl = etree.HTML((response.content).decode(<span class="string">'gb2312'</span>))</div><div class="line"><span class="comment">#         print response.encoding</span></div><div class="line"><span class="comment">#       去除登陆者姓名同学两字(xxx同学)</span></div><div class="line">        self.name = successSl.xpath(<span class="string">'//span[@id="xhxm"]/text()'</span>)[<span class="number">0</span>][:<span class="number">-2</span>]</div></pre></td></tr></table></figure></p>
<blockquote>
<p>登录，并拿到登录者姓名</p>
</blockquote>
<h2 id="进入课表页面"><a href="#进入课表页面" class="headerlink" title="进入课表页面"></a>进入课表页面</h2><p><img src="/2017/03/19/爬虫-爬取学校官网/4.png" alt=""></p>
<blockquote>
<p>可知queryString为tjkbcx.aspx?xh=2014115010127&amp;xm=黄辉辉&amp;gnmkdm=N121601，代码如下:</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">getCourse</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment">#tjkbcx.aspx?xh=2014115010127&amp;xm=黄辉辉&amp;gnmkdm=N121601</span></div><div class="line">        courseString = &#123;</div><div class="line">            <span class="string">'xh'</span>:self.studentnumber,</div><div class="line">            <span class="string">'xm'</span>:self.name,</div><div class="line">            <span class="string">'gnmkdm'</span>:<span class="string">'N121601'</span></div><div class="line">        &#125;</div><div class="line">        baseURL = <span class="string">"tjkbcx.aspx?%s"</span> % urllib.urlencode(courseString)</div><div class="line">        courseURL = self.schoolURL+baseURL</div><div class="line"><span class="comment">#         print courseURL</span></div><div class="line">        <span class="comment">#必须要有Referer这个参数，否者跳到登录页面</span></div><div class="line">        headers = &#123;</div><div class="line">        <span class="string">"Referer"</span>:<span class="string">"http://www.jwgl.hbnu.edu.cn/(qsyyr145roe1hwvyfoylp445)/default2.aspx"</span>,</div><div class="line">        <span class="string">"User-Agent"</span>:<span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36"</span>,</div><div class="line">         &#125;</div><div class="line">        contents =  resp.content.decode(<span class="string">'gb2312'</span>)</div><div class="line">        sl = etree.HTML(contents)</div><div class="line">        <span class="keyword">for</span> course <span class="keyword">in</span> sl.xpath(<span class="string">'//td/text()'</span>):</div><div class="line">            <span class="keyword">print</span> course</div></pre></td></tr></table></figure>
<blockquote>
<p>由于表格样式不好调试，可以通过截屏拿到课表</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">driver = webdriver.PhantomJS()</div><div class="line">driver.get(courseURL)</div><div class="line">driver.save_screenshot(<span class="string">"course.jpg"</span>)</div></pre></td></tr></table></figure>
<blockquote>
<p>由于缺少请求头，上网查后发现:</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">dcap = dict(DesiredCapabilities.PHANTOMJS)</div><div class="line">dcap[<span class="string">"phantomjs.page.settings.userAgent"</span>] = (</div><div class="line">         <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36"</span></div><div class="line">  )</div><div class="line">driver = webdriver.PhantomJS(desired_capabilities=dcap)</div></pre></td></tr></table></figure>
<blockquote>
<p>由于请求头还缺少<code>referer</code>，导致跳转到登录页面，最后截图成了登录页面。。。。我也是醉了，找了我一下午，还没找到，有网友找到后，请告知，谢啦！！</p>
</blockquote>
<p><img src="/2017/03/19/爬虫-爬取学校官网/course.jpg" alt=""></p>
<h1 id="所遇问题"><a href="#所遇问题" class="headerlink" title="所遇问题"></a>所遇问题</h1><blockquote>
<p>解决中文编码<br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sel.xpath(<span class="string">u"//h2[text()= 'xx']"</span>)</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="http://blog.csdn.net/nghuyong/article/details/51622888" target="_blank" rel="external">python爬虫正方教务系统</a><br><a href="http://www.jianshu.com/p/2631bf34328e" target="_blank" rel="external">爬虫：3. selenium</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[页面点赞]]></title>
      <url>https://super3h.me/2017/03/17/%E9%A1%B5%E9%9D%A2%E7%82%B9%E8%B5%9E/</url>
      <content type="html"><![CDATA[<h1 id="页面点赞"><a href="#页面点赞" class="headerlink" title="页面点赞"></a>页面点赞</h1><h2 id="css样式"><a href="#css样式" class="headerlink" title="css样式"></a>css样式</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.zan</span>,</div><div class="line">			<span class="selector-class">.zan1</span> &#123;</div><div class="line">				<span class="attribute">width</span>: <span class="number">60px</span>;</div><div class="line">				<span class="attribute">height</span>: <span class="number">60px</span>;</div><div class="line">				<span class="attribute">position</span>: relative;</div><div class="line">				<span class="attribute">float</span>: right;</div><div class="line">				<span class="attribute">padding-left</span>: <span class="number">40px</span>;</div><div class="line">				<span class="attribute">margin-top</span>: <span class="number">10px</span>;</div><div class="line">				<span class="comment">/* relative(相对定位) 对象不可层叠、不脱离文档流，参考自身静态位置通过 top,bottom,left,right 定位，并且可以通过z-index进行层次分级 */</span></div><div class="line">			&#125;</div><div class="line">			<span class="comment">/* after 伪元素在元素之前添加内容*/</span></div><div class="line">			</div><div class="line">			<span class="selector-class">.zan</span><span class="selector-pseudo">:before</span>,</div><div class="line">			<span class="selector-class">.zan1</span><span class="selector-pseudo">:before</span> &#123;</div><div class="line">				<span class="attribute">content</span>: <span class="string">" "</span>;</div><div class="line">				<span class="attribute">border-radius</span>: <span class="number">30px</span> <span class="number">30px</span> <span class="number">0</span> <span class="number">0</span>;</div><div class="line">				<span class="comment">/* 正方形的内切圆的半径等于正方形边长的一半 */</span></div><div class="line">				<span class="attribute">width</span>: <span class="number">20px</span>;</div><div class="line">				<span class="attribute">height</span>: <span class="number">30px</span>;</div><div class="line">				<span class="comment">/* 长方形 */</span></div><div class="line">				<span class="attribute">background</span>: gray;</div><div class="line">				<span class="attribute">-moz-transform</span>: <span class="built_in">rotate</span>(-48deg);</div><div class="line">				<span class="comment">/* 逆时针旋转45°*/</span></div><div class="line">				<span class="attribute">-ms-transform</span>: <span class="built_in">rotate</span>(-48deg);</div><div class="line">				<span class="attribute">-o-transform</span>: <span class="built_in">rotate</span>(-48deg);</div><div class="line">				<span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(-48deg);</div><div class="line">				<span class="attribute">position</span>: absolute;</div><div class="line">				<span class="comment">/* absolute(绝对定位) 脱离文档流，通过 top,bottom,left,right 定位 */</span></div><div class="line">				<span class="attribute">left</span>: <span class="number">20px</span>;</div><div class="line">			&#125;</div><div class="line">			<span class="comment">/* after 伪元素在元素之后添加内容*/</span></div><div class="line">			</div><div class="line">			<span class="selector-class">.zan</span><span class="selector-pseudo">:after</span>,</div><div class="line">			<span class="selector-class">.zan1</span><span class="selector-pseudo">:after</span> &#123;</div><div class="line">				<span class="attribute">content</span>: <span class="string">" "</span>;</div><div class="line">				<span class="attribute">width</span>: <span class="number">20px</span>;</div><div class="line">				<span class="attribute">height</span>: <span class="number">30px</span>;</div><div class="line">				<span class="attribute">background</span>: gray;</div><div class="line">				<span class="attribute">border-radius</span>: <span class="number">30px</span> <span class="number">30px</span> <span class="number">0</span> <span class="number">0</span>;</div><div class="line">				<span class="attribute">-moz-transform</span>: <span class="built_in">rotate</span>(48deg);</div><div class="line">				<span class="attribute">-ms-transform</span>: <span class="built_in">rotate</span>(48deg);</div><div class="line">				<span class="attribute">-o-transform</span>: <span class="built_in">rotate</span>(48deg);</div><div class="line">				<span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(48deg);</div><div class="line">				<span class="attribute">position</span>: absolute;</div><div class="line">				<span class="attribute">left</span>: <span class="number">28px</span>;</div><div class="line">				<span class="attribute">top</span>: <span class="number">0px</span>;</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			<span class="selector-class">.zan1</span><span class="selector-pseudo">:before</span>,</div><div class="line">			<span class="selector-class">.zan1</span><span class="selector-pseudo">:after</span> &#123;</div><div class="line">				<span class="attribute">background</span>: <span class="number">#4C9ED9</span>;</div><div class="line">			&#125;</div></pre></td></tr></table></figure>
<h2 id="html代码"><a href="#html代码" class="headerlink" title="html代码"></a>html代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"zan"</span> <span class="attr">style</span>=<span class="string">"cursor: pointer;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">".zan"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </div><div class="line">			$(<span class="keyword">this</span>).toggleClass(<span class="string">"zan1"</span>);</div><div class="line">			alert($(<span class="string">"&gt;input"</span>,<span class="keyword">this</span>).val());</div><div class="line">			<span class="keyword">var</span> classname=$(<span class="keyword">this</span>).attr(<span class="string">"class"</span>);</div><div class="line">			<span class="keyword">var</span> zan_num=<span class="built_in">parseInt</span>($(<span class="string">'&gt;span'</span>,<span class="keyword">this</span>).text());</div><div class="line">			<span class="keyword">if</span>(classname == <span class="string">"zan zan1"</span>)&#123;</div><div class="line">				zan_num +=<span class="number">1</span>;</div><div class="line">				$(<span class="string">'&gt;span'</span>,<span class="keyword">this</span>).text(zan_num);</div><div class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(classname== <span class="string">"zan"</span>)&#123;</div><div class="line">				zan_num -=<span class="number">1</span>;</div><div class="line">				$(<span class="string">'&gt;span'</span>,<span class="keyword">this</span>).text(zan_num);</div><div class="line">			&#125;</div><div class="line">		&#125;)</div></pre></td></tr></table></figure>
<blockquote>
<p>将其简单改一下即可与后台同步</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			$(<span class="string">".zan"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">				$(<span class="keyword">this</span>).toggleClass(<span class="string">"zan1"</span>);</div><div class="line">				<span class="keyword">var</span> classname=$(<span class="keyword">this</span>).attr(<span class="string">"class"</span>);</div><div class="line">				<span class="keyword">var</span> zan_num=<span class="built_in">parseInt</span>($(<span class="string">'&gt;span'</span>,<span class="keyword">this</span>).text());</div><div class="line">				<span class="keyword">var</span> anid = $(<span class="string">"&gt;input"</span>,<span class="keyword">this</span>).val();</div><div class="line">				<span class="keyword">if</span>(classname == <span class="string">"zan zan1"</span>)&#123;</div><div class="line">					zan_num +=<span class="number">1</span>;</div><div class="line">					$(<span class="string">'&gt;span'</span>,<span class="keyword">this</span>).text(zan_num);</div><div class="line">					$.post(<span class="string">"queryAction_agree"</span>,&#123;</div><div class="line">    					<span class="comment">//传入所需的数据</span></div><div class="line">						anid: anid,</div><div class="line">						<span class="attr">agreeNumber</span>: zan_num<span class="comment">//点赞数</span></div><div class="line">					&#125;);</div><div class="line">				&#125;<span class="keyword">else</span> <span class="keyword">if</span>(classname== <span class="string">"zan"</span>)&#123;</div><div class="line">					zan_num -=<span class="number">1</span>;</div><div class="line">					$(<span class="string">'&gt;span'</span>,<span class="keyword">this</span>).text(zan_num);</div><div class="line">					$.post(<span class="string">"queryAction_disagree"</span>,&#123;</div><div class="line">    					<span class="comment">//传入所需的数据</span></div><div class="line">						anid: anid,</div><div class="line">						<span class="attr">agreeNumber</span>: zan_num<span class="comment">//点赞数</span></div><div class="line">					&#125;)</div><div class="line">				&#125;</div><div class="line">			&#125;)</div><div class="line">		&#125;)</div></pre></td></tr></table></figure>
<blockquote>
<p>这里贴一张效果图</p>
</blockquote>
<p><img src="/2017/03/17/页面点赞/1.png" alt=""></p>
<h1 id="原文参考"><a href="#原文参考" class="headerlink" title="原文参考"></a>原文参考</h1><p><a href="http://www.qdfuns.com/notes/14388/6c55f67462c70fc1e5042cf1d5417bf9.html" target="_blank" rel="external">点赞效果实现——点击♥后边的数量+1，再次点击♥后边的数量-1</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[前台学习]]></title>
      <url>https://super3h.me/2017/03/14/%E5%89%8D%E5%8F%B0%E5%AD%A6%E4%B9%A0/</url>
      <content type="html"><![CDATA[<h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><h2 id="position-relative定位"><a href="#position-relative定位" class="headerlink" title="position:relative定位"></a>position:relative定位</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"position:absolute"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>第二个div绝对定位是相对于它的父级元素</p>
</blockquote>
<h2 id="图片截取"><a href="#图片截取" class="headerlink" title="图片截取"></a>图片截取</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*-30px用来调整左右间距，-20px用来调整上下间距*/</span></div><div class="line"><span class="selector-tag">background</span><span class="selector-pseudo">:url(imgUrl)</span> <span class="selector-tag">no-repeat</span> <span class="selector-tag">-30px</span> <span class="selector-tag">-20px</span>;</div></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Js技巧]]></title>
      <url>https://super3h.me/2017/03/14/Js%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<h1 id="导航菜单div的切换"><a href="#导航菜单div的切换" class="headerlink" title="导航菜单div的切换"></a>导航菜单div的切换</h1><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><blockquote>
<p>通过点击事件将div属性由<code>display:none;</code>变为<code>display:block</code></p>
</blockquote>
<h2 id="样式布局如下"><a href="#样式布局如下" class="headerlink" title="样式布局如下:"></a>样式布局如下:</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">el-row</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"4"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">default-active</span>=<span class="string">"1"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#question"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"1"</span> <span class="attr">style</span>=<span class="string">"padding-left:100px ;"</span>&gt;</span></div><div class="line">					提问</div><div class="line">				<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#add"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"2"</span> <span class="attr">style</span>=<span class="string">"padding-left:100px ;"</span>&gt;</span></div><div class="line">					添加</div><div class="line">				<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#answer"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"3"</span> <span class="attr">style</span>=<span class="string">"padding-left:100px ;"</span>&gt;</span></div><div class="line">					答案</div><div class="line">				<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#query"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"4"</span> <span class="attr">style</span>=<span class="string">"padding-left:100px ;"</span>&gt;</span></div><div class="line">					查询</div><div class="line">				<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"20"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkOutDiv"</span> <span class="attr">style</span>=<span class="string">"display: block;"</span> <span class="attr">id</span>=<span class="string">"answer"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">h1</span>&gt;</span>index-1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkOutDiv"</span> <span class="attr">style</span>=<span class="string">"display: none;"</span> <span class="attr">id</span>=<span class="string">"answer"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">h1</span>&gt;</span>index-2<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkOutDiv"</span> <span class="attr">style</span>=<span class="string">"display: none;"</span> <span class="attr">id</span>=<span class="string">"answer"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">h1</span>&gt;</span>index-3<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkOutDiv"</span> <span class="attr">style</span>=<span class="string">"display: none;"</span> <span class="attr">id</span>=<span class="string">"query"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">h1</span>&gt;</span>index-4<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="js代码逻辑"><a href="#js代码逻辑" class="headerlink" title="js代码逻辑"></a>js代码逻辑</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//给每个a标签添加click事件</span></div><div class="line">	$(<span class="string">"a"</span>).bind(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    	<span class="comment">//拿到a标签中 href属性的值</span></div><div class="line">		<span class="keyword">var</span> $clickElement = $(<span class="keyword">this</span>).attr(<span class="string">"href"</span>);</div><div class="line">		<span class="comment">//遍历所有div</span></div><div class="line">		$.each($(<span class="string">".checkOutDiv"</span>), <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    		<span class="comment">//获得div中id属性的值</span></div><div class="line">			<span class="keyword">var</span> $checkOut = $(<span class="keyword">this</span>).attr(<span class="string">"id"</span>);</div><div class="line">			<span class="keyword">if</span>($clickElement.indexOf($checkOut) != <span class="number">-1</span>) &#123;     <span class="comment">//如果a标签的href属性包含div标签的id的值(不包含返回-1)，则显示</span></div><div class="line">				$(<span class="keyword">this</span>).attr(<span class="string">"style"</span>, <span class="string">"display: block;"</span>);</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				$(<span class="keyword">this</span>).attr(<span class="string">"style"</span>, <span class="string">"display: none;"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;)</div><div class="line">	&#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<blockquote>
<p>详细过程如上，举个例子:<font color="#7DD43C">点击<code>&lt;a href=&quot;#question&quot;&gt;</code>时,拿到href的值，即#question，此时查询所有div的id，若id=question时，发现#question包含question，则改变div属性dispalay:block</font></p>
</blockquote>
<h1 id="js实现表单提交和重置"><a href="#js实现表单提交和重置" class="headerlink" title="js实现表单提交和重置"></a>js实现表单提交和重置</h1><blockquote>
<p>代码如下:</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//重置</span></div><div class="line"><span class="built_in">document</span>.getElementById(formName).reset();</div><div class="line"><span class="comment">//提交</span></div><div class="line"><span class="built_in">document</span>.getElementById(formName).submit();</div></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[idea学习]]></title>
      <url>https://super3h.me/2017/03/14/idea%E5%AD%A6%E4%B9%A0/</url>
      <content type="html"><![CDATA[<h1 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h1><blockquote>
<p>直接进入官网下载即可<a href="https://www.jetbrains.com/idea/" target="_blank" rel="external">IntelliJ IDEA</a></p>
</blockquote>
<h2 id="破解方案"><a href="#破解方案" class="headerlink" title="破解方案"></a>破解方案</h2><ol>
<li><a href="http://idea.lanyus.com/" target="_blank" rel="external">IntelliJ IDEA 注册码</a></li>
<li><a href="http://blog.csdn.net/high2011/article/details/55005286" target="_blank" rel="external">IntelliJ IDEA 永久破解的方法</a><blockquote>
<p>方案二中由于github下载超慢，这里把云盘地址贴出来<a href="http://pan.baidu.com/s/1qYGuM1e" target="_blank" rel="external">注册机</a>:<code>密码:5jz1</code></p>
</blockquote>
</li>
</ol>
<h1 id="软件快捷键设置"><a href="#软件快捷键设置" class="headerlink" title="软件快捷键设置"></a>软件快捷键设置</h1><p><a href="https://www.cnblogs.com/tonycody/p/3257601.html" target="_blank" rel="external">Intellij IDEA 快捷键整理（TonyCody）</a><br><a href="http://myoss.github.io/2016/IntelliJ-Idea-%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%98%A0%E5%B0%84/" target="_blank" rel="external">IntelliJ Idea 快捷键映射</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[在网页中使用markdown]]></title>
      <url>https://super3h.me/2017/03/12/%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%AD%E4%BD%BF%E7%94%A8markdown/</url>
      <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<p>博客既然能用markdown编写，能否直接在网上编写呢，答案当然是可以，去github搜索一下即可找到<a href="https://github.com/pandao/editor.md" target="_blank" rel="external">editor.md</a>，国人开发哦！！</p>
</blockquote>
<h1 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h1><h2 id="下载后的目录如图"><a href="#下载后的目录如图" class="headerlink" title="下载后的目录如图"></a>下载后的目录如图</h2><p><img src="/2017/03/12/在网页中使用markdown/1.png" alt=""></p>
<blockquote>
<p>在examples文件夹中有一个简单的示例simple.html，可以在浏览器里打开，并查看源代码;</p>
</blockquote>
<ul>
<li>可得原代码为:<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Simple example - Editor.md examples<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/style.css"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/editormd.css"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"layout"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">header</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">h1</span>&gt;</span>Simple example<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">header</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test-editormd"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">style</span>=<span class="string">"display:none;"</span>&gt;</span>### 这里插入内容<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/editormd.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">			<span class="keyword">var</span> testEditor;</div><div class="line"></div><div class="line">			$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">				testEditor = editormd(<span class="string">"test-editormd"</span>, &#123;</div><div class="line">    				<span class="comment">//调整宽度</span></div><div class="line">					width: <span class="string">"60%"</span>,</div><div class="line">					<span class="comment">//调整高度</span></div><div class="line">					height: <span class="number">400</span>,</div><div class="line">					<span class="attr">syncScrolling</span>: <span class="string">"single"</span>,</div><div class="line">					<span class="attr">path</span>: <span class="string">"./lib/"</span></div><div class="line">				&#125;);</div><div class="line">			&#125;);</div><div class="line">		<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>这里把目录改了下：</p>
</blockquote>
<p><img src="/2017/03/12/在网页中使用markdown/2.png" alt=""></p>
<ul>
<li><code>lib</code>：为根目录下的文件，直接复制即可</li>
<li><code>css</code>：<code>editormd.js</code>在根目录<code>css</code>文件中，<code>style.css</code>在<code>examples/css</code>中</li>
<li><code>js</code>：<code>editormd.min.js</code>在根目录下，<code>jquery.min.js</code>在<code>examples\js</code>中</li>
<li><code>fonts</code>：为根目录下的文件，直接复制即可</li>
</ul>
<h2 id="最后效果图"><a href="#最后效果图" class="headerlink" title="最后效果图"></a>最后效果图</h2><p><img src="/2017/03/12/在网页中使用markdown/3.png" alt=""></p>
<h1 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h1><blockquote>
<font color="#FF3A8F">当文件放在<strong>display:none的div下会导致格式(样式)出错</strong></font>

</blockquote>
<h1 id="如何在页面中显示"><a href="#如何在页面中显示" class="headerlink" title="如何在页面中显示"></a>如何在页面中显示</h1><h2 id="提交html代码"><a href="#提交html代码" class="headerlink" title="提交html代码"></a>提交html代码</h2><blockquote>
<p>html代码如下:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"pDescription"</span> <span class="attr">class</span>=<span class="string">"editormd-html-textarea"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>js代码如下:</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ohtml=$(<span class="string">'.editormd-html-textarea'</span>), opreview=$(<span class="string">'.editormd-preview'</span>).clone(); </div><div class="line"> ohtml.val(opreview.html());</div></pre></td></tr></table></figure>
<blockquote>
<p>最后form表单提交，后台拿到pDescription的值即可</p>
</blockquote>
<h2 id="页面显示"><a href="#页面显示" class="headerlink" title="页面显示"></a>页面显示</h2><blockquote>
<p>引入前文(上面使用方法中有讲到)css样式即可显示！！<br>效果如图</p>
</blockquote>
<p><img src="/2017/03/12/在网页中使用markdown/4.png" alt=""></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[s2sh-大学资源共享网项目]]></title>
      <url>https://super3h.me/2017/03/10/s2sh-%E5%A4%A7%E5%AD%A6%E8%B5%84%E6%BA%90%E5%85%B1%E4%BA%AB%E7%BD%91%E9%A1%B9%E7%9B%AE/</url>
      <content type="html"><![CDATA[<h1 id="所遇问题"><a href="#所遇问题" class="headerlink" title="所遇问题"></a>所遇问题</h1><h2 id="数据库错误"><a href="#数据库错误" class="headerlink" title="数据库错误"></a>数据库错误</h2><blockquote>
<p>报如下错:</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Cannot add or update a child row: <span class="function">a foreign key constraint <span class="title">fails</span> <span class="params">(`s2shtest01`.`problem`, CONSTRAINT `FK5lcmhm21chjl0wog8par6isxn` FOREIGN KEY (`pid`)</span> REFERENCES `course` <span class="params">(`cid`)</span>)</span></div></pre></td></tr></table></figure>
<blockquote>
<p>后来发现。。<code>hibernate</code>配置文件竟然写错了，如此低级的错误</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"School"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"sid"</span>&gt;</span></div><div class="line">        	<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"native"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sName"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"academys"</span>&gt;</span></div><div class="line">        	<span class="tag">&lt;<span class="name">key</span>&gt;</span></div><div class="line">        	<span class="comment">&lt;!--&lt;column name="aid"&gt;&lt;/column&gt;--&gt;</span></div><div class="line">        		<span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"sid"</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></div><div class="line">        	<span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">        	<span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span>=<span class="string">"Academy"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>错误如上,<code>&lt;key&gt;</code>里为academys的外键。。结果把它的外键和自己的主键绑定到一起了。</p>
</blockquote>
<h2 id="json解决hibernate中级联对象延迟加载问题"><a href="#json解决hibernate中级联对象延迟加载问题" class="headerlink" title="json解决hibernate中级联对象延迟加载问题"></a>json解决hibernate中级联对象延迟加载问题</h2><ul>
<li>简介<blockquote>
<p>相信大部分用过Ext的GridPanel显示数据的朋友都遇到过外键数据的问题，首先是转换格式，将数据库里查出来的List集合要转换为JSON格式，如果只是用</p>
</blockquote>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">JSONObject json = <span class="keyword">new</span> JSONObject();    </div><div class="line">JSONArray dataArray = JSONArray.fromObject(list);</div></pre></td></tr></table></figure>
<ul>
<li><p>原因:</p>
<blockquote>
<p>如果list中的数据都是普通数据类型的那能正常转换，但很少这种情况，<font color="#FE3E49">大部分的数据都存在外键的数据，比如有个News类，他可能会有个发布人User的外键，那么用以上的方法转换是不行，将会出现死循环（我去了解到JSON它是这么一种机制，将数据拆分，一致拆分到全都是基本数据类型位置，比如，一个list存放着多个News数据，它是首先将list拆分成多个News，然后将News的多个属性都拆分出来，里面有个User对象，又得再拆分！问题就出现在这了，User里面又有一个News的集合，News里面又有User，因此导致死循环了）；</font></p>
</blockquote>
</li>
<li><p>解决方案</p>
<blockquote>
<p>json解决hibernate中级联对象延迟加载问题<code>net.sf.json.JSONException: org....</code><br>在hibernate中将pojo转化为json数据格式时，抛出：<font color="#48B456"><strong>net.sf.json.JSONException: org.hibernate.LazyInitializationException，</strong></font>通过网上的资料，解决办法如下(未列出所需库文件)：</p>
</blockquote>
</li>
<li><p>第一种:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">JsonConfig jsonConfig = <span class="keyword">new</span> JsonConfig(); </div><div class="line">jsonConfig .setJsonPropertyFilter(<span class="keyword">new</span> PropertyFilter()&#123;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">apply</span><span class="params">(Object source, String name, Object value)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span> (name.equals(<span class="string">"property1"</span>) || name.equals(<span class="string">"property2"</span>))&#123;<span class="comment">// 这里填写需要过滤的属性名</span></div><div class="line">         <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">JSONObject jsonModel= JSONArray.fromObject(yourObject, jsonConfig );</div></pre></td></tr></table></figure>
</li>
<li><p>第二种:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">JsonConfig jsonConfig = <span class="keyword">new</span> JsonConfig();</div><div class="line"></div><div class="line">jsonConfig .setExcludes( <span class="keyword">new</span> String[]&#123; <span class="string">"property1"</span> , <span class="string">"property2"</span> &#125; ) ;</div><div class="line"></div><div class="line">JSONObject jsonModel= JSONArray.fromObject(yourObject, jsonConfig );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>详情请参考<a href="http://blog.csdn.net/evelyn2010816/article/details/6321758" target="_blank" rel="external">json解决hibernate中级联对象延迟加载问题net.sf.json.JSONException: </a></p>
</blockquote>
<h2 id="c-forEach问题"><a href="#c-forEach问题" class="headerlink" title="c:forEach问题"></a>c:forEach问题</h2><blockquote>
<p>报错如下:</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">According to TLD or attribute directive in tag file, attribute value does not accept any exception</div></pre></td></tr></table></figure>
<ul>
<li>方法如下<ul>
<li>一种是将<code>http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd</code>改成<code>http://java.sun.com/xml/ns/javaee/web-app_2_3.xsd</code>；</li>
<li>另一种是将JSP页面中的<font color="red"><strong>&lt;%@ taglib prefix=”c” uri=”<a href="http://java.sun.com/jstl/core&quot;%&gt;改成" target="_blank" rel="external">http://java.sun.com/jstl/core&quot;%&gt;改成</a>&lt;%@ taglib prefix=”c” uri=”<a href="http://java.sun.com/jstl/core_rt&quot;%&gt;。" target="_blank" rel="external">http://java.sun.com/jstl/core_rt&quot;%&gt;。</a></strong></font>在jstl-1.0.2.jar下的META-INF中有一个c.tld还有一个c-rt.tld,后一个好像是jstl核心库备用板的标签描述文件。<blockquote>
<p>参考如下:<a href="http://blog.sina.com.cn/s/blog_6b39e1d10100mwp4.html" target="_blank" rel="external">According to TLD or attribute directive in tag file</a></p>
</blockquote>
</li>
</ul>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ElementUI 学习]]></title>
      <url>https://super3h.me/2017/03/10/ElementUI%20%E5%AD%A6%E4%B9%A0/</url>
      <content type="html"><![CDATA[<h1 id="ElementUI初学"><a href="#ElementUI初学" class="headerlink" title="ElementUI初学"></a>ElementUI初学</h1><h2 id="导航菜单学习"><a href="#导航菜单学习" class="headerlink" title="导航菜单学习"></a>导航菜单学习</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">el-menu</span> =<span class="string">"1"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"1"</span> &gt;</span></div><div class="line">    	提问</div><div class="line">    <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><code>default-active：</code>表示默认激活<code>index=1</code>的子项<br>当悬停时默认颜色为灰色，我们这里可以把它是指为浅蓝.</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.el-menu-item</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">	<span class="attribute">background-color</span>: <span class="number">#EFFFFF</span>;</div><div class="line">	<span class="attribute">color</span>: <span class="number">#20A0FF</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>效果如图</p>
</blockquote>
<p><img src="/2017/03/10/ElementUI 学习/3.png" alt=""></p>
<h2 id="el-row来进行排版"><a href="#el-row来进行排版" class="headerlink" title="el-row来进行排版"></a>el-row来进行排版</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">el-row</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"4"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"20"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><code>el-row</code>下包含<code>el-col</code>元素,其中一个占四份，一个占20分，形成效果如图</p>
</blockquote>
<p><img src="/2017/03/10/ElementUI 学习/2.png" alt=""></p>
<h1 id="学习中所遇问题"><a href="#学习中所遇问题" class="headerlink" title="学习中所遇问题"></a>学习中所遇问题</h1><h2 id="el中嵌套问题"><a href="#el中嵌套问题" class="headerlink" title="el中嵌套问题"></a>el中嵌套问题</h2><blockquote>
<p>el嵌套如果不显示，可以在中间嵌套div元素，如下表示:</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkOutDiv"</span> <span class="attr">style</span>=<span class="string">"display: block;"</span> <span class="attr">id</span>=<span class="string">"add"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">el-card</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-position</span>=<span class="string">"left"</span> <span class="attr">label-width</span>=<span class="string">"80px"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"所在大学"</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">el-input</span> <span class="attr">name</span>=<span class="string">"sName"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="el-form问题"><a href="#el-form问题" class="headerlink" title="el-form问题"></a>el-form问题</h2><blockquote>
<p><code>label-position</code>必须配合<code>label-width</code>一起才能起作用，例如:</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-position</span>=<span class="string">"right"</span> <span class="attr">label-width</span>=<span class="string">"80px"</span> <span class="attr">id</span>=<span class="string">"addForm"</span> <span class="attr">action</span>=<span class="string">"#"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"所在大学"</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">el-input</span> <span class="attr">name</span>=<span class="string">"sName"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"添加课程"</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">el-input</span> <span class="attr">name</span>=<span class="string">"cName"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"onSubmit('addForm')"</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"resetForm('addForm')"</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>效果如下:</p>
</blockquote>
<p><img src="/2017/03/10/ElementUI 学习/1.png" alt=""></p>
<h2 id="el-option问题"><a href="#el-option问题" class="headerlink" title="el-option问题"></a>el-option问题</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">el-select</span> <span class="attr">palaceholder</span>=<span class="string">"请选择"</span> <span class="attr">v-model</span>=<span class="string">"value"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">v-for</span>=<span class="string">"item in options"</span> <span class="attr">:value</span>=<span class="string">"item.value"</span> @<span class="attr">click</span>=<span class="string">"confirm(item.id)"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><code>el-option</code>中添加点击事件无效！！！</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[java初始化顺序]]></title>
      <url>https://super3h.me/2017/03/09/java%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%BA%E5%BA%8F/</url>
      <content type="html"><![CDATA[<h1 id="子类继承父类实例化对象过程"><a href="#子类继承父类实例化对象过程" class="headerlink" title="子类继承父类实例化对象过程"></a>子类继承父类实例化对象过程</h1><blockquote>
<p>代码示例:</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</div><div class="line">    <span class="comment">// 静态变量</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String p_StaticField = <span class="string">"父类--静态变量"</span>;</div><div class="line">    <span class="comment">// 变量(其实这用对象更好能体同这一点，如专门写一个类的实例)</span></div><div class="line">　　</div><div class="line">    <span class="comment">//如果这个变量放在初始化块的后面，是会报错的，因为你根本没有被初始化</span></div><div class="line">    <span class="keyword">public</span> String p_Field = <span class="string">"父类--变量"</span>;</div><div class="line">    <span class="comment">// 静态初始化块</span></div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        System.out.println(p_StaticField);</div><div class="line">        System.out.println(<span class="string">"父类--静态初始化块"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 初始化块</span></div><div class="line">    &#123;</div><div class="line">        System.out.println(p_Field);</div><div class="line">        System.out.println(<span class="string">"父类--初始化块"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 构造器</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Parent</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"父类--构造器"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubClass</span> <span class="keyword">extends</span> <span class="title">Parent</span> </span>&#123;</div><div class="line">    <span class="comment">// 静态变量</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String s_StaticField = <span class="string">"子类--静态变量"</span>;</div><div class="line">    <span class="comment">// 变量</span></div><div class="line">    <span class="keyword">public</span> String s_Field = <span class="string">"子类--变量"</span>;</div><div class="line">    <span class="comment">// 静态初始化块</span></div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        System.out.println(s_StaticField);</div><div class="line">        System.out.println(<span class="string">"子类--静态初始化块"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 初始化块</span></div><div class="line">    &#123;</div><div class="line">        System.out.println(s_Field);</div><div class="line">        System.out.println(<span class="string">"子类--初始化块"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 构造器</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SubClass</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">//super();</span></div><div class="line">        System.out.println(<span class="string">"子类--构造器"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 程序入口</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"*************in main***************"</span>);</div><div class="line">        <span class="keyword">new</span> SubClass();</div><div class="line">        System.out.println(<span class="string">"*************second subClass***************"</span>);</div><div class="line">        <span class="keyword">new</span> SubClass();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>输出结果:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">输出结果</div><div class="line">父类--静态变量</div><div class="line">父类--静态初始化块</div><div class="line">子类--静态变量</div><div class="line">子类--静态初始化块</div><div class="line">*************in main***************</div><div class="line">父类--变量</div><div class="line">父类--初始化块</div><div class="line">父类--构造器</div><div class="line">子类--变量</div><div class="line">子类--初始化块</div><div class="line">子类--构造器</div><div class="line">*************second subClass***************</div><div class="line">父类--变量</div><div class="line">父类--初始化块</div><div class="line">父类--构造器</div><div class="line">子类--变量</div><div class="line">子类--初始化块</div><div class="line">子类--构造器</div></pre></td></tr></table></figure>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><blockquote>
<font color="#E35671">累的加载过程不管多么复杂，<strong>总是按照-静态代码块-&gt;普通代码块-&gt;构造方法，这个顺序执行的</strong>，按照顺序一步步分析，将程序结构捋清楚就能避免不必要的错误。</font>

</blockquote>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://blog.csdn.net/ganjing222/article/details/50993282" target="_blank" rel="external"> JAVA基础-子类继承父类实例化对象过程</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[java错题总结]]></title>
      <url>https://super3h.me/2017/03/07/java%E9%94%99%E9%A2%98%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<h1 id="错题分析"><a href="#错题分析" class="headerlink" title="错题分析"></a>错题分析</h1><h2 id="Integer的考察"><a href="#Integer的考察" class="headerlink" title="Integer的考察"></a>Integer的考察</h2><blockquote>
<p>在jdk1.5的环境下，有如下4条语句：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Integer i01 = <span class="number">59</span>;</div><div class="line"><span class="keyword">int</span> i02 = <span class="number">59</span>;</div><div class="line">Integer i03 =Integer.valueOf(<span class="number">59</span>);</div><div class="line">Integer i04 = <span class="keyword">new</span> Integer(<span class="number">59</span>)</div></pre></td></tr></table></figure>
<ul>
<li>以下输出结果为false的是：<br><img src="/2017/03/07/java错题总结/1.png" alt=""><blockquote>
<p>解析如下:</p>
</blockquote>
</li>
</ul>
<p><img src="/2017/03/07/java错题总结/2.png" alt=""></p>
<h2 id="java类加载"><a href="#java类加载" class="headerlink" title="java类加载"></a>java类加载</h2><blockquote>
<p>以下哪项不属于java类加载过程？</p>
</blockquote>
<p><img src="/2017/03/07/java错题总结/3.png" alt=""></p>
<blockquote>
<p>分析如下:</p>
</blockquote>
<p><img src="/2017/03/07/java错题总结/4.png" alt=""></p>
<h2 id="equals"><a href="#equals" class="headerlink" title="equals"></a>equals</h2><blockquote>
<p>列出<code>equals</code>的源码</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">this</span> == obj);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>Object 中euqals的源码如上。没有重写equals时，是直接用==判断的，而String中重写了equals方法</p>
</blockquote>
<h2 id="wait-方法和-sleep-方法的区别"><a href="#wait-方法和-sleep-方法的区别" class="headerlink" title="wait()方法和 sleep()方法的区别"></a>wait()方法和 sleep()方法的区别</h2><blockquote>
<p>这两个方法来自不同的类分别是，sleep来自Thread类，和wait来自Object类。</p>
</blockquote>
<ul>
<li><font color="#DB7676">sleep是Thread的静态类方法，谁调用的谁去睡觉，即使在a线程里调用了b的sleep方法，实际上还是a去睡觉，要让b线程睡觉要在b的代码中调用sleep。</font></li>
<li><font color="red"><strong>最主要是sleep方法没有释放锁，而wait方法释放了锁，使得敏感词线程可以使用同步控制块或者方法。</strong></font>sleep不出让系统资源；wait是进入线程等待池等待，出让系统资源敏感词线程可以占用CPU。一般wait不会加时间限制，因为如果wait线程的运行资源不够，再出来也没用，要等待敏感词线程调用notify/notifyAll唤醒等待池中的所有线程，才会进入就绪队列等待OS分配系统资源。sleep(milliseconds)可以用时间指定使它自动唤醒过来，如果时间不到只能调用interrupt()强行打断。<font color="#25CB73"><strong><em>Thread.Sleep(0)的作用是“触发操作系统立刻重新进行一次CPU竞争”。</em></strong></font>
</li>
<li><p>使用范围：wait，notify和notifyAll只能在同步控制方法或者同步控制块里面使用，而sleep可以在任何地方使用 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">synchronized</span>(x)&#123; </div><div class="line">   x.notify() </div><div class="line">  <span class="comment">//或者wait() </span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>sleep必须捕获异常，而wait，notify和notifyAll不需要捕获异常</p>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[log4J的使用]]></title>
      <url>https://super3h.me/2017/03/02/log4J%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<h1 id="log4J的安装"><a href="#log4J的安装" class="headerlink" title="log4J的安装"></a>log4J的安装</h1><p>进入官网下载即可<a href="http://logging.apache.org/log4j/1.2/download.html" target="_blank" rel="external">http://logging.apache.org/log4j/1.2/download.html</a></p>
<h1 id="log4J的配置及解释"><a href="#log4J的配置及解释" class="headerlink" title="log4J的配置及解释"></a>log4J的配置及解释</h1><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"># Define the root logger with appender file</div><div class="line">log4j.rootLogger = DEBUG, FILE</div><div class="line"></div><div class="line"># Define the file appender</div><div class="line">log4j.appender.FILE=org.apache.log4j.FileAppender</div><div class="line"># Set the name of the file</div><div class="line">log4j.appender.FILE.File=C:\log.out</div><div class="line"></div><div class="line"># Set the immediate flush to true (default)</div><div class="line">log4j.appender.FILE.ImmediateFlush=true</div><div class="line"></div><div class="line"># Set the threshold to debug mode</div><div class="line">log4j.appender.FILE.Threshold=debug</div><div class="line"></div><div class="line"># Set the append to false, overwrite</div><div class="line">log4j.appender.FILE.Append=false</div><div class="line"></div><div class="line"># Define the layout for file appender</div><div class="line">log4j.appender.FILE.layout=org.apache.log4j.PatternLayout</div><div class="line">log4j.appender.FILE.layout.conversionPattern=%m%n</div></pre></td></tr></table></figure>
<ul>
<li>根日志记录器(logger)的级别定义为DEBUG并连接附加器命名为FILE</li>
<li>附加器(appender)File是定义为org.apache.log4j.FileAppender并写入到一个名为“log.out”位于日志log目录下</li>
<li>定义的布局模式是%m%n，这意味着每打印日志消息之后，将加上一个换行符<blockquote>
<p>注意:<font color="#4ACC60">log4j支持UNIX风格的变量替换，如 ${variableName}.</font></p>
</blockquote>
</li>
</ul>
<h2 id="调试级别"><a href="#调试级别" class="headerlink" title="调试级别"></a>调试级别</h2><p>使用DEBUG两个追加程序。所有可能的选项有：</p>
<ul>
<li>TRACE</li>
<li>DEBUG</li>
<li>INFO</li>
<li>WARN</li>
<li>ERROR</li>
<li>FATAL</li>
<li>ALL</li>
</ul>
<h2 id="Appenders"><a href="#Appenders" class="headerlink" title="Appenders"></a>Appenders</h2><blockquote>
<p>Apache的log4j提供<code>Appender</code>对象<font color="#FFAA25"><strong>主要负责打印日志消息到不同的目的地</strong></font>，如控制台，文件，sockets，NT事件日志等等。<br>每个<code>Appender</code>对象具有与之相关联的不同的属性，并且这些属性表明对象的行为</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">layout</td>
<td>Appender使用布局Layout 对象和与之相关的格式化的日志记录信息转换模式</td>
</tr>
<tr>
<td style="text-align:center">target</td>
<td>目标可以是一个控制台，一个文件，或根据附加器的另一个项目</td>
</tr>
<tr>
<td style="text-align:center">level</td>
<td>级别是必需的，以控制日志消息的过滤</td>
</tr>
<tr>
<td style="text-align:center">threshold</td>
<td>Appender可以有与之独立的记录器级别相关联的级别阈值水平。Appender忽略具有级别低于阈级别的任何日志消息</td>
</tr>
<tr>
<td style="text-align:center">filter</td>
<td>Filter 对象可以分析超出级别的匹配记录信息，并决定是否记录的请求应该由一个特定 Appender 或忽略处理</td>
</tr>
</tbody>
</table>
<h2 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h2><p>我们使用的PatternLayout 使用 appender。所有可能的选项有：</p>
<ul>
<li>DateLayout</li>
<li>HTMLLayout</li>
<li><a href="http://www.yiibai.com/log4j/log4j_patternlayout.html" target="_blank" rel="external">PatternLayout</a></li>
<li><a href="http://www.yiibai.com/log4j/log4j_htmllayout.html" target="_blank" rel="external">SimpleLayout</a></li>
<li>XMLLayout<blockquote>
<p>使用HTMLLayout和XMLLayout，可以在HTML和XML格式和生成日志。</p>
</blockquote>
</li>
</ul>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><code>properties</code>相关配置详情请看<a href="http://www.yiibai.com/log4j/log4j_configuration.html" target="_blank" rel="external">log4j配置</a></li>
<li><code>xml</code>相关配置详情请看<a href="http://www.cnblogs.com/v-weiwang/p/4814050.html" target="_blank" rel="external">springmvc+log4j操作日志记录,详细配置 </a></li>
</ul>
<h1 id="log4J配置文件位置"><a href="#log4J配置文件位置" class="headerlink" title="log4J配置文件位置"></a>log4J配置文件位置</h1><h2 id="默认加载"><a href="#默认加载" class="headerlink" title="默认加载"></a>默认加载</h2><blockquote>
<p>log4j启动时，<font color="#CF59E0">默认会寻找source folder下的log4j.xml配置文件，<strong>若没有，会寻找log4j.properties文件。</strong></font>然后加载配置。配置文件放置位置正确，不用在程序中手动加载log4j配置文件。</p>
</blockquote>
<p><img src="/2017/03/02/log4J的使用/1.png" alt=""></p>
<h2 id="手动加载配置文件"><a href="#手动加载配置文件" class="headerlink" title="手动加载配置文件"></a>手动加载配置文件</h2><blockquote>
<p>可以通过<code>PropertyConfigurator.configure(&quot;url&quot;)</code>来手动加载配置文件，示例如下:</p>
</blockquote>
<p><img src="/2017/03/02/log4J的使用/2.jpg" alt=""></p>
<blockquote>
<p>相应代码如下:<code>PropertyConfigurator.configure(&quot;config/log4j.properties&quot;);</code></p>
</blockquote>
<h2 id="log4J报错"><a href="#log4J报错" class="headerlink" title="log4J报错"></a>log4J报错</h2><blockquote>
<p>如果上述方法报以下错:</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">log4j:ERROR Could not read configuration file [log4j.properties].</div><div class="line">java.io.FileNotFoundException: log4j.properties (系统找不到指定的文件。)</div><div class="line"> at java.io.FileInputStream.open(Native Method)</div><div class="line"> at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:<span class="number">106</span>)</div><div class="line"> at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:<span class="number">66</span>)</div><div class="line"> at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:<span class="number">306</span>)</div><div class="line"> at org.apache.log4j.PropertyConfigurator.configure(PropertyConfigurator.java:<span class="number">324</span>)</div><div class="line"> at snmp.GetSnmpInfo.&lt;clinit&gt;(GetSnmpInfo.java:<span class="number">32</span>)</div><div class="line">log4j:ERROR Ignoring configuration file [log4j.properties].</div></pre></td></tr></table></figure>
<ul>
<li>解决方案:<ul>
<li><code>方案1:</code>将log4j.properties 这个文件从src的根目录 转移到 项目的根目录下面，即可~~~；</li>
<li><code>方案2:</code>添加以下代码<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 获得当前目录路径</span></div><div class="line">        String filePath = <span class="keyword">this</span>.getClass().getResource(<span class="string">"/"</span>).getPath();</div><div class="line">        <span class="comment">// 找到log4j.properties配置文件所在的目录(已经创建好)</span></div><div class="line">        filePath = filePath.substring(<span class="number">1</span>).replace(<span class="string">"bin"</span>, <span class="string">"src"</span>);</div><div class="line">        <span class="comment">// 获得日志类loger的实例</span></div><div class="line">        loger = Logger.getLogger(<span class="keyword">this</span>.getClass());</div><div class="line">        <span class="comment">// loger所需的配置文件路径</span></div><div class="line">        PropertyConfigurator.configure(filePath + <span class="string">"log4j.properties"</span>);</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="参考链接-1"><a href="#参考链接-1" class="headerlink" title="参考链接"></a>参考链接</h2><p>详情请看<a href="http://blog.csdn.net/lifuxiangcaohui/article/details/11042375" target="_blank" rel="external">log4j配置文件位置详解</a><br>详情请看<a href="http://www.cnblogs.com/tv151579/archive/2013/01/20/2868912.html" target="_blank" rel="external">log4j:ERROR Could not read configuration file [log4j.properties]. </a></p>
<h1 id="扩展内容"><a href="#扩展内容" class="headerlink" title="扩展内容"></a>扩展内容</h1><p><a href="http://www.yiibai.com/log4j/log4j_logging_files.html" target="_blank" rel="external">log4j日志记录到文件</a><br><a href="http://www.yiibai.com/log4j/log4j_logging_database.html" target="_blank" rel="external">log4j日志记录到数据库</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[s2sh三大框架的整合]]></title>
      <url>https://super3h.me/2017/03/01/s2sh%E4%B8%89%E5%A4%A7%E6%A1%86%E6%9E%B6%E7%9A%84%E6%95%B4%E5%90%88/</url>
      <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<p>断断续续的学完了三大框架，自己也想尝试整合三大框架，这里记录我碰到的问题，以及学习的过程。</p>
</blockquote>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><h1 id="struts有关错误"><a href="#struts有关错误" class="headerlink" title="struts有关错误"></a>struts有关错误</h1><ul>
<li>使用<code>modelDriven</code>遇到的错误,报错如下：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function">ERROR ParametersInterceptor Developer <span class="title">Notification</span> <span class="params">(set struts.devMode to <span class="keyword">false</span> to disable <span class="keyword">this</span> message)</span>:</span></div><div class="line">Unexpected Exception caught setting 'age' on 'class test.hhh.action.PersonAction: Error setting expression 'age' with value '20'</div><div class="line">ERROR ParametersInterceptor Developer <span class="title">Notification</span> <span class="params">(set struts.devMode to <span class="keyword">false</span> to disable <span class="keyword">this</span> message)</span>:</div><div class="line">Unexpected Exception caught setting 'name' on 'class test.hhh.action.PersonAction: Error setting expression 'name' with value 'hhh'</div></pre></td></tr></table></figure>
<blockquote>
<p>原因如下:</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//action中如下写</span></div><div class="line"><span class="keyword">private</span> Person model;</div><div class="line"><span class="comment">//由于model对象还没new，其内部为空，所以导致获取的model为null，改法如下</span></div><div class="line"><span class="keyword">private</span> Person model = <span class="keyword">new</span> Person();</div></pre></td></tr></table></figure>
<ul>
<li>spring和struts整合报错如下:<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">ERROR Dispatcher Dispatcher initialization failed</div><div class="line"> Unable to load configuration. - [unknown location]</div><div class="line">	at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:<span class="number">70</span>)</div><div class="line">	at org.apache.struts2.dispatcher.Dispatcher.getContainer(Dispatcher.java:<span class="number">906</span>)</div><div class="line">	at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:<span class="number">445</span>)</div><div class="line">	at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:<span class="number">486</span>)</div><div class="line">	at org.apache.struts2.dispatcher.InitOperations.initDispatcher(InitOperations.java:<span class="number">75</span>)</div><div class="line">	at org.apache.struts2.dispatcher.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:<span class="number">63</span>)</div><div class="line">	at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:<span class="number">279</span>)</div><div class="line">	at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:<span class="number">260</span>)</div><div class="line">	at org.apache.catalina.core.ApplicationFilterConfig.&lt;init&gt;(ApplicationFilterConfig.java:<span class="number">105</span>)</div><div class="line">	at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:<span class="number">4572</span>)</div><div class="line">	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:<span class="number">5215</span>)</div><div class="line">	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:<span class="number">150</span>)</div><div class="line">	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:<span class="number">1419</span>)</div><div class="line">	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:<span class="number">1409</span>)</div><div class="line">	at java.util.concurrent.FutureTask.run(Unknown Source)</div><div class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)</div><div class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)</div><div class="line">	at java.lang.Thread.run(Unknown Source)</div><div class="line">Caused by: Cannot locate the chosen ObjectFactory implementation: spring - [unknown location]</div><div class="line">	at org.apache.struts2.config.AbstractBeanSelectionProvider.alias(AbstractBeanSelectionProvider.java:<span class="number">64</span>)</div><div class="line">	at org.apache.struts2.config.AbstractBeanSelectionProvider.alias(AbstractBeanSelectionProvider.java:<span class="number">41</span>)</div><div class="line">	at org.apache.struts2.config.DefaultBeanSelectionProvider.register(DefaultBeanSelectionProvider.java:<span class="number">366</span>)</div><div class="line">	at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:<span class="number">163</span>)</div><div class="line">	at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:<span class="number">67</span>)</div><div class="line">	... <span class="number">17</span> more</div><div class="line">三月 <span class="number">01</span>, <span class="number">2017</span> <span class="number">9</span>:<span class="number">48</span>:<span class="number">48</span> 下午 org.apache.catalina.core.StandardContext filterStart</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>解释:<font color="#ED8F76">struts没有交给spring管理或者你根本没导入<code>struts2-spring-plugin-2.5.5.jar</code>。和以下配置</font><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.objectFactory"</span> <span class="attr">value</span>=<span class="string">"spring"</span>&gt;</span><span class="tag">&lt;/<span class="name">constant</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="hibernate有关错误"><a href="#hibernate有关错误" class="headerlink" title="hibernate有关错误"></a>hibernate有关错误</h1><ul>
<li><p>错误如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Already value [org.springframework.orm.hibernate5.SessionHolder@<span class="number">43826</span>ec] <span class="keyword">for</span> key [org.hibernate.internal.SessionFactoryImpl@<span class="number">304</span>a3655] bound to thread [main]</div></pre></td></tr></table></figure>
</li>
<li><p>解决方案:<font color="#FF0000">由于spring配置问题，类<code>LocalSessionFactoryBean</code>应该来自于<code>org.springframework.orm.hibernate5</code>而不是<code>org.springframework.orm.hibernate4</code></font></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--注意:PersonDaoImpl和LocalSessionFactoryBean都要来自于hibernate5的包下--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.LocalSessionFactoryBean"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:hibernate.cfg.xml<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"personDao"</span> <span class="attr">class</span>=<span class="string">"test.hhh.dao.Impl.PersonDaoImpl"</span> &gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"factory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.HibernateTransactionManager"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p><code>PersonDaoImpl和LocalSessionFactoryBean</code>来自的包必须相同，不能一个来自于<code>hibernate5</code>一个<code>hibernate4</code></p>
</blockquote>
<h1 id="s2sh整合时遇到错误"><a href="#s2sh整合时遇到错误" class="headerlink" title="s2sh整合时遇到错误"></a>s2sh整合时遇到错误</h1><ul>
<li>web.xml中spring的配置如下:<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>WEB-INF/classes/applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>读取时从创建时候设置的文件目录读取，所以此处要加<code>WEB-INF/classes/</code>或者从src下读取，即添加以下配置<code>classpath:applicationContext.xml</code>否者会报错</p>
</blockquote>
<ul>
<li>applicationContext.xml中导入数据源配置文件:<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"location"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:dataSource.properties<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>注意：<font color="#ED8F76"><strong>加上classpath是让spring从src中读取</strong></font></p>
</blockquote>
<h1 id="Log4J日志配置"><a href="#Log4J日志配置" class="headerlink" title="Log4J日志配置"></a>Log4J日志配置</h1><h2 id="所需jar包"><a href="#所需jar包" class="headerlink" title="所需jar包"></a>所需jar包</h2><ul>
<li>如下图<br><img src="/2017/03/01/s2sh三大框架的整合/1.png" alt=""></li>
</ul>
<h2 id="web-xml配置如下"><a href="#web-xml配置如下" class="headerlink" title="web.xml配置如下"></a>web.xml配置如下</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- log4j配置，文件路径，因为是跟随项目启动 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>log4jConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:log4j.properties<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>loggingLevel<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>info<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 加载log4j配置文件 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">listener</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.util.Log4jConfigListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">listener</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="log4J-properties配置"><a href="#log4J-properties配置" class="headerlink" title="log4J.properties配置"></a>log4J.properties配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"># Define the root logger with appender file</div><div class="line">log4j.rootLogger = DEBUG, FILE</div><div class="line"></div><div class="line"># Define the file appender</div><div class="line">log4j.appender.FILE=org.apache.log4j.FileAppender</div><div class="line"># Set the name of the file</div><div class="line">log4j.appender.FILE.File=G:\\log4J\u65E5\u5FD7\\s2sh_test01\\htmlLayout.html</div><div class="line"></div><div class="line"># Set the immediate flush to true (default)</div><div class="line">log4j.appender.FILE.ImmediateFlush=true</div><div class="line"></div><div class="line"># Set the threshold to debug mode</div><div class="line">log4j.appender.FILE.Threshold=debug</div><div class="line"></div><div class="line"># Define the layout for file appender</div><div class="line">log4j.appender.FILE.layout=org.apache.log4j.HTMLLayout</div><div class="line">log4j.appender.FILE.layout.Title=HTML Layout Example</div><div class="line">log4j.appender.FILE.layout.LocationInfo=true</div></pre></td></tr></table></figure>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="http://www.cnblogs.com/S-E-P/archive/2012/01/18/2325253.html" target="_blank" rel="external">Struts2学习笔记——Struts2与Spring整合</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spring-hibernate整合]]></title>
      <url>https://super3h.me/2017/02/26/Spring-hibernate%E6%95%B4%E5%90%88/</url>
      <content type="html"><![CDATA[<h1 id="所需jar包"><a href="#所需jar包" class="headerlink" title="所需jar包"></a>所需jar包</h1><p><img src="/2017/02/26/Spring-hibernate整合/1.png" alt=""></p>
<blockquote>
<p>导入<code>hibernate-release-5.2.5.Final\lib\required</code>下面的包以及spring中事务<code>spring-tx</code>包和对象关系映射<code>spring-orm</code>，jdbc<code>spring-jdbc</code>，注解所需的<code>spring-aop</code>，和<code>beans，core，context，expression</code>以及<code>commons-logging</code>依赖包，还有<code>mysql的驱动包：mysql-connector</code></p>
</blockquote>
<h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><ul>
<li><code>applicationContext.xml</code><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-4.2.xsd</div><div class="line">	http://www.springframework.org/schema/jdbc</div><div class="line">	http://www.springframework.org/schema/jdbc/spring-jdbc.xsd</div><div class="line">	http://www.springframework.org/schema/tx</div><div class="line">	http://www.springframework.org/schema/tx/spring-tx.xsd</div><div class="line">	"&gt;</div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"location"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>dataSource.properties<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;driverClassName&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;url&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;username&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;password&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.LocalSessionFactoryBean"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!--加入hibernate.cfg.xml配置--&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:hibernate.cfg.xml<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"personDao"</span> <span class="attr">class</span>=<span class="string">"com.hhh.dao.impl.PersonDaoImpl"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"factory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!--配置事务--&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.HibernateTransactionManager"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"txManager"</span> /&gt;</span></div><div class="line">	</div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p><code>注意:</code>有关<code>txManager</code>的必须加上，否则<font color="red">dao中<code>sessionFactory.getCurrentSession()</code>会报错:<code>Could not obtain transaction-synchronized Session for current thread</code></font><br><code>原因:</code><font color="#658B00">在Spring事务管理中,current Session是绑定到SpringSessionContext中的,而不是ThreadLocalSessionContext中的，切勿在<strong>hibernate中配置:hibernate.current_session_context_class=thread</strong></font><br>详情请看<a href="http://blog.csdn.net/irelandken/article/details/7193123" target="_blank" rel="external">@Transactional声明式事务管理  getCurrentSession</a></p>
</blockquote>
<ul>
<li><p><code>hibernate.cfg.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-configuration PUBLIC</span></div><div class="line">        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"</div><div class="line">        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">hibernate-configuration</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">session-factory</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dialect"</span>&gt;</span>org.hibernate.dialect.MySQL5InnoDBDialect<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"format_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">       	<span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">"com/hhh/bean/person.hbm.xml"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">session-factory</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-configuration</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>数据库配置:<code>dataSource.properties</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">driverClassName=com.mysql.jdbc.Driver</div><div class="line">url=jdbc:mysql://localhost:3306/shtest</div><div class="line">username=****</div><div class="line">password=****</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="代码详情"><a href="#代码详情" class="headerlink" title="代码详情"></a>代码详情</h1><ul>
<li><p><code>com.hhh.bean.Person</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.bean;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> Long id;</div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>();</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">		<span class="keyword">this</span>.age = age;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> name;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> age;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.age = age;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> Long <span class="title">getId</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> id;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Long id)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.id = id;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"Person [id="</span> + id + <span class="string">", name="</span> + name + <span class="string">", age="</span> + age + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><code>com.hhh.dao.PersonDao</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.dao;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.bean.Person;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PersonDao</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">addPerson</span><span class="params">(Person person)</span></span>;</div><div class="line">	</div><div class="line">	<span class="function">List&lt;Person&gt; <span class="title">listAllPerson</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><code>com.hhh.dao.impl.PersonDaoImpl</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.dao.impl;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.annotation.Resource;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.hibernate.Session;</div><div class="line"><span class="keyword">import</span> org.hibernate.SessionFactory;</div><div class="line"><span class="keyword">import</span> org.hibernate.Transaction;</div><div class="line"><span class="keyword">import</span> org.springframework.orm.hibernate5.support.HibernateDaoSupport;</div><div class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.bean.Person;</div><div class="line"><span class="keyword">import</span> com.hhh.dao.PersonDao;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonDaoImpl</span> <span class="keyword">implements</span> <span class="title">PersonDao</span></span>&#123;</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> SessionFactory factory;</div><div class="line">	</div><div class="line">	<span class="meta">@Transactional</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addPerson</span><span class="params">(Person person)</span> </span>&#123;</div><div class="line">		Session session = factory.getCurrentSession();</div><div class="line">		session.save(person);</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Transactional</span></div><div class="line">	<span class="function"><span class="keyword">public</span> List&lt;Person&gt; <span class="title">listAllPerson</span><span class="params">()</span> </span>&#123;</div><div class="line">		Session session = factory.getCurrentSession();</div><div class="line">		List&lt;Person&gt; persons = session.createQuery(<span class="string">"FROM Person"</span>).getResultList();</div><div class="line">		<span class="keyword">return</span> persons;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFactory</span><span class="params">(SessionFactory factory)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.factory = factory;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>测试类:<code>com.hhh.test.TestApp</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.test;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.hibernate.SessionFactory;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.bean.Person;</div><div class="line"><span class="keyword">import</span> com.hhh.dao.PersonDao;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestApp</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testHB</span><span class="params">()</span></span>&#123;</div><div class="line">		ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</div><div class="line">		SessionFactory factory = (SessionFactory) context.getBean(<span class="string">"sessionFactory"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAddPerson</span><span class="params">()</span></span>&#123;</div><div class="line">		ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</div><div class="line">		PersonDao dao = (PersonDao) context.getBean(<span class="string">"personDao"</span>);</div><div class="line">		Person person = <span class="keyword">new</span> Person(<span class="string">"hhh"</span>,<span class="number">20</span>);</div><div class="line">		dao.addPerson(person);</div><div class="line">	&#125;</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testListPerson</span><span class="params">()</span></span>&#123;</div><div class="line">		ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</div><div class="line">		PersonDao dao = (PersonDao) context.getBean(<span class="string">"personDao"</span>);</div><div class="line">		List&lt;Person&gt; persons = dao.listAllPerson();</div><div class="line">		<span class="keyword">for</span>(Person p:persons)&#123;</div><div class="line">			System.out.println(p);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="代码详情-1"><a href="#代码详情-1" class="headerlink" title="代码详情"></a>代码详情</h1><p>请点此处：<a href="https://github.com/super3H/j2EE/tree/master/Spring-Hibernate" target="_blank" rel="external">Spring-Hibernate</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spring AOP+AspectJ]]></title>
      <url>https://super3h.me/2017/02/25/Spring%20AOP+AspectJ/</url>
      <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><ul>
<li>常见AspectJ的注解：<ul>
<li><code>@Before:</code>方法执行前运行</li>
<li><code>@After:</code>运行在方法返回结果后</li>
<li><code>@AfterReturning:</code>运行在方法返回一个结果后，在拦截器返回结果</li>
<li><code>@AfterThrowing:</code>运行方法在抛出异常后</li>
<li><code>@Around:</code>围绕方法执行运行，结合以上这三个通知<blockquote>
<p><code>注意:</code>Spring AOP 中没有 AspectJ 支持</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h1 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h1><p><img src="/2017/02/25/Spring AOP+AspectJ/1.png" alt=""></p>
<h1 id="Spring-Beans"><a href="#Spring-Beans" class="headerlink" title="Spring Beans"></a>Spring Beans</h1><blockquote>
<p>普通 bean 中有几个方法，后来通过 AspectJ 注解拦截</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.bo;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CustomerBo</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">addCustomer</span><span class="params">()</span></span>;</div><div class="line">	</div><div class="line">	<span class="function">String <span class="title">addCustomerReturnValue</span><span class="params">()</span></span>;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">addCustomerThrowException</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">addCustomerAround</span><span class="params">(String name)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.bo.impl;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.yiibai.customer.bo.CustomerBo;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerBoImpl</span> <span class="keyword">implements</span> <span class="title">CustomerBo</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCustomer</span><span class="params">()</span></span>&#123;</div><div class="line">		System.out.println(<span class="string">"addCustomer() is running "</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">addCustomerReturnValue</span><span class="params">()</span></span>&#123;</div><div class="line">		System.out.println(<span class="string">"addCustomerReturnValue() is running "</span>);</div><div class="line">		<span class="keyword">return</span> <span class="string">"abc"</span>;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCustomerThrowException</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">		System.out.println(<span class="string">"addCustomerThrowException() is running "</span>);</div><div class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"Generic Error"</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCustomerAround</span><span class="params">(String name)</span></span>&#123;</div><div class="line">		System.out.println(<span class="string">"addCustomerAround() is running, args : "</span> + name);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="启用AspectJ"><a href="#启用AspectJ" class="headerlink" title="启用AspectJ"></a>启用AspectJ</h1><blockquote>
<p>在 Spring 配置文件，把<code>“&lt;aop:aspectj-autoproxy /&gt;”</code>，并定义Aspect(拦截)和普通的bean。<br>File : applicationContext.xml</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> </div><div class="line">	<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-3.0.xsd </div><div class="line">	http://www.springframework.org/schema/aop </div><div class="line">	http://www.springframework.org/schema/aop/spring-aop-3.0.xsd "&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> /&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"customerBo"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.customer.bo.impl.CustomerBoImpl"</span> /&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- Aspect --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"logAspect"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.aspect.LoggingAspect"</span> /&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="AspectJ-Before"><a href="#AspectJ-Before" class="headerlink" title="AspectJ @Before"></a>AspectJ @Before</h1><blockquote>
<p>在下面例子中，logBefore()方法将在 customerBo接口的 addCustomer()方法的执行之前被执行。<br><strong>AspectJ的“切入点”是用来声明哪种方法将被拦截</strong></p>
</blockquote>
<ul>
<li><p>File : LoggingAspect.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.aspect;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.aspectj.lang.JoinYiibai;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</div><div class="line"></div><div class="line"><span class="meta">@Aspect</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggingAspect</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Before</span>(<span class="string">"execution(* com.yiibai.customer.bo.CustomerBo.addCustomer(..))"</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logBefore</span><span class="params">(JoinYiibai joinYiibai)</span> </span>&#123;</div><div class="line"></div><div class="line">		System.out.println(<span class="string">"logBefore() is running!"</span>);</div><div class="line">		System.out.println(<span class="string">"hijacked : "</span> + joinYiibai.getSignature().getName());</div><div class="line">		System.out.println(<span class="string">"******"</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>运行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CustomerBo customer = (CustomerBo) appContext.getBean(<span class="string">"customerBo"</span>);</div><div class="line">customer.addCustomer();</div></pre></td></tr></table></figure>
</li>
<li><p>结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">logBefore() is running!</div><div class="line">hijacked : addCustomer</div><div class="line">******</div><div class="line">addCustomer() is running</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="AspectJ-After"><a href="#AspectJ-After" class="headerlink" title="AspectJ @After"></a>AspectJ @After</h1><blockquote>
<p>在下面例子中，logAfter()方法将在 customerBo 接口的 addCustomer()方法的执行之后执行。</p>
</blockquote>
<ul>
<li>File : LoggingAspect.java<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.aspect;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.aspectj.lang.JoinYiibai;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.After;</div><div class="line"></div><div class="line"><span class="meta">@Aspect</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggingAspect</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@After</span>(<span class="string">"execution(* com.yiibai.customer.bo.CustomerBo.addCustomer(..))"</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logAfter</span><span class="params">(JoinYiibai joinYiibai)</span> </span>&#123;</div><div class="line"></div><div class="line">		System.out.println(<span class="string">"logAfter() is running!"</span>);</div><div class="line">		System.out.println(<span class="string">"hijacked : "</span> + joinYiibai.getSignature().getName());</div><div class="line">		System.out.println(<span class="string">"******"</span>);</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="AspectJ-AfterReturning"><a href="#AspectJ-AfterReturning" class="headerlink" title="AspectJ @AfterReturning"></a>AspectJ @AfterReturning</h1><blockquote>
<p>在下面例子中，logAfterReturning()方法将在 customerBo 接口的addCustomerReturnValue()方法执行之后执行。此外，<em>还可以截取返回的值使用“returning”属性。</em></p>
<font color="red">要截取返回的值，对“returning”属性(结果)的值必须用相同的方法参数(结果)</font>

</blockquote>
<ul>
<li><p>File : LoggingAspect.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.aspect;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.aspectj.lang.JoinYiibai;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterReturning;</div><div class="line"></div><div class="line"><span class="meta">@Aspect</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggingAspect</span> </span>&#123;</div><div class="line"></div><div class="line">   <span class="meta">@AfterReturning</span>(</div><div class="line">      pointcut = <span class="string">"execution(* com.yiibai.customer.bo.CustomerBo.addCustomerReturnValue(..))"</span>,</div><div class="line">      returning= <span class="string">"result"</span>)</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logAfterReturning</span><span class="params">(JoinYiibai joinYiibai, Object result)</span> </span>&#123;</div><div class="line"></div><div class="line">	System.out.println(<span class="string">"logAfterReturning() is running!"</span>);</div><div class="line">	System.out.println(<span class="string">"hijacked : "</span> + joinYiibai.getSignature().getName());</div><div class="line">	System.out.println(<span class="string">"Method returned value is : "</span> + result);</div><div class="line">	System.out.println(<span class="string">"******"</span>);</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">addCustomerReturnValue() <span class="function">is running </span></div><div class="line"><span class="title">logAfterReturning</span><span class="params">()</span> is running!</div><div class="line">hijacked : addCustomerReturnValue</div><div class="line">Method returned value is : abc</div><div class="line">******</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="AspectJ-AfterReturning-1"><a href="#AspectJ-AfterReturning-1" class="headerlink" title="AspectJ @AfterReturning"></a>AspectJ @AfterReturning</h1><blockquote>
<p>在下面的例子中，如果 customerBo 接口的addCustomerThrowException()方法抛出异常logAfterThrowing()方法将被执行。</p>
</blockquote>
<ul>
<li><p>File : LoggingAspect.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.aspect;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.aspectj.lang.JoinYiibai;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterThrowing;</div><div class="line"></div><div class="line"><span class="meta">@Aspect</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggingAspect</span> </span>&#123;</div><div class="line"></div><div class="line">   <span class="meta">@AfterThrowing</span>(</div><div class="line">      pointcut = <span class="string">"execution(* com.yiibai.customer.bo.CustomerBo.addCustomerThrowException(..))"</span>,</div><div class="line">      throwing= <span class="string">"error"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logAfterThrowing</span><span class="params">(JoinYiibai joinYiibai, Throwable error)</span> </span>&#123;</div><div class="line"></div><div class="line">	System.out.println(<span class="string">"logAfterThrowing() is running!"</span>);</div><div class="line">	System.out.println(<span class="string">"hijacked : "</span> + joinYiibai.getSignature().getName());</div><div class="line">	System.out.println(<span class="string">"Exception : "</span> + error);</div><div class="line">	System.out.println(<span class="string">"******"</span>);</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">addCustomerThrowException() <span class="function">is running </span></div><div class="line"><span class="title">logAfterThrowing</span><span class="params">()</span> is running!</div><div class="line">hijacked : addCustomerThrowException</div><div class="line">Exception : java.lang.Exception: Generic Error</div><div class="line">******</div><div class="line">Exception in thread "main" java.lang.Exception: Generic Error</div><div class="line">	<span class="comment">//...</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="AspectJ-Around"><a href="#AspectJ-Around" class="headerlink" title="AspectJ @Around"></a>AspectJ @Around</h1><blockquote>
<p>在下面例子中，logAround()方法将在customerBo接口的addCustomerAround()方法执行之前执行， <strong>必须定义“joinYiibai.proceed();” 控制何时拦截器返回控制到原来的addCustomerAround()方法。</strong></p>
</blockquote>
<ul>
<li><p>File : LoggingAspect.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.aspect;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinYiibai;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</div><div class="line"></div><div class="line"><span class="meta">@Aspect</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggingAspect</span> </span>&#123;</div><div class="line"></div><div class="line">   <span class="meta">@Around</span>(<span class="string">"execution(* com.yiibai.customer.bo.CustomerBo.addCustomerAround(..))"</span>)</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logAround</span><span class="params">(ProceedingJoinYiibai joinYiibai)</span> <span class="keyword">throws</span> Throwable </span>&#123;</div><div class="line"></div><div class="line">	System.out.println(<span class="string">"logAround() is running!"</span>);</div><div class="line">	System.out.println(<span class="string">"hijacked method : "</span> + joinYiibai.getSignature().getName());</div><div class="line">	System.out.println(<span class="string">"hijacked arguments : "</span> + Arrays.toString(joinYiibai.getArgs()));</div><div class="line">		</div><div class="line">	System.out.println(<span class="string">"Around before is running!"</span>);</div><div class="line">	joinYiibai.proceed(); <span class="comment">//continue on the intercepted method</span></div><div class="line">	System.out.println(<span class="string">"Around after is running!"</span>);</div><div class="line">		</div><div class="line">	System.out.println(<span class="string">"******"</span>);</div><div class="line"></div><div class="line">   &#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">logAround() is running!</div><div class="line">hijacked method : addCustomerAround</div><div class="line">hijacked arguments : [yiibai]</div><div class="line">Around before is running!</div><div class="line">addCustomerAround() is running, args : yiibai</div><div class="line">Around after is running!</div><div class="line">******</div></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spring表达式语言]]></title>
      <url>https://super3h.me/2017/02/25/Spring%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E8%A8%80/</url>
      <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<p>Spring EL与OGNL和JSF EL相似，计算评估或在bean创建时执行。此外，<em>所有的Spring表达式都可以通过XML或注解。</em><br>在本教程中，我们将学习如何使用Spring表达式语言(SpEL)，注入字符串，整数，Bean到属性，无论是在XML和注释。</p>
</blockquote>
<h1 id="Spring-Beans"><a href="#Spring-Beans" class="headerlink" title="Spring Beans"></a>Spring Beans</h1><blockquote>
<p>两个简单Bean，后来利用 SpEL 注入值到属性，在 XML 和 注释。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> Item item;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> String itemName;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> qty;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Spring-EL以XML形式"><a href="#Spring-EL以XML形式" class="headerlink" title="Spring EL以XML形式"></a>Spring EL以XML形式</h1><blockquote>
<p>使用 SpEL关闭的#{ SpEL expression }括号，请参阅XML bean定义文件下面的例子。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;beans xmlns="http://www.springframework.org/schema/beans"</div><div class="line">	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</div><div class="line">	xsi:schemaLocation="http://www.springframework.org/schema/beans</div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"&gt;</div><div class="line"></div><div class="line">	&lt;bean id="itemBean" class="com.yiibai.core.Item"&gt;</div><div class="line">		&lt;property name="name" value="itemA" /&gt;</div><div class="line">		&lt;property name="qty" value="10" /&gt;</div><div class="line">	&lt;/bean&gt;</div><div class="line"></div><div class="line">	&lt;bean id="customerBean" class="com.yiibai.core.Customer"&gt;</div><div class="line">		&lt;property name="item" value="#&#123;itemBean&#125;" /&gt;</div><div class="line">		&lt;property name="itemName" value="#&#123;itemBean.name&#125;" /&gt;</div><div class="line">	&lt;/bean&gt;</div><div class="line">	</div><div class="line">&lt;/beans&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li><code>#{itemBean}</code>: 注入<code>“itemBean”</code>到<code>“customerBean”</code>Bean 的<code>“item”</code>属性。</li>
<li><code>#{itemBean.name}</code>: 注入<code>“itemBean”</code>的<code>“name”</code>属性到 <code>“customerBean&quot;</code>bean的<code>&quot;itemname”</code>属性。</li>
</ul>
<h1 id="Spring-EL以注解形式"><a href="#Spring-EL以注解形式" class="headerlink" title="Spring EL以注解形式"></a>Spring EL以注解形式</h1><h2 id="代码解析"><a href="#代码解析" class="headerlink" title="代码解析"></a>代码解析</h2><blockquote>
<p>要在注解使用使用SpEL，<strong>必须通过注解注册您的组件。如果注册bean在XML和Java类中定义@Value，该@Value将无法执行。</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="meta">@Component</span>(<span class="string">"customerBean"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;itemBean&#125;"</span>)</div><div class="line">	<span class="keyword">private</span> Item item;</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;itemBean.name&#125;"</span>)</div><div class="line">	<span class="keyword">private</span> String itemName;</div><div class="line"></div><div class="line">	<span class="comment">//...</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="meta">@Component</span>(<span class="string">"itemBean"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"itemA"</span>) <span class="comment">//inject String directly</span></div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"10"</span>) <span class="comment">//inject interger directly</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> qty;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> name;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>启用自动组件扫描。</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> </div><div class="line">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</div><div class="line">	http://www.springframework.org/schema/context</div><div class="line">	http://www.springframework.org/schema/context/spring-context-3.0.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.yiibai.core"</span> /&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>在注解模式下，可以使用<code>@Value</code>定义Spring EL。在这种情况下，一个String和Integer值直接注入到“itemBean”，之后又注入“itemBean”到“customerBean”属性。</p>
</blockquote>
<h2 id="执行输出"><a href="#执行输出" class="headerlink" title="执行输出"></a>执行输出</h2><blockquote>
<p>运行它，无论是使用 SpEL在XML 还是注释都显示了同样的结果：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	    ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</div><div class="line"></div><div class="line">	    Customer obj = (Customer) context.getBean(<span class="string">"customerBean"</span>);</div><div class="line">	    System.out.println(obj);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>输出结果<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Customer [item=Item [name=itemA, qty=<span class="number">10</span>], itemName=itemA]</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="详细内容"><a href="#详细内容" class="headerlink" title="详细内容"></a>详细内容</h2><p><a href="http://www.yiibai.com/spring/spring-el-hello-world-example.html" target="_blank" rel="external">Spring EL hello world</a></p>
<h1 id="Spring-EL方法调用实例"><a href="#Spring-EL方法调用实例" class="headerlink" title="Spring EL方法调用实例"></a>Spring EL方法调用实例</h1><h2 id="代码解析-1"><a href="#代码解析-1" class="headerlink" title="代码解析"></a>代码解析</h2><blockquote>
<p>了解如何实现Spring EL方法调用与@Value注释<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="meta">@Component</span>(<span class="string">"customerBean"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;'yiibai'.toUpperCase()&#125;"</span>)</div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;priceBean.getSpecialPrice()&#125;"</span>)</div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> amount;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> name;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getAmount</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> amount;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAmount</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.amount = amount;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"Customer [name="</span> + name + <span class="string">", amount="</span> + amount + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="meta">@Component</span>(<span class="string">"priceBean"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Price</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSpecialPrice</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Double(<span class="number">199.09</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>输出<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Customer [name=YIIBAI, amount=<span class="number">199.09</span>]</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="详细内容-1"><a href="#详细内容-1" class="headerlink" title="详细内容"></a>详细内容</h2><p><a href="http://www.yiibai.com/spring/spring-el-method-invocation-example.html" target="_blank" rel="external">Spring EL方法调用实例</a></p>
<h1 id="Spring-EL运算符"><a href="#Spring-EL运算符" class="headerlink" title="Spring EL运算符"></a>Spring EL运算符</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>Spring EL支持大多数标准的数学，逻辑和关系运算符。 例如，<ul>
<li><code>关系运算符:</code> 等于 (==, eq), 不等于 (!=, ne), 小于 (&lt;, lt), 小于或等于 (&lt;= , le), 大于 (&gt;, gt), 和大于或等于 (&gt;=, ge).</li>
<li><code>逻辑运算符:</code>且, 或, 非 (!).</li>
<li><code>数学运算符:</code>加法(+), 减法 (-), 乘法 (*), 除法(/), 除模(%) 和指数幂 (^).</li>
</ul>
</li>
</ul>
<h2 id="代码解析-2"><a href="#代码解析-2" class="headerlink" title="代码解析"></a>代码解析</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.core;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="meta">@Component</span>(<span class="string">"customerBean"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">//Relational operators</span></div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 == 1&#125;"</span>) <span class="comment">//true</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testEqual;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 != 1&#125;"</span>) <span class="comment">//false</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testNotEqual;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 &lt; 1&#125;"</span>) <span class="comment">//false</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testLessThan;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 &lt;= 1&#125;"</span>) <span class="comment">//true</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testLessThanOrEqual;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 &gt; 1&#125;"</span>) <span class="comment">//false</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testGreaterThan;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 &gt;= 1&#125;"</span>) <span class="comment">//true</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testGreaterThanOrEqual;</div><div class="line"></div><div class="line">	<span class="comment">//Logical operators , numberBean.no == 999</span></div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;numberBean.no == 999 and numberBean.no &lt; 900&#125;"</span>) <span class="comment">//false</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testAnd;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;numberBean.no == 999 or numberBean.no &lt; 900&#125;"</span>) <span class="comment">//true</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testOr;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;!(numberBean.no == 999)&#125;"</span>) <span class="comment">//false</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testNot;</div><div class="line"></div><div class="line">	<span class="comment">//Mathematical operators</span></div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 + 1&#125;"</span>) <span class="comment">//2.0</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> testAdd;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;'1' + '@' + '1'&#125;"</span>) <span class="comment">//1@1</span></div><div class="line">	<span class="keyword">private</span> String testAddString;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 - 1&#125;"</span>) <span class="comment">//0.0</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> testSubtraction;</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;1 * 1&#125;"</span>) <span class="comment">//1.0</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> testMultiplication;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;10 / 2&#125;"</span>) <span class="comment">//5.0</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> testDivision;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;10 % 10&#125;"</span>) <span class="comment">//0.0</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> testModulus ;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"#&#123;2 ^ 2&#125;"</span>) <span class="comment">//4.0</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> testExponentialPower;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"Customer [testEqual="</span> + testEqual + <span class="string">", testNotEqual="</span></div><div class="line">				+ testNotEqual + <span class="string">", testLessThan="</span> + testLessThan</div><div class="line">				+ <span class="string">", testLessThanOrEqual="</span> + testLessThanOrEqual</div><div class="line">				+ <span class="string">", testGreaterThan="</span> + testGreaterThan</div><div class="line">				+ <span class="string">", testGreaterThanOrEqual="</span> + testGreaterThanOrEqual</div><div class="line">				+ <span class="string">", testAnd="</span> + testAnd + <span class="string">", testOr="</span> + testOr + <span class="string">", testNot="</span></div><div class="line">				+ testNot + <span class="string">", testAdd="</span> + testAdd + <span class="string">", testAddString="</span></div><div class="line">				+ testAddString + <span class="string">", testSubtraction="</span> + testSubtraction</div><div class="line">				+ <span class="string">", testMultiplication="</span> + testMultiplication</div><div class="line">				+ <span class="string">", testDivision="</span> + testDivision + <span class="string">", testModulus="</span></div><div class="line">				+ testModulus + <span class="string">", testExponentialPower="</span></div><div class="line">				+ testExponentialPower + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="详情链接"><a href="#详情链接" class="headerlink" title="详情链接"></a>详情链接</h2><p><a href="http://www.yiibai.com/spring/spring-el-operators-example.html" target="_blank" rel="external">Spring EL运算符实例</a></p>
<h1 id="更多详情内容"><a href="#更多详情内容" class="headerlink" title="更多详情内容"></a>更多详情内容</h1><p><a href="http://www.yiibai.com/spring/spring-el-lists-maps-example.html" target="_blank" rel="external">Spring EL Lists,Maps实例</a><br><a href="http://www.yiibai.com/spring/spring-el-regular-expression-example.html" target="_blank" rel="external">Spring EL正则表达式实例</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spring自动扫描组件]]></title>
      <url>https://super3h.me/2017/02/25/Spring%E8%87%AA%E5%8A%A8%E6%89%AB%E6%8F%8F%E7%BB%84%E4%BB%B6/</url>
      <content type="html"><![CDATA[<h1 id="自动组件扫描"><a href="#自动组件扫描" class="headerlink" title="自动组件扫描"></a>自动组件扫描</h1><blockquote>
<p>启用Spring组件扫描功能。<br>使用@Component注释来表示这是类是一个自动扫描组件。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.dao;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerDAO</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"Hello , This is CustomerDAO"</span>;</div><div class="line">	&#125;	</div><div class="line">&#125;</div><div class="line"><span class="comment">//DAO层，添加@Component，表明这也是一个自动扫描组件。</span></div><div class="line"><span class="keyword">package</span> com.yiibai.customer.services;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.yiibai.customer.dao.CustomerDAO;</div><div class="line"></div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerService</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	CustomerDAO customerDAO;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"CustomerService [customerDAO="</span> + customerDAO + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>将这个<code>“context:component”</code>在bean配置文件，这意味着，在 Spring 中启用自动扫描功能。<code>base-package</code> 是指明存储组件，Spring将扫描该文件夹，并找出Bean(注解为@Component)并注册到 Spring 容器。</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</div><div class="line">	http://www.springframework.org/schema/context</div><div class="line">	http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.yiibai.customer"</span> /&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>执行:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.yiibai.customer.services.CustomerService;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( String[] args )</span></span></div><div class="line">    &#123;</div><div class="line">    	ApplicationContext context = </div><div class="line">    	   <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="keyword">new</span> String[] &#123;<span class="string">"Spring-AutoScan.xml"</span>&#125;);</div><div class="line"></div><div class="line">    	CustomerService cust = (CustomerService)context.getBean(<span class="string">"customerService"</span>);</div><div class="line">    	System.out.println(cust);</div><div class="line">    	</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>输出结果<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CustomerService [customerDAO=Hello , This is CustomerDAO]</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="自定义自动扫描组件名称"><a href="#自定义自动扫描组件名称" class="headerlink" title="自定义自动扫描组件名称"></a>自定义自动扫描组件名称</h1><ul>
<li><p>默认情况下，Spring 将小写部件的第一字符 从’CustomerService’到’customerService’。可以检索该组件名称为“customerService”。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CustomerService cust = (CustomerService)context.getBean(<span class="string">"customerService"</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>要创建组件的自定义名称，你可以这样自定义名称：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Service</span>(<span class="string">"AAA"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerService</span> </span></div><div class="line">...</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>现在，可以用’AAA’这个名称进行检索。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CustomerService cust = (CustomerService)context.getBean(<span class="string">"AAA"</span>);</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="自动组件扫描注释类型"><a href="#自动组件扫描注释类型" class="headerlink" title="自动组件扫描注释类型"></a>自动组件扫描注释类型</h1><ul>
<li>在Spring2.5中，有4种类型的组件自动扫描注释类型<ul>
<li><code>@Component</code> – 指示自动扫描组件。</li>
<li><code>@Repository</code> – 表示在持久层DAO组件。</li>
<li><code>@Service</code> – 表示在业务层服务组件。</li>
<li><code>@Controller</code> – 表示在表示层控制器组件。<blockquote>
<p>因此，使用哪一个？其实并不那么重要。参见 @Repository，@Service 或 @Controller 源代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</div><div class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</div><div class="line"><span class="meta">@Documented</span></div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Repository &#123;</div><div class="line"></div><div class="line">	<span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>你可能会发现，<em>所有的 @Repository, @Service 或 @Controller 被注解为 @Component。</em>因此<font color="#008AE2">，我们可以只使用 @Component 对所有组件进行自动扫描？是的，Spring会自动扫描所有组件的 @Component 注解。</font><br>它工作正常，但不是一个好的做法，为便于阅读，应该始终声明<code>@Repository，@ Service 或 @Controller</code> 在指定的层，使你的代码更易于阅读，如下：</p>
<ul>
<li>DAO 层<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.dao;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</div><div class="line"></div><div class="line"><span class="meta">@Repository</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerDAO</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"Hello , This is CustomerDAO"</span>;</div><div class="line">	&#125;	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<ul>
<li>Service 层<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.services;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.yiibai.customer.dao.CustomerDAO;</div><div class="line"></div><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerService</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	CustomerDAO customerDAO;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"CustomerService [customerDAO="</span> + customerDAO + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line">		</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Spring过滤器组件自动扫描"><a href="#Spring过滤器组件自动扫描" class="headerlink" title="Spring过滤器组件自动扫描"></a>Spring过滤器组件自动扫描</h1><h2 id="过滤组件-包含"><a href="#过滤组件-包含" class="headerlink" title="过滤组件 - 包含"></a>过滤组件 - 包含</h2><blockquote>
<p>参见下面的例子中使用Spring “过滤” 扫描并注册匹配定义<code>“regex”</code>，<em>即使该类组件的名称未标注 @Component 。</em></p>
<ul>
<li>DAO 层<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.dao;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerDAO</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"Hello , This is CustomerDAO"</span>;</div><div class="line">	&#125;	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<ul>
<li><p>Service 层</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.services;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> com.yiibai.customer.dao.CustomerDAO;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerService</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	CustomerDAO customerDAO;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"CustomerService [customerDAO="</span> + customerDAO + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line">		</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Spring 过滤</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</div><div class="line">	http://www.springframework.org/schema/context</div><div class="line">	http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.yiibai"</span> &gt;</span></div><div class="line"></div><div class="line">		<span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"regex"</span> </span></div><div class="line">                       <span class="attr">expression</span>=<span class="string">"com.yiibai.customer.dao.*DAO.*"</span> /&gt;</div><div class="line"></div><div class="line">		<span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"regex"</span> </span></div><div class="line">                       <span class="attr">expression</span>=<span class="string">"com.yiibai.customer.services.*Service.*"</span> /&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>执行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.yiibai.customer.services.CustomerService;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( String[] args )</span></span></div><div class="line">    &#123;</div><div class="line">    	ApplicationContext context = </div><div class="line">		<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="keyword">new</span> String[] &#123;<span class="string">"Spring-AutoScan.xml"</span>&#125;);</div><div class="line"></div><div class="line">    	CustomerService cust = (CustomerService)context.getBean(<span class="string">"customerService"</span>);</div><div class="line">    	System.out.println(cust);</div><div class="line">    	</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//输出</span></div><div class="line">CustomerService [customerDAO=Hello , This is CustomerDAO]</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>在这个XML过滤中，所有文件的名称中包含 DAO 或 Service(<em>DAO.</em>, <em>Services.</em>) 单词将被检测并在 Spring 容器中注册。</p>
</blockquote>
<h2 id="过滤组件-不包含"><a href="#过滤组件-不包含" class="headerlink" title="过滤组件 - 不包含"></a>过滤组件 - 不包含</h2><blockquote>
<p>另外，<em>您还可以排除指定组件，以避免 Spring 检测和 Spring 容器注册。</em><font color="red">不包括在这些文件中标注有 @Service 。</font><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.yiibai.customer"</span> &gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> </span></div><div class="line">			<span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Service"</span> /&gt;		</div><div class="line">	<span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>不包括那些包含DAO这个词组文件名。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.yiibai"</span> &gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"regex"</span> </span></div><div class="line">			<span class="attr">expression</span>=<span class="string">"com.yiibai.customer.dao.*DAO.*"</span> /&gt;		</div><div class="line">	<span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://www.yiibai.com/spring/spring-auto-scanning-components.html" target="_blank" rel="external">Spring自动扫描组件</a><br><a href="http://www.yiibai.com/spring/spring-filtering-components-in-auto-scanning.html" target="_blank" rel="external">Spring过滤器组件自动扫描</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[spring-xmlns,xmlns:xsi和xsi:schemaLocation]]></title>
      <url>https://super3h.me/2017/02/24/spring-xmlns,xmlns%20xsi%E5%92%8Cxsi%20schemaLocation/</url>
      <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<p><em>相信很多人和我一样，在编写Spring或者Maven或者其他需要用到XML文档的程序时，通常都是将这些XML文档头拷贝过来，并没有理解其中元素（比 如xmlns，xmlns:xsi，xsi:schemaLocation）的真正含义，不知道哪些元素是多余的，也不知道为什么要加那些元素。这样当有 时候网上Copy的XML头有错的时候自己却不知道怎么下手。我也是这样的，于是今天花了点时间好好的理解了一下这些元素及其用法，现整理与此。</em></p>
</blockquote>
<h1 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h1><blockquote>
<p>话不多说，先来一段Spring的XML样本，相信大家都很眼熟：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></div><div class="line">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans </span></div><div class="line">                           http://www.springframework.org/schema/beans/spring-beans.xsd</div><div class="line">                           http://www.springframework.org/schema/context </div><div class="line">                           http://www.springframework.org/schema/context/spring-context.xsd</div><div class="line">                           http://www.springframework.org/schema/mvc</div><div class="line">                           http://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt;</div><div class="line">                           </div><div class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"xxx.xxx.controller"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/images/**"</span> <span class="attr">location</span>=<span class="string">"/images/"</span> /&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxx"</span> <span class="attr">class</span>=<span class="string">"xxx.xxx.xxx.Xxx"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"xxx"</span> <span class="attr">value</span>=<span class="string">"xxxx"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>这 个文档中，根元素<beans>就不用说了，接下来是xmlns。那么什么是xmlns呢？<font color="#FF899C">xmlns其实是XML Namespace的缩写，可译为“XML命名空间”，但个人觉得，翻译后的名字反而不好理解，所以我们就叫它为XML Namespace吧。</font></beans></p>
</blockquote>
<h1 id="为什么需要xmlns？"><a href="#为什么需要xmlns？" class="headerlink" title="为什么需要xmlns？"></a>为什么需要xmlns？</h1><blockquote>
<p>考虑这样两个XML文档：表示HTML表格元素的<code>&lt;table/&gt;</code>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Apples<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Bananas<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></div></pre></td></tr></table></figure>
<p>和描述一张桌子的<code>&lt;table/&gt;</code>：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>African Coffee Table<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">width</span>&gt;</span>80<span class="tag">&lt;/<span class="name">width</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">length</span>&gt;</span>120<span class="tag">&lt;/<span class="name">length</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><em>假如这两个 XML 文档被一起使用，由于两个文档都包含带有不同内容和定义的 <code>&lt;table&gt;</code>元素，就会发生命名冲突。XML 解析器是无法确定如何处理这类冲突。为了解决上述问题，xmlns就产生了。</em></p>
</blockquote>
<h1 id="如何是用xmlns？"><a href="#如何是用xmlns？" class="headerlink" title="如何是用xmlns？"></a>如何是用xmlns？</h1><blockquote>
<p>很简单，使用语法：<code>xmlns:namespace-prefix=&quot;namespaceURI&quot;</code>。其中<font color="#42CA98">namespace-prefix为自定义前缀，只要在这个XML文档中保证前缀不重复即可；namespaceURI是这个前缀对应的XML Namespace的定义。</font>例如，<br><figure class="highlight d"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xmlns:context=<span class="string">"http://www.springframework.org/schema/context"</span></div></pre></td></tr></table></figure></p>
<p>这一句定义了一个<a href="http://www.springframwork.org/schema/context的Namespace（这和Java类中的包的声明很相似），并将其和前缀context绑定。所以上面的Spring" target="_blank" rel="external">http://www.springframwork.org/schema/context的Namespace（这和Java类中的包的声明很相似），并将其和前缀context绑定。所以上面的Spring</a> XML文档中会有这么一句：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"xxx.xxx.controller"</span> /&gt;</span></div></pre></td></tr></table></figure></p>
<font color="#42CA98">这里的<component-scan>元素就来自别名为context的XML Namespace，也就是在<a href="http://www.springframework.org/schema/context中定义的。" target="_blank" rel="external">http://www.springframework.org/schema/context中定义的。</a></component-scan></font>

</blockquote>
<ul>
<li>我们还可以将前缀定义为abc：<figure class="highlight d"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xmlns:abc=<span class="string">"namespaceURI"</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>这样再使用这个namespaceURI中的元素时，需要以abc为前缀，例如：<code>&lt;abc:xxx/&gt;</code>。再拿上面的例子解释怎么使用xmlns：</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 这里xmlns:h="url1"表示这个table是用h作为标记，table的写法在url1中定义 --&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">h:table</span> <span class="attr">xmlns:h</span>=<span class="string">"url1"</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;<span class="name">h:tr</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">h:td</span>&gt;</span>Apples<span class="tag">&lt;/<span class="name">h:td</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">h:td</span>&gt;</span>Bananas<span class="tag">&lt;/<span class="name">h:td</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;/<span class="name">h:tr</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">h:table</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 这里xmlns:f="url2"表示这个table是用f作为标记，table的写法在url2中定义 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">f:table</span> <span class="attr">xmlns:f</span>=<span class="string">"url2"</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;<span class="name">f:name</span>&gt;</span>African Coffee Table<span class="tag">&lt;/<span class="name">f:name</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;<span class="name">f:width</span>&gt;</span>80<span class="tag">&lt;/<span class="name">f:width</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;<span class="name">f:length</span>&gt;</span>120<span class="tag">&lt;/<span class="name">f:length</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">f:table</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><font color="#7030A0">后者与前者仅仅使用不同前缀，我们为<code>&lt;table&gt;</code>标签添加了一个 xmlns 属性，这样就为前缀赋予了一个与某个命名空间相关联的限定名称。</font>此时再把它们放在一起，XML解析器就不会报错了。</p>
</blockquote>
<h1 id="xmlns和xmlns-xsi有什么不同？"><a href="#xmlns和xmlns-xsi有什么不同？" class="headerlink" title="xmlns和xmlns:xsi有什么不同？"></a>xmlns和xmlns:xsi有什么不同？</h1><ul>
<li>xmlns表示默认的Namespace。例如Spring XML文档中的:<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xmlns="http://www.springframework.org/schema/beans"</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>这一句表示该文档默认的XML Namespace为<a href="http://www.springframwork.org/schema/beans。" target="_blank" rel="external">http://www.springframwork.org/schema/beans。</a><font color="#7030A0">对于默认的Namespace中的元素，可以不使用前缀。</font>例如Spring XML文档中的<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxx"</span> <span class="attr">class</span>=<span class="string">"xxx.xxx.xxx.Xxx"</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"xxx"</span> <span class="attr">value</span>=<span class="string">"xxxx"</span>/&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>xmlns:xsi表示使用xsi作为前缀的Namespace，当然前缀xsi需要在文档中声明。</p>
</blockquote>
<h1 id="xsi-schemaLocation有何作用？"><a href="#xsi-schemaLocation有何作用？" class="headerlink" title="xsi:schemaLocation有何作用？"></a>xsi:schemaLocation有何作用？</h1><ul>
<li><p><code>xsi:schemaLocation</code>属性其实是Namespace为<a href="http://www.w3.org/2001/XMLSchema-instance里的schemaLocation属性，正是因为我们一开始声明了" target="_blank" rel="external">http://www.w3.org/2001/XMLSchema-instance里的schemaLocation属性，正是因为我们一开始声明了</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</div></pre></td></tr></table></figure>
</li>
<li><p>这里才写作xsi:schemaLocation（当然一般都使用这个前缀）。<font color="#EA623C">它定义了XML Namespace和对应的 XSD（Xml Schema Definition）文档的位置的关系。它的值由一个或多个URI引用对组成，两个URI之间以空白符分隔（空格和换行均可）。第一个URI是定义的 XML Namespace的值，第二个URI给出Schema文档的位置，Schema处理器将从这个位置读取Schema文档，该文档的targetNamespace必须与第一个URI相匹配。</font>例如：</p>
<figure class="highlight d"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">xsi:schemaLocation=<span class="string">"http://www.springframework.org/schema/context </span></div><div class="line">                    http://www.springframework.org/schema/context/spring-context.xsd"</div></pre></td></tr></table></figure>
</li>
<li><p>这里表示Namespace为<code>http://www.springframework.org/schema/context</code>的Schema的位置为<a href="http://www.springframework.org/schema/context/spring-context.xsd。" target="_blank" rel="external">http://www.springframework.org/schema/context/spring-context.xsd</a>这里我们可以打开这个Schema的位置，下面是这个文档的开始部分：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;xsd:schema xmlns="http://www.springframework.org/schema/context" </div><div class="line">            xmlns:xsd="http://www.w3.org/2001/XMLSchema" </div><div class="line">            xmlns:beans="http://www.springframework.org/schema/beans" </div><div class="line">            xmlns:tool="http://www.springframework.org/schema/tool" </div><div class="line">            &lt;!-- 这里的targetNamespace和上方xsi:schemaLocation中的第一个URI匹配 --&gt; </div><div class="line">            targetNamespace="http://www.springframework.org/schema/context" </div><div class="line">            elementFormDefault="qualified" </div><div class="line">            attributeFormDefault="unqualified"&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>有了上面的说明后，再去理解开始的Spring XML文档，一定会有不一样的感觉！ </p>
</blockquote>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://www.cnblogs.com/zhao1949/p/5652167.html" target="_blank" rel="external">关于XML文档的xmlns、xmlns:xsi和xsi:schemaLocation </a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spring使用@Autowired注解自动装配]]></title>
      <url>https://super3h.me/2017/02/24/Spring%E4%BD%BF%E7%94%A8@Autowired%E6%B3%A8%E8%A7%A3%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/</url>
      <content type="html"><![CDATA[<h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><blockquote>
<p>在大多数情况下，你可能只需要在特定的 bean 自动装配属性。<br>在Spring中，<em>可以使用 @Autowired 注解通过setter方法，构造函数或字段自动装配Bean。</em>此外，它可以在一个特定的bean属性自动装配。<br><code>注意:</code><strong>@Autowired注解是通过匹配数据类型自动装配Bean</strong></p>
</blockquote>
<h1 id="Beans"><a href="#Beans" class="headerlink" title="Beans"></a>Beans</h1><blockquote>
<p>一个 Customer bean 在bean配置文件中声明。稍后，您将使用 “@Autowired” 来自动装配一个Person bean。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">package com.yiibai.common;</div><div class="line"></div><div class="line">public class Customer </div><div class="line">&#123;</div><div class="line">	//you want autowired this field.</div><div class="line">	private Person person;</div><div class="line">	</div><div class="line">	private int type;</div><div class="line">	private String action;</div><div class="line">	</div><div class="line">	//getter and setter method</div><div class="line">	</div><div class="line">&#125;</div><div class="line">&lt;beans xmlns="http://www.springframework.org/schema/beans"</div><div class="line">        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</div><div class="line">        xsi:schemaLocation="http://www.springframework.org/schema/beans</div><div class="line">        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;</div><div class="line"></div><div class="line">	&lt;bean id="CustomerBean" class="com.yiibai.common.Customer"&gt;</div><div class="line">		&lt;property name="action" value="buy" /&gt;</div><div class="line">		&lt;property name="type" value="1" /&gt;</div><div class="line">	&lt;/bean&gt;</div><div class="line"></div><div class="line">	&lt;bean id="PersonBean" class="com.yiibai.common.Person"&gt;</div><div class="line">		&lt;property name="name" value="yiibai" /&gt;</div><div class="line">		&lt;property name="address" value="address 123" /&gt;</div><div class="line">		&lt;property name="age" value="28" /&gt;</div><div class="line">	&lt;/bean&gt;</div><div class="line">	</div><div class="line">&lt;/beans&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="注册AutowiredAnnotationBeanPostProcessor"><a href="#注册AutowiredAnnotationBeanPostProcessor" class="headerlink" title="注册AutowiredAnnotationBeanPostProcessor"></a>注册AutowiredAnnotationBeanPostProcessor</h1><blockquote>
<p>要启用@Autowired，必须注册“AutowiredAnnotationBeanPostProcessor’，你可以用两种方式做到这一点：</p>
</blockquote>
<h2 id="Include"><a href="#Include" class="headerlink" title="Include "></a>Include <context:annotation-config></context:annotation-config></h2><blockquote>
<p>添加 Spring 上下文和<code>&lt;context:annotation-config /&gt;</code>在bean配置文件中<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</div><div class="line">	http://www.springframework.org/schema/context</div><div class="line">	http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">context:annotation-config</span> /&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"CustomerBean"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Customer"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"action"</span> <span class="attr">value</span>=<span class="string">"buy"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"type"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"PersonBean"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Person"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"yiibai"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">value</span>=<span class="string">"address ABC"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"29"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><context:annotation-config> 是用于激活那些已经在spring容器里注册过的bean（<em>无论是通过xml的方式还是通过package sanning的方式</em>）上面的注解。<br><code>注意:</code><context:component-scan>除了具有<context:annotation-config>的功能之外，<context:component-scan>还可以在指定的package下扫描以及注册javabean 。</context:component-scan></context:annotation-config></context:component-scan></context:annotation-config></p>
</blockquote>
<h2 id="包含-AutowiredAnnotationBeanPostProcessor"><a href="#包含-AutowiredAnnotationBeanPostProcessor" class="headerlink" title="包含 AutowiredAnnotationBeanPostProcessor"></a>包含 AutowiredAnnotationBeanPostProcessor</h2><blockquote>
<p>直接在bean配置文件包含“AutowiredAnnotationBeanPostProcessor”。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> </span></div><div class="line"><span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"</span>/&gt;</div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"CustomerBean"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Customer"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"action"</span> <span class="attr">value</span>=<span class="string">"buy"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"type"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"PersonBean"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Person"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"yiibai"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">value</span>=<span class="string">"address ABC"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"29"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="Autowired示例"><a href="#Autowired示例" class="headerlink" title="@Autowired示例"></a>@Autowired示例</h2><blockquote>
<p>现在，你可以通过 @Autowired 自动装配 bean，它可以在 setter 方法，构造函数或字段中使用。</p>
</blockquote>
<h3 id="Autowired-setter-方法"><a href="#Autowired-setter-方法" class="headerlink" title="@Autowired setter 方法"></a>@Autowired setter 方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">private</span> Person person;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> type;</div><div class="line">	<span class="keyword">private</span> String action;</div><div class="line">	<span class="comment">//getter and setter methods</span></div><div class="line">	</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPerson</span><span class="params">(Person person)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.person = person;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Autowired-构造方法"><a href="#Autowired-构造方法" class="headerlink" title="@Autowired 构造方法"></a>@Autowired 构造方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">private</span> Person person;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> type;</div><div class="line">	<span class="keyword">private</span> String action;</div><div class="line">	<span class="comment">//getter and setter methods</span></div><div class="line">	</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Customer</span><span class="params">(Person person)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.person = person;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Autowired-字段"><a href="#Autowired-字段" class="headerlink" title="@Autowired 字段"></a>@Autowired 字段</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	<span class="keyword">private</span> Person person;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> type;</div><div class="line">	<span class="keyword">private</span> String action;</div><div class="line">	<span class="comment">//getter and setter methods</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>上面的例子会自动装配“PersonBean”到Customer的person属性。<br>执行它<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( String[] args )</span></span></div><div class="line">    &#123;</div><div class="line">    	ApplicationContext context = </div><div class="line">    	  <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="keyword">new</span> String[] &#123;<span class="string">"applicationContext.xml"</span>&#125;);</div><div class="line">    	</div><div class="line">    	Customer cust = (Customer)context.getBean(<span class="string">"CustomerBean"</span>);</div><div class="line">    	System.out.println(cust);</div><div class="line">    	</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>输出:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Customer [person=Person [name=YiibaiA], type=1, action=buy]</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="依赖检查"><a href="#依赖检查" class="headerlink" title="依赖检查"></a>依赖检查</h1><blockquote>
<p>默认情况下，@Autowired将执行相关检查，以确保属性已经装配正常。当Spring无法找到匹配的Bean装配，它会抛出异常。要解决这个问题，可以通过 <strong>@Autowired 的“required”属性设置为false来禁用此检查功能。</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Autowired</span>(required=<span class="keyword">false</span>)</div><div class="line">	<span class="keyword">private</span> Person person;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> type;</div><div class="line">	<span class="keyword">private</span> String action;</div><div class="line">	<span class="comment">//getter and setter methods</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在上面的例子中，如果Spring不能找到一个匹配的Bean，person属性将不设定。</p>
</blockquote>
<h1 id="Qualifier"><a href="#Qualifier" class="headerlink" title="@Qualifier"></a>@Qualifier</h1><blockquote>
<p>@Qualifier注解我们用来控制bean应在字段上自动装配。例如，具有两个类似的 person bean 配置文件。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</div><div class="line">	http://www.springframework.org/schema/context</div><div class="line">	http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">context:annotation-config</span> /&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"CustomerBean"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Customer"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"action"</span> <span class="attr">value</span>=<span class="string">"buy"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"type"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"PersonBean1"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Person"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"yiibai-1"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">value</span>=<span class="string">"address-1"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"29"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"PersonBean2"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Person"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"yiibai-2"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">value</span>=<span class="string">"address-2"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"28"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	</div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>Spring知道哪个 bean 应当装配？<br>为了解决这个问题，可以使用 @Qualifier 自动装配一个特定的 bean，例如，<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	<span class="meta">@Qualifier</span>(<span class="string">"PersonBean1"</span>)</div><div class="line">	<span class="keyword">private</span> Person person;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> type;</div><div class="line">	<span class="keyword">private</span> String action;</div><div class="line">	<span class="comment">//getter and setter methods</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这意味着，“PersonBean1” bean被自动装配到customer的person属性</p>
</blockquote>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://www.yiibai.com/spring/spring-auto-wiring-beans-with-autowired-annotation.html" target="_blank" rel="external">Spring使用@Autowired注解自动装配</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spring Bean作用域实例]]></title>
      <url>https://super3h.me/2017/02/24/Spring%20Bean%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%AE%9E%E4%BE%8B/</url>
      <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><ul>
<li>在Spring中，bean作用域用于确定哪种类型的 bean 实例应该从Spring容器中返回给调用者。bean支持的5种范围域：<ul>
<li><code>单例：</code> 每个Spring IoC 容器返回一个bean实例</li>
<li><code>原型：</code>当每次请求时返回一个新的bean实例</li>
<li><code>请求：</code>返回每个HTTP请求的一个Bean实例</li>
<li><code>会话：</code>返回每个HTTP会话的一个bean实例</li>
<li><code>全局会话：</code>返回全局HTTP会话的一个bean实例<blockquote>
<p>在大多数情况下，可能只处理了 Spring 的核心作用域 - 单例和原型，默认作用域是单例。<br>注：<strong>意味着只有在一个基于web的Spring ApplicationContext情形下有效！</strong></p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h1 id="单例VS原型"><a href="#单例VS原型" class="headerlink" title="单例VS原型"></a>单例VS原型</h1><blockquote>
<p>这里有一个例子来说明，bean的作用域单例和原型之间的不同：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.services;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerService</span> </span></div><div class="line">&#123;</div><div class="line">	String message;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> message;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.message = message;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="单例例子"><a href="#单例例子" class="headerlink" title="单例例子"></a>单例例子</h2><blockquote>
<p>如果 bean 配置文件中没有指定 bean 的范围，默认为单例。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;</div><div class="line"></div><div class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"customerService"</span> </span></div><div class="line">            <span class="attr">class</span>=<span class="string">"com.yiibai.customer.services.CustomerService"</span> /&gt;</div><div class="line">		</div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>执行结果：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.yiibai.customer.services.CustomerService;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( String[] args )</span></span></div><div class="line">    &#123;</div><div class="line">    	ApplicationContext context = </div><div class="line">    	 <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="keyword">new</span> String[] &#123;<span class="string">"Spring-Customer.xml"</span>&#125;);</div><div class="line"></div><div class="line">    	CustomerService custA = (CustomerService)context.getBean(<span class="string">"customerService"</span>);</div><div class="line">    	custA.setMessage(<span class="string">"Message by custA"</span>);</div><div class="line">    	System.out.println(<span class="string">"Message : "</span> + custA.getMessage());</div><div class="line">    	</div><div class="line">    	<span class="comment">//retrieve it again</span></div><div class="line">    	CustomerService custB = (CustomerService)context.getBean(<span class="string">"customerService"</span>);</div><div class="line">    	System.out.println(<span class="string">"Message : "</span> + custB.getMessage());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>输出结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Message : Message by custA</div><div class="line">Message : Message by custA</div></pre></td></tr></table></figure></p>
<p>由于 <strong>bean 的 “CustomerService’ 是单例作用域，第二个通过提取”custB“将显示消息由 ”custA’ 设置，即使它是由一个新的 getBean()方法来提取。</strong>在单例中，<strong><em>每个Spring IoC容器只有一个实例，无论多少次调用 getBean()方法获取它，它总是返回同一个实例。</em></strong></p>
</blockquote>
<h2 id="原型例子"><a href="#原型例子" class="headerlink" title="原型例子"></a>原型例子</h2><blockquote>
<p>如果想有一个新的 “CustomerService”bean 实例，每次调用它的时候，需要使用原型(prototype)来代替。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;</div><div class="line"></div><div class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"customerService"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.customer.services.CustomerService"</span> </span></div><div class="line">         <span class="attr">scope</span>=<span class="string">"prototype"</span>/&gt;</div><div class="line">		</div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>运行-执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Message : Message by custA</div><div class="line">Message : null</div></pre></td></tr></table></figure></p>
<p>在原型作用域，必须为每个 getBean()方法中调用返回一个新的实例。</p>
</blockquote>
<h1 id="Bean作用域注释"><a href="#Bean作用域注释" class="headerlink" title="Bean作用域注释"></a>Bean作用域注释</h1><blockquote>
<p>还可以使用注释来定义 bean 的作用域。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.customer.services;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Scope;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</div><div class="line"></div><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="meta">@Scope</span>(<span class="string">"prototype"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerService</span> </span></div><div class="line">&#123;</div><div class="line">	String message;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> message;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.message = message;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>启用自动组件扫描<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</div><div class="line">	http://www.springframework.org/schema/context</div><div class="line">	http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;</div><div class="line"></div><div class="line">       <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.yiibai.customer"</span> /&gt;</span></div><div class="line">		</div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="原文详解"><a href="#原文详解" class="headerlink" title="原文详解"></a>原文详解</h1><p><a href="http://www.yiibai.com/spring/spring-bean-scopes-examples.html#" target="_blank" rel="external">Spring Bean作用域实例</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spring 依赖注入(DI)]]></title>
      <url>https://super3h.me/2017/02/24/Spring%20%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5(DI)/</url>
      <content type="html"><![CDATA[<blockquote>
<p>在Spring框架中，依赖注入(DI)的设计模式是用来定义对象彼此间的依赖。它主要有两种类型：</p>
<pre><code>- Setter方法注入
- 构造器注入
</code></pre><p>这里两种方法共用的基本类如下:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.core;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Music</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">minYao</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.core.impl;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.core.Music;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MusicImpl</span> <span class="keyword">implements</span> <span class="title">Music</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">minYao</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"民谣"</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Setter方法注入"><a href="#Setter方法注入" class="headerlink" title="Setter方法注入"></a>Setter方法注入</h1><blockquote>
<p>这是最流行最简单的DI注入方法，通过设置方法注入依赖。</p>
</blockquote>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><blockquote>
<p>帮助器类和指定的setter方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.helper;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.core.Music;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MusicHelper</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> Music music;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getMusic</span><span class="params">()</span> </span>&#123;</div><div class="line">		music.minYao();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMusic</span><span class="params">(Music music)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.music = music;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>一个 bean 配置文件用来声明bean 和通过 setter 设置注入(property标签)的依赖<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">        http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;</div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"music"</span> <span class="attr">class</span>=<span class="string">"com.hhh.core.impl.MusicImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"musicHelper"</span> <span class="attr">class</span>=<span class="string">"com.hhh.helper.MusicHelper"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"music"</span> <span class="attr">ref</span>=<span class="string">"music"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>测试类test<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.test;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.helper.MusicHelper;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDI</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSetter</span><span class="params">()</span></span>&#123;</div><div class="line">		ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</div><div class="line">		MusicHelper helper = (MusicHelper) context.getBean(<span class="string">"musicHelper"</span>);</div><div class="line">		helper.getMusic();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>结果:<code>民谣</code></p>
</blockquote>
<h1 id="构造函数注入"><a href="#构造函数注入" class="headerlink" title="构造函数注入"></a>构造函数注入</h1><blockquote>
<p>此DI方法将通过构造函数注入依赖。</p>
</blockquote>
<h2 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h2><blockquote>
<p>一个辅助类的构造函数。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.helper;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.core.Music;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConstructorHelper</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ConstructorHelper</span><span class="params">(Music music)</span></span>&#123;</div><div class="line">		music.minYao();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>bean 配置文件来声明bean并通过构造函数(constructor-arg标签)设置注入依赖<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">        http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;</div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"music"</span> <span class="attr">class</span>=<span class="string">"com.hhh.core.impl.MusicImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"constructorHelper"</span> <span class="attr">class</span>=<span class="string">"com.hhh.helper.ConstructorHelper"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">constructor-arg</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"music"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>测试类test<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.test;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.helper.MusicHelper;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDI</span> </span>&#123;</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testConstructor</span><span class="params">()</span></span>&#123;</div><div class="line">		ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</div><div class="line">		MusicHelper helper = (MusicHelper) context.getBean(<span class="string">"musicHelper"</span>);</div><div class="line">		helper.getMusic();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>结果:<code>民谣</code></p>
</blockquote>
<h2 id="构造方法注入类型歧义问题"><a href="#构造方法注入类型歧义问题" class="headerlink" title="构造方法注入类型歧义问题"></a>构造方法注入类型歧义问题</h2><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><blockquote>
<p>让我们来看看这个客户 bean 实例。它包含两个构造方法，均接受3个不同的数据类型参数。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line">	<span class="keyword">private</span> String address;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Customer</span><span class="params">(String name, String address, <span class="keyword">int</span> age)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">		<span class="keyword">this</span>.address = address;</div><div class="line">		<span class="keyword">this</span>.age = age;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Customer</span><span class="params">(String name, <span class="keyword">int</span> age, String address)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">		<span class="keyword">this</span>.age = age;</div><div class="line">		<span class="keyword">this</span>.address = address;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//getter and setter methods</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">" name : "</span> +name + <span class="string">"\n address : "</span></div><div class="line">               + address + <span class="string">"\n age : "</span> + age;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在<code>Spring bean</code> 的配置文件中，通过传递一个“yiibai’ 的名字，地址为’188’，以及年龄为’28’<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--Spring-Customer.xml--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"CustomerBean"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Customer"</span>&gt;</span></div><div class="line"></div><div class="line">		<span class="tag">&lt;<span class="name">constructor-arg</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>yiibai<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></div><div class="line">		</div><div class="line">		<span class="tag">&lt;<span class="name">constructor-arg</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>188<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></div><div class="line">		</div><div class="line">		<span class="tag">&lt;<span class="name">constructor-arg</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>28<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>运行它，你期望的结果是什么？<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.yiibai.common;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( String[] args )</span></span></div><div class="line">    &#123;</div><div class="line">    	ApplicationContext context = </div><div class="line">    	  <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="keyword">new</span> String[] &#123;<span class="string">"Spring-Customer.xml"</span>&#125;);</div><div class="line"></div><div class="line">    	Customer cust = (Customer)context.getBean(<span class="string">"CustomerBean"</span>);</div><div class="line">    	System.out.println(cust);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>输出结果<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">name : yiibai</div><div class="line"> address : 28</div><div class="line"> age : 188</div></pre></td></tr></table></figure></p>
<p>其结果不是我们所期望的，第一个构造器不执行，而是第二构造函数运行。在Spring参数类型’188’ 能够转换成int，所以Spring只是转换它，并采用第二个构造来执行，即使你认为它应该是一个字符串。</p>
</blockquote>
<ul>
<li>另外，如果Spring不能解决使用哪个构造函数，它会提示以下错误信息<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">constructor arguments specified but no matching constructor </div><div class="line">found in bean <span class="string">'CustomerBean'</span> (hint: specify index and/or </div><div class="line">type arguments <span class="keyword">for</span> simple parameters to avoid type ambiguities)</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"CustomerBean"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Customer"</span>&gt;</span></div><div class="line">	</div><div class="line">		<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">"java.lang.String"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>yiibai<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></div><div class="line">		</div><div class="line">		<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">"java.lang.String"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>188<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></div><div class="line">		</div><div class="line">		<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">"int"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>28<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></div><div class="line">		</div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>再次运行它，现在得到你所期望的。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">name : yiibai</div><div class="line"> address : 188</div><div class="line"> age : 28</div></pre></td></tr></table></figure></p>
<p>这是一个很好的做法，显式声明每个构造函数参数的数据类型，以避免上述构造注入型歧义的问题。</p>
</blockquote>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://www.yiibai.com/spring/constructor-injection-type-ambiguities-in-spring.html" target="_blank" rel="external">Spring构造方法注入类型歧义</a><br><a href="http://www.yiibai.com/spring/spring-dependency-injection-di.html" target="_blank" rel="external">Spring依赖注入（DI）</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[spring所遇问题]]></title>
      <url>https://super3h.me/2017/02/23/spring%E6%89%80%E9%81%87%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h1 id="jar包没导出的问题"><a href="#jar包没导出的问题" class="headerlink" title="jar包没导出的问题"></a>jar包没导出的问题</h1><blockquote>
<p>没导入<code>spring-core-4.2.6.RELEASE.jar</code>，报:<code>The type org.springframework.core.NestedRuntimeException cannot be resolved. It is indirectly referenced from required .class files</code><br>以及其他jar包没导报:<code>ClassNoFoundException....</code>，以下列出所需基本包<br><img src="/2017/02/23/spring所遇问题/1.png" alt=""></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spring JavaConfig]]></title>
      <url>https://super3h.me/2017/02/23/Spring%20JavaConfig/</url>
      <content type="html"><![CDATA[<h1 id="注解替代"><a href="#注解替代" class="headerlink" title="注解替代"></a>注解替代</h1><blockquote>
<p>从Spring 3起，JavaConfig功能已经包含在Spring核心模块，它允许开发者将bean定义和在Spring配置XML文件到Java类中。<br>但是，<em>仍然允许使用经典的XML方式来定义bean和配置，JavaConfig是另一种替代解决方案。</em><br>看来看经典的XML定义和JavaConfig的不同，如下定义在Spring容器中的bean<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"&gt;</div><div class="line"> </div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"helloBean"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.hello.impl.HelloWorldImpl"</span>&gt;</span></div><div class="line">		</div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>等效于以下JavaConfig的配置：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</div><div class="line"><span class="keyword">import</span> com.yiibai.hello.HelloWorld;</div><div class="line"><span class="keyword">import</span> com.yiibai.hello.impl.HelloWorldImpl;</div><div class="line"></div><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</div><div class="line">	</div><div class="line">    <span class="meta">@Bean</span>(name=<span class="string">"helloBean"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> HelloWorld <span class="title">helloWorld</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> HelloWorldImpl();</div><div class="line">    &#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h1><h2 id="目录及所需jar包"><a href="#目录及所需jar包" class="headerlink" title="目录及所需jar包"></a>目录及所需jar包</h2><p><img src="/2017/02/23/Spring JavaConfig/1.png" alt=""></p>
<h2 id="单个加载"><a href="#单个加载" class="headerlink" title="单个加载"></a>单个加载</h2><h3 id="Spring-Beans"><a href="#Spring-Beans" class="headerlink" title="Spring Beans"></a>Spring Beans</h3><blockquote>
<p>一个简单的Bean<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.helloWorld;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">HelloWorld</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.helloWorld.impl;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.helloWorld.HelloWorld;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldImpl</span> <span class="keyword">implements</span> <span class="title">HelloWorld</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"hello world"</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Configuration示例"><a href="#Configuration示例" class="headerlink" title="@Configuration示例"></a>@Configuration示例</h3><blockquote>
<p>使用 <code>@Configuration</code> 注释告诉 Spring，这是核心的 Spring 配置文件，并通过 <code>@Bean</code> 定义 bean<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.appconfig;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.helloWorld.HelloWorld;</div><div class="line"><span class="keyword">import</span> com.hhh.helloWorld.impl.HelloWorldImpl;</div><div class="line"></div><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="meta">@Bean</span>(name=<span class="string">"helloWorld"</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> HelloWorld <span class="title">helloWorld</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> HelloWorldImpl();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="执行程序"><a href="#执行程序" class="headerlink" title="执行程序"></a>执行程序</h3><blockquote>
<p>使用<code>AnnotationConfigApplicationContext</code> 加载您的JavaConfig类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.test;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.appconfig.AppConfig;</div><div class="line"><span class="keyword">import</span> com.hhh.appconfig.AppConfig2;</div><div class="line"><span class="keyword">import</span> com.hhh.core.CustomerBo;</div><div class="line"><span class="keyword">import</span> com.hhh.core.SchedulerBo;</div><div class="line"><span class="keyword">import</span> com.hhh.helloWorld.HelloWorld;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAnnotation</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testHello</span><span class="params">()</span></span>&#123;</div><div class="line">    	<span class="comment">//spring通过注解拿到HelloWorld对象</span></div><div class="line">		ApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext(AppConfig.class);</div><div class="line">		HelloWorld hello = (HelloWorld) context.getBean(<span class="string">"helloWorld"</span>);</div><div class="line">		hello.sayHello();</div><div class="line">		<span class="comment">//通过new而得到的对象</span></div><div class="line">		AppConfig config = <span class="keyword">new</span> AppConfig();</div><div class="line">		HelloWorld world = config.helloWorld();</div><div class="line">		world.sayHello();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="通过import加载多个"><a href="#通过import加载多个" class="headerlink" title="通过import加载多个"></a>通过<code>import</code>加载多个</h2><h3 id="Spring-Beans-1"><a href="#Spring-Beans-1" class="headerlink" title="Spring Beans"></a>Spring Beans</h3><blockquote>
<p>两个简单的Spring bean。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//File : CustomerBo.java</span></div><div class="line"><span class="keyword">package</span> com.hhh.core;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerBo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printMsg</span><span class="params">(String msg)</span> </span>&#123;</div><div class="line"></div><div class="line">		System.out.println(<span class="string">"CustomerBo : "</span> + msg);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">/***************************************************/</span></div><div class="line"><span class="comment">//File : SchedulerBo.java</span></div><div class="line"><span class="keyword">package</span> com.hhh.core;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SchedulerBo</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printMsg</span><span class="params">(String msg)</span> </span>&#123;</div><div class="line"></div><div class="line">		System.out.println(<span class="string">"SchedulerBo : "</span> + msg);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="Configuration示例-1"><a href="#Configuration示例-1" class="headerlink" title="@Configuration示例"></a>@Configuration示例</h3><blockquote>
<p>现在，使用JavaConfig @Configuration声明上述Bean类。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//File : CustomerConfig.java</span></div><div class="line"><span class="keyword">package</span> com.hhh.config;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.core.CustomerBo;</div><div class="line"></div><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerConfig</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="meta">@Bean</span>(name=<span class="string">"customer"</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> CustomerBo <span class="title">customerBo</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> CustomerBo();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*****************************************************/</span></div><div class="line"><span class="comment">//File : SchedulerConfig.java</span></div><div class="line"><span class="keyword">package</span> com.hhh.config;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.core.SchedulerBo;</div><div class="line"></div><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SchedulerConfig</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="meta">@Bean</span>(name=<span class="string">"scheduler"</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> SchedulerBo <span class="title">schedulerBo</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> SchedulerBo();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="Import示例"><a href="#Import示例" class="headerlink" title="@Import示例"></a>@Import示例</h3><blockquote>
<p>加载主配置文件，并进行测试<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.appconfig;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.config.CustomerConfig;</div><div class="line"><span class="keyword">import</span> com.hhh.config.SchedulerConfig;</div><div class="line"></div><div class="line"><span class="meta">@Import</span>(&#123;CustomerConfig.class,SchedulerConfig.class&#125;)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig2</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="执行程序-1"><a href="#执行程序-1" class="headerlink" title="执行程序"></a>执行程序</h3><blockquote>
<p>加载主配置文件，并进行测试。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.hhh.test;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.hhh.appconfig.AppConfig;</div><div class="line"><span class="keyword">import</span> com.hhh.appconfig.AppConfig2;</div><div class="line"><span class="keyword">import</span> com.hhh.core.CustomerBo;</div><div class="line"><span class="keyword">import</span> com.hhh.core.SchedulerBo;</div><div class="line"><span class="keyword">import</span> com.hhh.helloWorld.HelloWorld;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAnnotation</span> </span>&#123;</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testConfig</span><span class="params">()</span></span>&#123;</div><div class="line">		ApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext(AppConfig2.class);</div><div class="line">		CustomerBo cb =  (CustomerBo) context.getBean(<span class="string">"customer"</span>);</div><div class="line">		cb.printMsg(<span class="string">"hahaha"</span>);</div><div class="line">		</div><div class="line">		SchedulerBo sb = (SchedulerBo) context.getBean(<span class="string">"scheduler"</span>);</div><div class="line">		sb.printMsg(<span class="string">"heiheihei"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://www.yiibai.com/spring/spring-3-javaconfig-import-example.html" target="_blank" rel="external">Spring JavaConfig @Import实例</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spring自动装配Beans]]></title>
      <url>https://super3h.me/2017/02/22/Spring%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8DBeans/</url>
      <content type="html"><![CDATA[<h1 id="Spring自动装配Beans的5中模式"><a href="#Spring自动装配Beans的5中模式" class="headerlink" title="Spring自动装配Beans的5中模式"></a>Spring自动装配Beans的5中模式</h1><blockquote>
<p>在Spring框架，可以用 auto-wiring 功能会自动装配Bean。要启用它，只需要在 <bean>定义<code>“autowire”</code>属性。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"customer"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Customer"</span> <span class="attr">autowire</span>=<span class="string">"byName"</span> /&gt;</span></div></pre></td></tr></table></figure></bean></p>
</blockquote>
<ul>
<li>在Spring中，支持 5 自动装配模式。<ul>
<li><code>no</code> – 缺省情况下，自动配置是通过“ref”属性手动设定</li>
<li><code>byName</code> – 根据属性名称自动装配。如果一个bean的名称和其他bean属性的名称是一样的，将会自装配它。</li>
<li><code>byType</code> – 按数据类型自动装配。如果一个bean的数据类型是用其它bean属性的数据类型，兼容并自动装配它。</li>
<li><code>constructor</code> – 在构造函数参数的byType方式。</li>
<li><code>autodetect</code> – 如果找到默认的构造函数，使用“自动装配用构造”; 否则，使用“按类型自动装配”。</li>
</ul>
</li>
</ul>
<h1 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h1><blockquote>
<p><code>Customer</code> 和 <code>Person</code> 对象自动装配示范。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">private</span> Person person;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Customer</span><span class="params">(Person person)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.person = person;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPerson</span><span class="params">(Person person)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.person = person;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="comment">//...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="Auto-Wiring-‘no’"><a href="#Auto-Wiring-‘no’" class="headerlink" title="Auto-Wiring ‘no’"></a>Auto-Wiring ‘no’</h2><blockquote>
<p>这是默认的模式，你需要通过 ‘ref’ 属性来连接 bean。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"customer"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Customer"</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"person"</span> <span class="attr">ref</span>=<span class="string">"person"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"person"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Person"</span> /&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="Auto-Wiring-‘byName’"><a href="#Auto-Wiring-‘byName’" class="headerlink" title="Auto-Wiring ‘byName’"></a>Auto-Wiring ‘byName’</h2><blockquote>
<p>按属性名称自动装配。在这种情况下，由于<strong>对“person” bean的名称是相同于“customer” bean 的属性(“person”)名称</strong>，所以，Spring会自动通过setter方法将其装配 – “setPerson(Person person)“.<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"customer"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Customer"</span> <span class="attr">autowire</span>=<span class="string">"byName"</span> /&gt;</span>	</div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"person"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Person"</span> /&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="Auto-Wiring-‘byType’"><a href="#Auto-Wiring-‘byType’" class="headerlink" title="Auto-Wiring ‘byType’"></a>Auto-Wiring ‘byType’</h2><blockquote>
<p>通过按属性的数据类型自动装配Bean。在这种情况下，<strong>由于“Person” bean中的数据类型是与“customer” bean的属性(Person对象)的数据类型一样的</strong>，所以，Spring会自动通过setter方法将其自动装配。– “setPerson(Person person)“.<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"customer"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Customer"</span> <span class="attr">autowire</span>=<span class="string">"byType"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"person"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Person"</span> /&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="Auto-Wiring-‘constructor’"><a href="#Auto-Wiring-‘constructor’" class="headerlink" title="Auto-Wiring ‘constructor’"></a>Auto-Wiring ‘constructor’</h2><blockquote>
<p>通过构造函数参数的数据类型按属性自动装配Bean。在这种情况下，<strong>由于“person” bean的数据类型与“customer” bean的属性(Person对象)的构造函数参数的数据类型是一样的</strong>，所以，Spring通过构造方法自动装配 – “public Customer(Person person)“.<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"customer"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Customer"</span> <span class="attr">autowire</span>=<span class="string">"constructor"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"person"</span> <span class="attr">class</span>=<span class="string">"com.yiibai.common.Person"</span> /&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://www.yiibai.com/spring/spring-auto-wiring-beans-in-xml.html" target="_blank" rel="external">Spring自动装配Beans</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[maven外部依赖]]></title>
      <url>https://super3h.me/2017/02/22/maven%E5%A4%96%E9%83%A8%E4%BE%9D%E8%B5%96/</url>
      <content type="html"><![CDATA[<h1 id="maven外部依赖"><a href="#maven外部依赖" class="headerlink" title="maven外部依赖"></a>maven外部依赖</h1><blockquote>
<p>正如大家所了解的那样，Maven确实使用 Maven 库的概念作依赖管理。但是，如果依赖是在远程存储库和中央存储库不提供那会怎么样？ Maven 提供为使用外部依赖的概念，就是应用在这样的场景中的。<br>举一个例子，让我们在<a href="http://www.yiibai.com/maven/maven_creating_project.html" target="_blank" rel="external">Maven创建项目</a>这一章节中创建的项目做以下的修改</p>
<pre><code>- 添加 lib 文件夹到 src 文件夹
- 复制任何的 jar 到 lib 文件夹。这里使用的是 ldapjdk.jar，这是 LDAP 操作的辅助库
</code></pre><p>目录结构如下:<br><img src="/2017/02/22/maven外部依赖/1.jpg" alt=""><br>在这里，在项目中指定自己所用的库，它可以包含 jar 文件，但是可能无法在任何 Maven 存储库找到，那么需要从外部下载。如果代码使用这个 Maven 库但没有办法找到，那么 Maven 构建将会失败，因为它在编译阶段使用指这个库无法下载或无法找到。<br>要处理这种情况，<em>需要添加外部依赖项</em>，如使用下列方式在 Maven 的 pom.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> </span></div><div class="line">   <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">   <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 </span></div><div class="line">   http://maven.apache.org/maven-v4_0_0.xsd"&gt;</div><div class="line">   </div><div class="line">   <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.companyname.bank<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>consumerBanking<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>consumerBanking<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line"></div><div class="line">   <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ldapjdk<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ldapjdk<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span>$&#123;basedir&#125;\src\lib\ldapjdk.jar<span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>再看上面例子中的第二个依赖元素（dependency），它清除以下有关外部依赖的重要概念。</p>
<pre><code>- 外部依赖（JAR库的位置）可以在 pom.xml 中配置为与其他依赖的方式相同；
- 指定 groupId 同样作为库的名称；
- 指定 artifactId 同样作为库的名称
- 指定范围的系统；
- 指定相系统项目的位置；
</code></pre></blockquote>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p>详情请参考<a href="http://www.yiibai.com/maven/maven_external_dependencies.html" target="_blank" rel="external">Maven外部依赖</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[maven-Eclipse里导入MavenWeb工程]]></title>
      <url>https://super3h.me/2017/02/22/maven-Eclipse%E9%87%8C%E5%AF%BC%E5%85%A5MavenWeb%E5%B7%A5%E7%A8%8B/</url>
      <content type="html"><![CDATA[<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p>详情参考<a href="http://jingyan.baidu.com/article/9f63fb91a7d2a5c8400f0e20.html" target="_blank" rel="external">使用Eclipse创建Maven Web工程</a></p>
<h1 id="所遇到的问题"><a href="#所遇到的问题" class="headerlink" title="所遇到的问题"></a>所遇到的问题</h1><blockquote>
<p>pom.xml报错:<code>web.xml is missing and &lt;failOnMissingWebXml&gt; is set to true</code></p>
</blockquote>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><blockquote>
<p>这时候需要<strong>右击项目——&gt;Java EE Tools——&gt;Generate Deployment Descriptor Stub.然后系统会在src/main/webapp/WEB_INF文件加下创建web.xml文件。</strong>错误解决！<br>当然这个方法是针对web项目的解决方案，如果你的工程不是web项目，那么还有另外一种解决方案，就是在pom文件中配置一下failOnMissingWebXml。具体配置如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">failOnMissingWebXml</span>&gt;</span>false<span class="tag">&lt;/<span class="name">failOnMissingWebXml</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[maven相关参数讲解]]></title>
      <url>https://super3h.me/2017/02/21/maven%E7%9B%B8%E5%85%B3%E5%8F%82%E6%95%B0%E8%AE%B2%E8%A7%A3/</url>
      <content type="html"><![CDATA[<h1 id="maven相关参数"><a href="#maven相关参数" class="headerlink" title="maven相关参数"></a>maven相关参数</h1><ul>
<li><code>groupId:</code>代表组织和整个项目的唯一标志。比如说所有的Maven组件的groupId都是org.apache.maven</li>
<li><code>artifactId:</code>具体项目的名称，它于groupId共同确定一个项目在maven repo中的位置，例如，<em>groupId=org.codehaus.mojo, artifactId=my-project的项目，在maven repo中的位置为：$M2_REPO/org/codehaus/mojo/my-project</em></li>
<li><code>version:</code>用于说明目前项目的版本，在引用依赖的时候确定具体依赖的版本号。</li>
<li><code>packaging:</code> 规定项目的输出格式，包括<code>jar、war、pom、apk</code>等，根据实际需要确定。例如，<em>开发一般的java库，可以使用jar packaging；开发android则是apk packaging。</em></li>
</ul>
<h1 id="例子说明"><a href="#例子说明" class="headerlink" title="例子说明"></a>例子说明</h1><blockquote>
<p>一般来说，Maven肯定要用到pom文件，全名叫<code>Project Object Model</code>。简单的说，就是这个pom.xml文件含有project的相关信息。以下面的pom文件为例，举个简单的例子：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven,apache.org/POM/4.0.0"</span></span></div><div class="line">　　<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3c.org/2001/XMLSchema-instance"</span></div><div class="line">　　<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</div><div class="line">　　<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line">　　<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">　　<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>my-project<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">　　<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">　　<span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>其中，groupId代表的是<code>唯一的一个标识</code>，比如一个组织或者一个项目的名字，基本上是唯一的，以这个maven为例就是org.apache.maven。<br><code>artifactId:</code>代表的是名字，如果刚刚那个有点像身份证，这个就是类似姓名的东西。<br><code>version:</code>比较好理解，就是版本号，比如1.2.1版本这样的。<br>最后的<code>packaging</code>是我们提供组件的类型，比如使用时打包成一个jar或者是一个war之类的，默认为打成jar包。<br><strong>还要注意不得不提到maven的一个插件<code>maven-archetype-plugin</code>。这个插件是为了方便我们弄一些模板或者原型直接生成会更加方便。通过cmd指令，我们可以确定我们需要的是哪个原型</strong><br>cmd的命令的例子:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn archetype:generate -DarchetypeArtifactId=jersey-quickstart-grizzly2 -DarchetypeGroupId=org.glassfish.jersey.archetypes -DinteractiveMode=false -DgroupId=com.example -DartifactId=simple-service -Dpackage=com.example -DarchetypeVersion=2.17</div></pre></td></tr></table></figure></p>
<p><code>archetypeGroupId:</code>这个和刚刚那个很像，指的是原型唯一的标识archetypeArtifactId：原型的名字。<br><code>interactiveMode:</code>交互模式，默认为true。<em>我上面的cmd命令是一次性把该输入的都输入进去了，免去了交互所以是false。如果你选择交互的话，就是有一步一步的选项指引你去选择和填写相关的标识之类的。</em><br><code>archetypeCatalog:</code>这个例子里面没有，指的是查找规则<br>至于后面那些groupId之类的，前面已经说过的就是生成的项目的一些标识名字之类的相关信息，<strong>不过要注意这个package是生成项目的包结构而不是提供组件的类型了</strong></p>
</blockquote>
<h1 id="原文参考"><a href="#原文参考" class="headerlink" title="原文参考"></a>原文参考</h1><p><a href="https://zhidao.baidu.com/question/263104967434409685.html" target="_blank" rel="external">Maven中的参数分别是什么意思？</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[maven依赖机制]]></title>
      <url>https://super3h.me/2017/02/21/maven%E4%BE%9D%E8%B5%96%E6%9C%BA%E5%88%B6/</url>
      <content type="html"><![CDATA[<h1 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h1><blockquote>
<p>让我们看一个案例研究，以了解它是如何工作的。假设你想使用 Log4j 作为项目的日志。这里你要做什么？</p>
</blockquote>
<ol>
<li><p>在传统方式</p>
<ol>
<li>访问<a href="http://logging.apache.org/log4j/" target="_blank" rel="external">http://logging.apache.org/log4j/</a></li>
<li>下载 Log4 j的 jar 库</li>
<li>复制 jar 到项目类路径</li>
<li>手动将其包含到项目的依赖</li>
<li>所有的管理需要一切由自己做</li>
<li>如果有 Log4j 版本升级，则需要重复上述步骤一次</li>
</ol>
</li>
<li><p>在Maven的方式</p>
<ol>
<li><p>你需要知道 log4j 的 Maven 坐标，例如：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>它会自动下载 log4j 的1.2.14 版本库。如果“version”标签被忽略，它会自动升级库时当有新的版本时</p>
</li>
<li><p>声明 Maven 的坐标转换成 pom.xml 文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>当 Maven 编译或构建，log4j 的 jar 会自动下载，并把它放到 Maven 本地存储库</p>
</li>
<li>所有由 Maven 管理</li>
</ol>
</li>
</ol>
<h1 id="解释说明"><a href="#解释说明" class="headerlink" title="解释说明"></a>解释说明</h1><blockquote>
<p>看看有什么不同？那么到底在Maven发生了什么？当建立一个Maven的项目，pom.xml文件将被解析，如果看到 log4j 的 Maven 坐标，然后 Maven 按此顺序搜索 log4j 库：</p>
<pre><code>1. 在 Maven 的本地仓库搜索 log4j 
2. 在 Maven 中央存储库搜索 log4j
3. 在 Maven 远程仓库搜索 log4j(如果在 pom.xml 中定义)
</code></pre><p>Maven 依赖库管理是一个非常好的工具，为您节省了大量的工作<br><code>如何找到 Maven 坐标:</code><strong>访问 Maven 中心储存库，搜索下载您想要的jar。</strong></p>
</blockquote>
<h1 id="原文参考"><a href="#原文参考" class="headerlink" title="原文参考"></a>原文参考</h1><p><a href="http://www.yiibai.com/maven/maven-dependency-to-download-library.html" target="_blank" rel="external">Maven依赖机制</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[maven-定制库到Maven本地资源库]]></title>
      <url>https://super3h.me/2017/02/21/maven-%E5%AE%9A%E5%88%B6%E5%BA%93%E5%88%B0Maven%E6%9C%AC%E5%9C%B0%E8%B5%84%E6%BA%90%E5%BA%93/</url>
      <content type="html"><![CDATA[<h1 id="案例学习"><a href="#案例学习" class="headerlink" title="案例学习"></a>案例学习</h1><blockquote>
<p>kaptcha，它是一个流行的第三方Java库，它被用来生成 “验证码” 的图片，以阻止垃圾邮件，但它不在 Maven 的中央仓库中，这里拿它来举例</p>
</blockquote>
<h1 id="mvn-安装"><a href="#mvn-安装" class="headerlink" title="mvn 安装"></a>mvn 安装</h1><blockquote>
<p>下载 “kaptcha”，将其解压缩并将 kaptcha-version.jar 复制到其他地方，比如：C盘。发出下面的命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn install:install-file -Dfile=c:\kaptcha-&#123;version&#125;.jar -DgroupId=com.google.code -DartifactId=kaptcha -Dversion=&#123;version&#125; -Dpackaging=jar</div></pre></td></tr></table></figure></p>
</blockquote>
<p>示例:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">D:\&gt;mvn install:install-file -Dfile=c:\kaptcha-2.3.jar -DgroupId=com.google.code </div><div class="line">-DartifactId=kaptcha -Dversion=2.3 -Dpackaging=jar</div><div class="line">[INFO] Scanning for projects...</div><div class="line">[INFO] Searching repository for plugin with prefix: &apos;install&apos;.</div><div class="line">[INFO] ------------------------------------------------------------------------</div><div class="line">[INFO] Building Maven Default Project</div><div class="line">[INFO]    task-segment: [install:install-file] (aggregator-style)</div><div class="line">[INFO] ------------------------------------------------------------------------</div><div class="line">[INFO] [install:install-file]</div><div class="line">[INFO] Installing c:\kaptcha-2.3.jar to </div><div class="line">D:\maven_repo\com\google\code\kaptcha\2.3\kaptcha-2.3.jar</div><div class="line">[INFO] ------------------------------------------------------------------------</div><div class="line">[INFO] BUILD SUCCESSFUL</div><div class="line">[INFO] ------------------------------------------------------------------------</div><div class="line">[INFO] Total time: &lt; 1 second</div><div class="line">[INFO] Finished at: Tue May 12 13:41:42 SGT 2014</div><div class="line">[INFO] Final Memory: 3M/6M</div><div class="line">[INFO] ------------------------------------------------------------------------</div></pre></td></tr></table></figure></p>
<blockquote>
<p>“kaptcha” jar被复制到 Maven 本地存储库。</p>
</blockquote>
<h1 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h1><blockquote>
<p>安装完毕后，就在 pom.xml 中声明 kaptcha 的坐标<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>kaptcha<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>构建它，现在 “kaptcha” jar 能够从你的 Maven 本地存储库检索了</p>
</blockquote>
<h1 id="原文参考"><a href="#原文参考" class="headerlink" title="原文参考"></a>原文参考</h1><p><a href="http://www.yiibai.com/maven/include-library-manully-into-maven-local-repository.html" target="_blank" rel="external">定制库到Maven本地资源库</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[maven添加远程仓库]]></title>
      <url>https://super3h.me/2017/02/21/maven%E6%B7%BB%E5%8A%A0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/</url>
      <content type="html"><![CDATA[<h1 id="Java-net资源库"><a href="#Java-net资源库" class="headerlink" title="Java.net资源库"></a>Java.net资源库</h1><blockquote>
<p>添加Java.net远程仓库的详细信息在“pom.xml”文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--pom.xml--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">...</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>java.net<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.java.net/content/repositories/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="JBoss-Maven存储库"><a href="#JBoss-Maven存储库" class="headerlink" title="JBoss Maven存储库"></a>JBoss Maven存储库</h1><blockquote>
<p>添加JBoss远程仓库的详细信息在 “pom.xml” 文件中<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">...</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">id</span>&gt;</span>JBoss repository<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repository.jboss.org/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="原文参考"><a href="#原文参考" class="headerlink" title="原文参考"></a>原文参考</h1><p><a href="http://www.yiibai.com/maven/add-remote-repository-in-maven-pom-xml.html" target="_blank" rel="external">Maven添加远程仓库</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Crawler学习之Regex]]></title>
      <url>https://super3h.me/2017/02/20/Python-Crawler-regex/</url>
      <content type="html"><![CDATA[<h1 id="re-compile-strPattern-flag"><a href="#re-compile-strPattern-flag" class="headerlink" title="re.compile(strPattern[, flag])"></a>re.compile(strPattern[, flag])</h1><blockquote>
<p>这个方法是Pattern类的工厂方法，用于将字符串形式的正则表达式编译为Pattern对象。<br><code>flag:</code>匹配模式，取值可以使用按位或运算符’|’表示同时生效，比如re.I | re.M。<br>另外，你也可以在regex字符串中指定模式，<br><em>比如re.compile(‘pattern’, re.I | re.M)与re.compile(‘(?im)pattern’)是等价的。</em><br>可选值有：</p>
<ul>
<li><code>re.I(全拼：IGNORECASE)</code>: 忽略大小写（括号内是完整写法，下同）</li>
<li><code>re.M(全拼：MULTILINE)</code>: 多行模式，改变’^’和’$’的行为</li>
<li><code>re.S(全拼：DOTALL):</code> 点任意匹配模式，改变’.’的行为</li>
<li><code>re.L(全拼：LOCALE):</code> 使预定字符类 \w \W \b \B \s \S 取决于当前区域设定</li>
<li><code>re.U(全拼：UNICODE):</code> 使预定字符类 \w \W \b \B \s \S \d \D 取决于unicode定义的字符属性</li>
<li><code>re.X(全拼：VERBOSE):</code> 详细模式。这个模式下正则表达式可以是多行，忽略空白字符，并可以加入注释。</li>
</ul>
</blockquote>
<h1 id="findall"><a href="#findall" class="headerlink" title="findall"></a>findall</h1><ul>
<li>当给出的正则表达式中带有多个括号时，<strong>列表的元素为多个字符串组成的tuple，tuple中字符串个数与括号对数相同</strong>，字符串内容与每个括号内的正则表达式相对应，并且排放顺序是按括号出现的顺序</li>
<li>当给出的正则表达式中带有一个括号时，<strong>列表的元素为字符串，此字符串的内容与括号中的正则表达式相对应（不是整个正则表达式的匹配内容）</strong></li>
<li>当给出的正则表达式中不带括号时，<strong>列表的元素为字符串，此字符串为整个正则表达式匹配的内容。</strong><blockquote>
<p>例子如下:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">"adfad asdfasdf asdfas asdfawef asd adsfas "</span>  </div><div class="line">  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reObj1 = re.compile(<span class="string">'((\w+)\s+\w+)'</span>)  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reObj1.findall(s)  </div><div class="line">[(<span class="string">'adfad asdfasdf'</span>, <span class="string">'adfad'</span>), (<span class="string">'asdfas asdfawef'</span>, <span class="string">'asdfas'</span>), (<span class="string">'asd adsfas'</span>, <span class="string">'asd'</span>)]  </div><div class="line">  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reObj2 = re.compile(<span class="string">'(\w+)\s+\w+'</span>)  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reObj2.findall(s)  </div><div class="line">[<span class="string">'adfad'</span>, <span class="string">'asdfas'</span>, <span class="string">'asd'</span>]  </div><div class="line">  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reObj3 = re.compile(<span class="string">'\w+\s+\w+'</span>)  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reObj3.findall(s)  </div><div class="line">[<span class="string">'adfad asdfasdf'</span>, <span class="string">'asdfas asdfawef'</span>, <span class="string">'asd adsfas'</span>]</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<blockquote>
<p>详情参考<a href="http://blog.csdn.net/cashey1991/article/details/8875213" target="_blank" rel="external">python re 模块 findall 函数用法简述 </a></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[struts和ajax结合]]></title>
      <url>https://super3h.me/2017/02/20/J2EE-sh_Ajax/</url>
      <content type="html"><![CDATA[<h1 id="项目想法"><a href="#项目想法" class="headerlink" title="项目想法"></a>项目想法</h1><blockquote>
<p>这里接着上回用servlet和ajax结合，换成用<code>struts2和hibernate</code>框架生成。</p>
</blockquote>
<h1 id="项目过程"><a href="#项目过程" class="headerlink" title="项目过程"></a>项目过程</h1><blockquote>
<p>这里介绍点我用框架所遇到的问题</p>
</blockquote>
<h2 id="导入包的问题"><a href="#导入包的问题" class="headerlink" title="导入包的问题"></a>导入包的问题</h2><blockquote>
<p>除了struts基本包，hibernate必须包之外，还需加以下包</p>
</blockquote>
<p><img src="/2017/02/20/J2EE-sh_Ajax/1.png" alt=""></p>
<blockquote>
<p>这里列出我所用的所有包</p>
</blockquote>
<p><img src="/2017/02/20/J2EE-sh_Ajax/2.png" alt=""></p>
<h2 id="相对绝对路径问题解决"><a href="#相对绝对路径问题解决" class="headerlink" title="相对绝对路径问题解决"></a>相对绝对路径问题解决</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--采用struts标签来替代--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">s:url</span> <span class="attr">action</span>=<span class="string">'weibo_showImg'</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">s:param</span> <span class="attr">name</span>=<span class="string">'id'</span> <span class="attr">value</span>=<span class="string">'#weibo.id'</span>&gt;</span><span class="tag">&lt;/<span class="name">s:param</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">s:url</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="struts配置问题"><a href="#struts配置问题" class="headerlink" title="struts配置问题"></a>struts配置问题</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"weibo"</span> <span class="attr">extends</span>=<span class="string">"json-default"</span> <span class="attr">namespace</span>=<span class="string">"/"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"weibo_*"</span> <span class="attr">class</span>=<span class="string">"hhh.controller.WeiboAction"</span> <span class="attr">method</span>=<span class="string">"&#123;1&#125;"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"toIndex"</span>&gt;</span>/index.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"publish"</span>&gt;</span>/WEB-INF/jsp/publish.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"toList"</span>&gt;</span>/WEB-INF/jsp/list.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span> <span class="attr">type</span>=<span class="string">"json"</span>&gt;</span></div><div class="line">                <span class="comment">&lt;!--必须加这一句--&gt;</span></div><div class="line">            	<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"root"</span>&gt;</span>postData<span class="tag">&lt;/<span class="name">param</span>&gt;</span> </div><div class="line">            <span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">allowed-methods</span>&gt;</span>success,publishUI,listAirticle,publish,showImg<span class="tag">&lt;/<span class="name">allowed-methods</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">package</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>博主一开始没有加这一句<code>&lt;param name=&quot;root&quot;&gt;postData&lt;/param&gt;</code>，导致各种找，终于不负辛苦，找到了，这里贴出<code>action</code>中的代码：<br>注意:<font color="red"><strong>postData为发送的数据，必须要含有getter和setter方法</strong></font></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//postData的setter和getter方法(其实只含有getter方法即可，因为页面需要获取值只需要getter方法，二后台获取前台来的值则需要色setter方法，需要什么添加什么，不要一股脑吧所有东西全加进去)</span></div><div class="line"><span class="keyword">private</span> String postData;</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getPostData</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> postData;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPostData</span><span class="params">(String postData)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.postData = postData;</div><div class="line">	&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">listAirticle</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">if</span>(<span class="string">"post"</span>.equals(way))&#123;</div><div class="line">			currentPage += postTime;</div><div class="line">			Page page = service.listAirticle(currentPage);</div><div class="line">			postData = JSONArray.fromObject(page.getRecords()).toString();</div><div class="line">			setPostData(postData);</div><div class="line">			System.out.println(postData);<span class="comment">//打印转换成json的数据</span></div><div class="line">			<span class="keyword">return</span> SUCCESS;</div><div class="line">		&#125;<span class="keyword">else</span>&#123;</div><div class="line">			Page page = service.listAirticle(currentPage);</div><div class="line">			ActionContext.getContext().put(<span class="string">"weibos"</span>, page.getRecords());</div><div class="line">			<span class="keyword">return</span> <span class="string">"toList"</span>;</div><div class="line">		&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>本来想在这</p>
<h1 id="调试所报的异常"><a href="#调试所报的异常" class="headerlink" title="调试所报的异常"></a>调试所报的异常</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">commons-beanutils-1.8.0.jar不加这个包 </div><div class="line">java.lang.NoClassDefFoundError: org/apache/commons/beanutils/DynaBean </div><div class="line">commons-collections.jar 不加这个包 </div><div class="line">java.lang.NoClassDefFoundError: org/apache/commons/collections/map/ListOrderedMap</div><div class="line">commons-lang-2.4.jar不加这个包 </div><div class="line">java.lang.NoClassDefFoundError: org/apache/commons/lang/exception/NestableRuntimeException</div><div class="line">commons-logging-1.1.1.jar不加这个包 </div><div class="line">java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory </div><div class="line">ezmorph-1.0.4.jar不加这个包 </div><div class="line">java.lang.NoClassDefFoundError: net/sf/ezmorph/Morpher </div><div class="line">json-lib-2.3-jdk15.jar不加这个包 </div><div class="line">java.lang.NoClassDefFoundError: net/sf/json/JSONObject</div></pre></td></tr></table></figure>
<p>更详细请参考原文<a href="http://blog.csdn.net/zenson_g/article/details/8491436" target="_blank" rel="external">java转换json需要导入的jar包，org/apache/commons/lang/exception/NestableRuntimeException</a><br>报异常:<code>There is no result type defined for type &#39;json&#39; mapped with name &#39;success&#39;.</code><br>首先要检查 是否有<code>json-lib-2.3-jdk15.jar</code>和<code>struts2-json-plugin-2.3.4.1.jar</code>两个包<br>如果还报错，那就是<code>struts.xml</code>配置问题，将<code>&lt;package中的 extends=&quot;struts-default&quot;</code>为 <code>extends=&quot;json-default&quot;</code><br>更详细内容请参考<a href="http://blog.csdn.net/zzq900503/article/details/34946691" target="_blank" rel="external">SSH搭建遇到的问题—There is no result type defined for type ‘json’ mapped with name ‘success’.</a></p>
</blockquote>
<h2 id="hibernate分页"><a href="#hibernate分页" class="headerlink" title="hibernate分页"></a>hibernate分页</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">String hql=<span class="string">"select eage from Emp order by eage"</span>;                          </div><div class="line">Query query= session. createQuery(hql). setFirstResult(<span class="number">0</span>). setMaxResults(<span class="number">5</span>);  <span class="comment">//从0开始，现实5条数据</span></div></pre></td></tr></table></figure>
<blockquote>
<p>更详细请参考原文<a href="http://blog.csdn.net/pkgk2013/article/details/51922872" target="_blank" rel="external">web开发（九）之Hibernate分页查询</a></p>
</blockquote>
<h1 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h1><blockquote>
<p>源码请参考<a href="https://github.com/super3H/AjaxTest/tree/master/Struts-hibernate-test" target="_blank" rel="external">AjaxTest/Struts-hibernate-test/</a>，欢迎订阅。</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[js相关问题]]></title>
      <url>https://super3h.me/2017/02/19/js%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h1 id="闭包考察"><a href="#闭包考察" class="headerlink" title="闭包考察"></a>闭包考察</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//输出结果？？如何让其恢复正常</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; ++i) &#123;</div><div class="line">    setTimeout( <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log( i );</div><div class="line">    &#125;,<span class="number">1000</span> );</div><div class="line">&#125;</div><div class="line"><span class="comment">//</span></div></pre></td></tr></table></figure>
<blockquote>
<p>解决方案:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//第一种</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">9</span>; i++) &#123;</div><div class="line"> (<span class="function"><span class="keyword">function</span>(<span class="params">j</span>)</span>&#123;</div><div class="line">     setTimeout( <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>)</span>&#123;</div><div class="line">         <span class="built_in">console</span>.log( j );</div><div class="line">     &#125;, <span class="number">1000</span> );</div><div class="line"> &#125;)( i );</div><div class="line">&#125;</div><div class="line"><span class="comment">//第二种</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">9</span>; i++) &#123;</div><div class="line"> (<span class="function"><span class="keyword">function</span>(<span class="params">j</span>)</span>&#123;</div><div class="line">     setTimeout( <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>)</span>&#123;</div><div class="line">         <span class="built_in">console</span>.log( j );</div><div class="line">     &#125;, <span class="number">1000</span> );</div><div class="line"> &#125;)( i );</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>原因解释：这两种方法都不是解决异步问题的，而是解决变量作用域的问题的。<br><strong>因为函数 timer() 属于一个新的域，通过 var 定义的变量是无法传入到这个函数执行域中的，于是有了你展示的两种解决办法，第一种是通过使用 let 来声明块变量，这时候变量就能作用于这个块，所以 timer 就能使用 i 这个变量了。第二种是通过传入参数，间接的把变量传入到 timer 中。</strong><br>关于<code>var</code>和<code>let</code>的介绍:<a href="http://blog.csdn.net/nfer_zhuang/article/details/48781671" target="_blank" rel="external">js中let和var定义变量的区别</a></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[VueJs学习]]></title>
      <url>https://super3h.me/2017/02/17/VueJs/</url>
      <content type="html"><![CDATA[<h1 id="vue初学"><a href="#vue初学" class="headerlink" title="vue初学"></a>vue初学</h1><h2 id="v-if和v-show区别"><a href="#v-if和v-show区别" class="headerlink" title="v-if和v-show区别"></a>v-if和v-show区别</h2><ul>
<li><code>v-if:</code>表达式为false时，<strong>对应的元素将被删除</strong></li>
<li><code>v-show:</code>表达式为false时,<strong>对应的元素的属性<code>display</code>被置为<code>false</code></strong><blockquote>
<p><code>v-else</code>:v-else元素必须立即跟在v-if或v-show元素的后面，否则它不能被识别。<strong>v-else元素是否渲染在HTML中，取决于前面使用的是v-if还是v-show指令。</strong></p>
</blockquote>
</li>
</ul>
<h2 id="v-for-Cannot-use-v-for-on-stateful-component-root-element"><a href="#v-for-Cannot-use-v-for-on-stateful-component-root-element" class="headerlink" title="v-for:Cannot use v-for on stateful component root element"></a>v-for:Cannot use v-for on stateful component root element</h2><p><code>问题原因:</code> v-for不能用于根元素（root element）。因为v-for是个循环，它返回更多的元素。导致无法渲染，例子如下:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	   <span class="comment">&lt;!--v-for必须在#el的内部才行--&gt;</span></div><div class="line">	   <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"el"</span> <span class="attr">v-for</span>=<span class="string">"p in ps"</span>&gt;</span>&#123;&#123;p&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	   <span class="comment">&lt;!--以下为正确的写法--&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"el"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"p in ps"</span>&gt;</span>&#123;&#123;p&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">        <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</div><div class="line">        	<span class="attr">el</span>:<span class="string">"#el"</span>,</div><div class="line">        	<span class="attr">data</span>:&#123;</div><div class="line">        		<span class="attr">ps</span>:[<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>]</div><div class="line">        	&#125;</div><div class="line">        &#125;)	</div><div class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>vue.js2.0改版如下:<br>数组:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">value <span class="keyword">in</span> arr</div><div class="line">(value, index) <span class="keyword">in</span> arr</div></pre></td></tr></table></figure></p>
<p>json对象语法:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">value <span class="keyword">in</span> obj (value, key) <span class="keyword">in</span> obj</div><div class="line">(value, key, index) <span class="keyword">in</span> obj</div></pre></td></tr></table></figure></p>
<p>写事件时,如<code>@click=&quot;delete(index)</code>，会导致点击事件加载不了，因为vue本身就含有此方法名，换成<code>deleteElement</code>即可</p>
</blockquote>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="http://www.cnblogs.com/keepfool/p/5619070.html" target="_blank" rel="external">Vue.js——60分钟快速入门</a></p>
<h1 id="vue深度学习"><a href="#vue深度学习" class="headerlink" title="vue深度学习"></a>vue深度学习</h1><h2 id="v-model的作用"><a href="#v-model的作用" class="headerlink" title="v-model的作用"></a>v-model的作用</h2><blockquote>
<p>例子如下(这列只截取一小段代码):</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"name"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">		<span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</div><div class="line">			<span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">			<span class="attr">data</span>: &#123;</div><div class="line">				<span class="attr">name</span>:<span class="string">'HHH'</span></div><div class="line">			&#125;</div><div class="line">		&#125;)</div><div class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><code>v-model=name</code>指从<code>data</code>中去的<code>name</code>的值，<font color="#80D63F"><strong>相当于value=’HHH’,但如果<code>v-model</code>和value同时存在,<code>v-model</code>会覆盖value的值，因为<code>v-model</code>为动态绑定！！</strong></font><br>如果<code>type=hidden</code>了:</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'hidden'</span> <span class="attr">v-model</span>=<span class="string">'cid'</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>注意:本来想通过以上方式传id到后台,结果发现这样<font color="#C53D17"><strong>会导致值传不到后台！！</strong></font><br>v-model貌似不能访问json对象，例如<code>v-model=&#39;message.value&#39;</code></p>
</blockquote>
<h2 id="事件的传参"><a href="#事件的传参" class="headerlink" title="事件的传参"></a>事件的传参</h2><blockquote>
<p>例如:</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">el-select</span> <span class="attr">palaceholder</span>=<span class="string">"请选择"</span> <span class="attr">v-model</span>=<span class="string">"value"</span> @<span class="attr">change</span>=<span class="string">"changeSchool(value)"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">el-option</span> <span class="attr">v-for</span>=<span class="string">"item in options"</span> <span class="attr">:value</span>=<span class="string">"item.value"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><font color="#48B456">这里用的是<a href="">ElementUI</a>，详情参看ElementUI 学习这一章</font></p>
<p><font color="#820082">当下拉框的值改变时触发<code>changeSchool</code>函数并且将<code>v-model</code>中绑定的<code>value</code>传进去！！！</font><br>如果要将<code>v-model</code>的值传给属性(比如说:name等),可以这样写:</p>
</blockquote>
<p>``` html<br><!-- :和v-bind等同 --></p>
<input type="text" v-model="message" :name="message" value="asd">]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Servlet与ajax结合]]></title>
      <url>https://super3h.me/2017/02/17/J2EE-Servlet_Ajax/</url>
      <content type="html"><![CDATA[<h1 id="项目想法"><a href="#项目想法" class="headerlink" title="项目想法"></a>项目想法</h1><blockquote>
<p>由于老是逛微博，发现每到滑轮到底时就会刷新数据，今天刚好有时间，就自己尝试了一下，由于三大框架还不太熟，所以用的是servlet。后期改成ssh。</p>
</blockquote>
<h1 id="项目过程"><a href="#项目过程" class="headerlink" title="项目过程"></a>项目过程</h1><blockquote>
<p>由于这是一个小项目，就讲下自己所遇到的问题吧。</p>
<h2 id="滑轮触发事件"><a href="#滑轮触发事件" class="headerlink" title="滑轮触发事件"></a>滑轮触发事件</h2><p><code>首先:</code>从前台开始分析，滑轮滚到底会触发一个事件，代码如下:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$().ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	$(<span class="built_in">window</span>).bind(<span class="string">"scroll"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> $height = $(<span class="keyword">this</span>).height();<span class="comment">//可见高度</span></div><div class="line">	<span class="keyword">var</span> $contentH = $(<span class="built_in">document</span>).height();<span class="comment">//内容高度</span></div><div class="line">	<span class="keyword">var</span> $scrollTop = $(<span class="keyword">this</span>).scrollTop();<span class="comment">//滚动的高度</span></div><div class="line">	<span class="keyword">if</span>(($scrollTop+$height)==$contentH)&#123;</div><div class="line">		  <span class="comment">//加载数据</span></div><div class="line">		&#125;</div><div class="line">	&#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p><code>滚动高度+可见的高度=内容的高度</code>；本代码是滚轮划到底部时才触发的事件，也可以设置一个范围，将<code>if</code>里的内容改成如下代码：<code>$scrollTop/($contentH-$height)&gt;0.95</code></p>
</blockquote>
<h2 id="Ajax加载数据"><a href="#Ajax加载数据" class="headerlink" title="Ajax加载数据"></a>Ajax加载数据</h2><blockquote>
<p>由于本项目比较简单，就采用了<code>$.post</code>就行了，这里简单介绍一下<code>$.post</code>和<code>$.ajax</code>的区别<br><code>$.post(url, [data], [callback], [type]):</code>这是一个简单的 POST 请求功能以取代复杂 <code>$.ajax</code> 。请求成功时可调用回调函数。如果需要在出错时执行函数，请使用 <code>$.ajax</code>。</p>
<pre><code>- `url:`发送请求地址
- `data:`待发送 Key/value 参数
- `callback:`发送成功时回调函数
- `type:`返回内容格式，xml, html, script, json, text, _default.
</code></pre><p><code>$.aajax([options]):</code>jQuery 底层 AJAX 实现。简单易用的高层实现见 $.get, $.post 等。$.ajax() 返回其创建的 <code>XMLHttpRequest</code> 对象。大多数情况下你无需直接操作该函数，除非你需要操作不常用的选项，以获得更多的灵活性。 具体请自行百度。</p>
</blockquote>
<h2 id="具体代码"><a href="#具体代码" class="headerlink" title="具体代码"></a>具体代码</h2><blockquote>
<p>以下ajax代码添加在滑轮触发事件的if内部;<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$.post(<span class="string">"$&#123;pageContext.request.contextPath&#125;/clientServlet"</span>,&#123;</div><div class="line">				<span class="comment">//待发送的参数</span></div><div class="line">			&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">				    <span class="comment">//成功后执行的代码</span></div><div class="line">				&#125;)</div><div class="line">			&#125;)</div></pre></td></tr></table></figure></p>
<p>本例中时候向<code>clientServlet</code>发送数据<br>接下来是<code>servlet</code>内的代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">resp.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</div><div class="line">		PrintWriter out = resp.getWriter();</div><div class="line">		String way = req.getParameter(<span class="string">"way"</span>);</div><div class="line">		<span class="keyword">int</span> page;</div><div class="line">		<span class="keyword">if</span>(req.getParameter(<span class="string">"page"</span>)==<span class="keyword">null</span>||<span class="string">""</span>.equals(req.getParameter(<span class="string">"page"</span>)))</div><div class="line">			page = <span class="number">1</span>;</div><div class="line">		<span class="keyword">else</span> page = Integer.parseInt(req.getParameter(<span class="string">"page"</span>));</div><div class="line">		<span class="comment">//准备要显示的数据</span></div><div class="line">		Page p = service.listAirticle(page);</div><div class="line">		<span class="keyword">if</span>(<span class="string">"post"</span>.equals(way))&#123;</div><div class="line">			List&lt;Weibo&gt; weibos = p.getRecords();</div><div class="line">			<span class="comment">//<span class="doctag">TODO:</span>weibos为null？？</span></div><div class="line">			out.println(<span class="string">"&#123;weibos:"</span>+JsonParse.parse(weibos)+<span class="string">"&#125;"</span>);</div><div class="line">			out.close();</div><div class="line">		&#125;<span class="keyword">else</span> &#123;</div><div class="line">			req.setAttribute(<span class="string">"page"</span>, p);</div><div class="line">			req.getRequestDispatcher(<span class="string">"/WEB-INF/jsp/list.jsp"</span>).forward(req, resp);</div><div class="line">		&#125;</div></pre></td></tr></table></figure></p>
<p>本来以为这样就可以不用分页了，天真的我发现不用分页不行呐。。这里解释一下思路:每到滑轮滚到底部时，触发ajax事件，同时把当前页加1，此时servlet负责查询下一页数据，并<code>out.println</code>，也就是写给<code>ajax</code>里的data,注意:<strong>写过去的时候为json格式，但data里的为字符串</strong>，需要将字符串转换成<code>json</code>格式，下面会讲</p>
</blockquote>
<h1 id="项目所遇问题"><a href="#项目所遇问题" class="headerlink" title="项目所遇问题"></a>项目所遇问题</h1><ul>
<li>图片显示:<a href="https://super3h.me/2017/02/15/J2EE-%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA/">浏览器中显示图片</a></li>
<li>json转为字符串:<br>1、eval方式解析<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">strToJson</span>(<span class="params">str</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> json = <span class="built_in">eval</span>(<span class="string">'('</span> + str + <span class="string">')'</span>);</div><div class="line">    <span class="keyword">return</span> json;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>2、new Function形式，比较怪异哦<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">strToJson</span>(<span class="params">str</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> json = (<span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"return "</span> + str))();</div><div class="line">    <span class="keyword">return</span> json;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3、使用全局的JSON对象<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> str = <span class="string">'&#123;"name":"jack"&#125;'</span>;</div><div class="line"><span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(str);</div></pre></td></tr></table></figure></p>
<p>注意:<strong>这里必须采用严格的json格式，name一定要用引号引起来，否则解析失败</strong><br>详细可参考<a href="http://www.jb51.net/article/25987.htm" target="_blank" rel="external">js中将字符串转换成json的三种方式</a></p>
<ul>
<li>foreach的运用方法:<a href="http://www.jb51.net/article/81955.htm" target="_blank" rel="external">JS中的forEach、$.each、map方法推荐</a></li>
<li>Jquery中添加元素方法中:append()和after(),prepend()和before()的区别:<ul>
<li><code>append</code>和<code>prepend</code>是指在元素内部添加而<code>after</code>和<code>before</code>是指在元素外添加，代码解释如下:<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 此为在元素内部 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>This is a paragraph. <span class="tag">&lt;<span class="name">b</span>&gt;</span>Appended text<span class="tag">&lt;/<span class="name">b</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 此为在元素外部 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>This is a paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="tag">&lt;<span class="name">b</span>&gt;</span>Appended text<span class="tag">&lt;/<span class="name">b</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h1 id="源码如下"><a href="#源码如下" class="headerlink" title="源码如下"></a>源码如下</h1><ul>
<li>js完整代码如下:<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">$().ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> x = <span class="number">0</span>;</div><div class="line">	<span class="keyword">var</span> page = $&#123;page.page&#125;;</div><div class="line">	$(<span class="built_in">window</span>).bind(<span class="string">"scroll"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> $height = $(<span class="keyword">this</span>).height();<span class="comment">//可见高度</span></div><div class="line">	<span class="keyword">var</span> $contentH = $(<span class="built_in">document</span>).height();<span class="comment">//内容高度</span></div><div class="line">	<span class="keyword">var</span> $scrollTop = $(<span class="keyword">this</span>).scrollTop();<span class="comment">//滚动的高度</span></div><div class="line">	<span class="keyword">if</span>(($scrollTop+$height)==$contentH)&#123;</div><div class="line">		x += <span class="number">1</span>;</div><div class="line">		$.post(<span class="string">"$&#123;pageContext.request.contextPath&#125;/clientServlet"</span>,&#123;</div><div class="line">				<span class="attr">operation</span>:<span class="string">"listAirticle"</span>,</div><div class="line">				<span class="attr">way</span>:<span class="string">"post"</span>,</div><div class="line">				<span class="comment">//每次滑轮拖到底部，当前页面就加1，直到无内容显示</span></div><div class="line">				page:page+x</div><div class="line">			&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">				<span class="keyword">var</span> dataJson = <span class="built_in">eval</span>(<span class="string">"("</span>+data+<span class="string">")"</span>);</div><div class="line">				dataJson.weibos.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</div><div class="line">					<span class="keyword">var</span> $p = <span class="string">"&lt;p&gt;"</span>+value.airticle+<span class="string">"&lt;/p&gt;"</span>;</div><div class="line">					<span class="keyword">var</span> $img = <span class="string">"&lt;img width='200px' height='100px' src='http://localhost:8080$&#123;pageContext.request.contextPath&#125;/clientServlet?showImg="</span>+value.filename+<span class="string">"&amp;operation=showImg&amp;id="</span>+value.id+<span class="string">"' /&gt;"</span>;</div><div class="line">					$(<span class="string">"body"</span>).append($p);</div><div class="line">					$(<span class="string">"body"</span>).append($img);</div><div class="line">				&#125;)</div><div class="line">			&#125;)</div><div class="line">		&#125;</div><div class="line">	&#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>更详细内容，请参考<a href="https://github.com/super3H/AjaxTest/tree/master/AjaxTest" target="_blank" rel="external">AjaxTest</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Jquery判断滚动条到底部]]></title>
      <url>https://super3h.me/2017/02/16/JQuery-scroll/</url>
      <content type="html"><![CDATA[<h1 id="属性解释"><a href="#属性解释" class="headerlink" title="属性解释"></a>属性解释</h1><p><code>scrollTop:</code>为滚动条在Y轴上的滚动距离<br><code>clientHeight:</code>为内容可视区域的高度。<br><code>scrollHeight:</code>为内容可视区域的高度加上溢出（滚动）的距离。<br><code>关系:</code>clientHeight+scrollTop=scrollHeight</p>
<h1 id="代码详情"><a href="#代码详情" class="headerlink" title="代码详情"></a>代码详情</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">	$().ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  			<span class="comment">//窗体为window时</span></div><div class="line">		$(<span class="built_in">window</span>).bind(<span class="string">"scroll"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> $height = $(<span class="keyword">this</span>).height();<span class="comment">//可见高度</span></div><div class="line">		<span class="keyword">var</span> $contentH = $(<span class="built_in">document</span>).height();<span class="comment">//内容高度</span></div><div class="line">		<span class="keyword">var</span> $scrollTop = $(<span class="keyword">this</span>).scrollTop();<span class="comment">//滚动的高度</span></div><div class="line">		<span class="comment">//当</span></div><div class="line">		<span class="keyword">if</span>(($scrollTop/($contentH-$height))&gt;<span class="number">0.95</span>)&#123;</div><div class="line">			alert(<span class="string">"加载数据"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<blockquote>
<p>分清滚轮滚动属于哪一块，然后给那一块绑定，本文中为window</p>
</blockquote>
<h1 id="原文参考"><a href="#原文参考" class="headerlink" title="原文参考"></a>原文参考</h1><p><a href="http://www.jb51.net/article/42744.htm" target="_blank" rel="external">判断滚动条到底部的JS代码</a><br><a href="http://www.jb51.net/article/58688.htm" target="_blank" rel="external">JS实现判断滚动条滚到页面底部并执行事件的方法</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[J2EE-浏览器中显示图片]]></title>
      <url>https://super3h.me/2017/02/15/J2EE-%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA/</url>
      <content type="html"><![CDATA[<h1 id="servlet中的显示图片"><a href="#servlet中的显示图片" class="headerlink" title="servlet中的显示图片"></a>servlet中的显示图片</h1><h2 id="前端改法"><a href="#前端改法" class="headerlink" title="前端改法"></a>前端改法</h2><blockquote>
<p>Jsp中改法如下:<br><figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;img  src=<span class="string">"$&#123;pageContext.request.contextPath&#125;/clientServlet?operation=showImg"</span> /&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="后台改法"><a href="#后台改法" class="headerlink" title="后台改法"></a>后台改法</h2><blockquote>
<p><code>Servlet</code>改法如下:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showImg</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> </span>&#123;</div><div class="line">		String showImg = req.getParameter(<span class="string">"showImg"</span>);</div><div class="line">		String storePath = getPath(req, resp);<span class="comment">//拿到</span></div><div class="line">根路径		<span class="keyword">try</span>&#123;</div><div class="line">			InputStream in = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(storePath+<span class="string">"\\"</span>+showImg));</div><div class="line">			OutputStream out = resp.getOutputStream();</div><div class="line">			<span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">			<span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line">			<span class="keyword">while</span>((len = in.read(b))!=-<span class="number">1</span>)&#123;</div><div class="line">				out.write(b, <span class="number">0</span>, len);</div><div class="line">				out.flush();</div><div class="line">			&#125;</div><div class="line">			out.close();</div><div class="line">			in.close();</div><div class="line">		&#125;<span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="详细内容"><a href="#详细内容" class="headerlink" title="详细内容"></a>详细内容</h2><p>请参考<a href="http://blog.csdn.net/woshixuye/article/details/19084501" target="_blank" rel="external">JavaWeb将图片显示在浏览器中</a></p>
<h1 id="struts2框架中的配置"><a href="#struts2框架中的配置" class="headerlink" title="struts2框架中的配置"></a>struts2框架中的配置</h1><h2 id="前端改法-1"><a href="#前端改法-1" class="headerlink" title="前端改法"></a>前端改法</h2><blockquote>
<p>Jsp中改法如下:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"200px"</span> <span class="attr">height</span>=<span class="string">"100px"</span></span></div><div class="line">				<span class="attr">src</span>=<span class="string">"&lt;s:url action='weibo_showImg'&gt;</span></div><div class="line">					&lt;s:param name='id' value='#weibo.id'&gt;&lt;/s:param&gt;</div><div class="line">				&lt;/s:url&gt;" /&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="后台改法-1"><a href="#后台改法-1" class="headerlink" title="后台改法"></a>后台改法</h2><blockquote>
<p><code>action</code>中改法如下:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">showImg</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</div><div class="line">		Weibo weibo = service.findWeiboById(model.getId());</div><div class="line">		OutputStream out = ServletActionContext.getResponse().getOutputStream();</div><div class="line">		InputStream in = <span class="keyword">new</span> FileInputStream(getFilePath(weibo.getPath(), weibo.getFileName()));</div><div class="line">		<span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">		<span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span>((len=in.read(b))!=-<span class="number">1</span>)&#123;</div><div class="line">			out.write(b,<span class="number">0</span>,len);</div><div class="line">		&#125;</div><div class="line">		out.close();</div><div class="line">		in.close();</div><div class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p><code>注意:此方法必须放回null</code><br><code>struts.xml</code>配置:<code>&lt;action name=&quot;访问action名&quot; class=&quot;action类名&quot; method=&quot;viewImages&quot;&gt;&lt;/action&gt;</code><br>Jsp配置格式:<code>&lt;img alt=&quot;显示图片&quot; src=&quot;&lt;s:url action=&#39;访问action名&#39;&gt;&lt;s:param name=&#39;向action传递参数名&#39; value=&#39;参数值&#39;&gt;&lt;/s:param&gt;&lt;/s:url&gt;&quot;&gt;&lt;/img&gt;</code></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[struts2.xml报There is no Action mapped]]></title>
      <url>https://super3h.me/2017/02/13/J2EE-Struts2_xml/</url>
      <content type="html"><![CDATA[<h1 id="错误提示"><a href="#错误提示" class="headerlink" title="错误提示"></a>错误提示</h1><blockquote>
<p>报以下错误:</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">There is no Action mapped <span class="keyword">for</span> namespace [/] and action name [test] associated with context path [/test]. - [unknown location]</div></pre></td></tr></table></figure>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><ol>
<li>确保<code>struts.xml</code>文件名大小写正确：struts.xml</li>
<li>确保struts.xml文件在<code>src</code>目录下,<strong>编译成功后，要确认是否编译到classes目录中</strong>项目右键 -&gt;properties -&gt;Java Build Path -&gt;source -&gt;Default output folder，选择你的路径。(<code>也可以在新建项目时选择,如图：</code>)<img src="/2017/02/13/J2EE-Struts2_xml/1.png" alt=""></li>
<li>先排查访问的链接有没有问题（细节问题）</li>
<li>查看struts.xml的配置（仔细排查，出现问题几率很大）</li>
<li>查看结果响应页面是否存在问题（出现问题的几率比较小）</li>
</ol>
<blockquote>
<p>如果上面的四个步骤没出问题，可是还是报错，怎么办？<br>在<code>struts2.5.2</code>中添加如下配置<code>&lt;constant name=&quot;struts.enable.DynamicMethodInvocation&quot; value=&quot;false&quot; /&gt;</code></p>
<ul>
<li>当使用动态调用方法时（action名 + 感叹号 + 方法名进行方法调用），需要将其属性改为<code>true</code>，</li>
<li>当使用通配符调用语法时，建议将其属性改为false（struts2.5.2中默认是<code>false</code>）</li>
</ul>
<p>但在struts2.5.5中不行了，没错，博主用的就是2.5.5的，花了我一下午，心累。改法如下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--这一句必须添加--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.enable.DynamicMethodInvocation"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"test"</span> <span class="attr">namespace</span>=<span class="string">"/test"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"test_*"</span> <span class="attr">class</span>=<span class="string">"test.controller.TestAction"</span></span></div><div class="line">			<span class="attr">method</span>=<span class="string">"&#123;1&#125;"</span>&gt;</div><div class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/index.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line">			<span class="comment">&lt;!--还有这一句，success为TestAction中的方法名--&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">allowed-methods</span>&gt;</span>success<span class="tag">&lt;/<span class="name">allowed-methods</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">action</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">package</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>说明:</code>在struts2.3之前的版本，正常的配置就可以了，但在struts2.3版本之后，使用通配符调用方法时，内部会验证是否允许访问该方法，所以要加上<br><code>用法如下:</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">allowed-methods</span>&gt;</span>方法名1，方法名2…<span class="tag">&lt;/<span class="name">allowed-methods</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>struts.xml配置：</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">struts</span>&gt;</span>  </div><div class="line">    <span class="comment">&lt;!-- 指定默认编码集 --&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.i18n.encoding"</span> <span class="attr">value</span>=<span class="string">"UTF-8"</span>&gt;</span><span class="tag">&lt;/<span class="name">constant</span>&gt;</span>  </div><div class="line">    <span class="comment">&lt;!-- 指定需要Struts2处理的请求后缀 --&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.action.extension"</span> <span class="attr">value</span>=<span class="string">"do,action"</span>&gt;</span><span class="tag">&lt;/<span class="name">constant</span>&gt;</span>  </div><div class="line">    <span class="comment">&lt;!-- 设置浏览器是否缓存静态内容，开发阶段应关闭，生产阶段打开，默认为打开 --&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.serve.static.browserCache"</span> <span class="attr">value</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">constant</span>&gt;</span>  </div><div class="line">    <span class="comment">&lt;!-- 当struts的配置文件修改后，系统是否自动重新加载该文件，默认为false，开发阶段应打开 --&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.configuration.xml.reload"</span> <span class="attr">value</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">constant</span>&gt;</span>  </div><div class="line">    <span class="comment">&lt;!-- 开发模式下使用，可以打印出更详细的错误信息 --&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.devMode"</span> <span class="attr">value</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">constant</span>&gt;</span>  </div><div class="line">    <span class="comment">&lt;!-- action全部用注解进行配置 --&gt;</span>  </div><div class="line">  </div><div class="line">    <span class="comment">&lt;!-- 是否开启动态方法调用 --&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.enable.DynamicMethodInvocation"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span>  </div><div class="line">    <span class="comment">&lt;!--添加包 --&gt;</span>  </div><div class="line">     <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"weibo"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span> <span class="attr">namespace</span>=<span class="string">"/"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"weibo_*"</span> <span class="attr">class</span>=<span class="string">"hhh.controller.WeiboAction"</span> <span class="attr">method</span>=<span class="string">"&#123;1&#125;"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"toIndex"</span>&gt;</span>/index.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"publish"</span>&gt;</span>/WEB-INF/jsp/publish.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"toList"</span>&gt;</span>/WEB-INF/jsp/list.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">allowed-methods</span>&gt;</span>success,publishUI,listAirticle,publish<span class="tag">&lt;/<span class="name">allowed-methods</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">package</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">struts</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="原文参考"><a href="#原文参考" class="headerlink" title="原文参考"></a>原文参考</h1><p><a href="http://www.cnblogs.com/gsy52300/p/5778754.html" target="_blank" rel="external">struts2.5框架使用通配符指定方法（常见错误）</a><br><a href="http://blog.csdn.net/leafage_m/article/details/54343580" target="_blank" rel="external"> eclipse下简单配置struts2.5.8 </a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[tomcat的部署]]></title>
      <url>https://super3h.me/2017/02/13/J2EE-tomcat/</url>
      <content type="html"><![CDATA[<h1 id="静态部署"><a href="#静态部署" class="headerlink" title="静态部署"></a>静态部署</h1><ul>
<li><p>直接将<code>web</code>项目文件件拷贝到<code>webapps</code> 目录中</p>
<ol>
<li><code>Tomcat</code>的<code>Webapps</code>目录是Tomcat默认的应用目录，当服务器启动时，会加载所有这个目录下的应用。<strong> 所以可以将<code>JSP</code>程序打包成一个 <code>war</code>包放在目录下，服务器会自动解开这个war包，并在这个目录下生成一个同名的文件夹。</strong></li>
<li><code>说明:</code> 一个<code>war</code>包就是有特性格式的jar包，它是将一个web程序的所有内容进行压缩得到。</li>
<li><code>方式:</code>可以使用许多开发工具的<code>IDE</code>环境，如<code>Eclipse</code>等。也可以用 <code>cmd</code> 命令：<code>jar -cvf mywar.war  myweb</code></li>
<li><code>webapps</code>这个默认的应用目录也是可以改变。打开<code>Tomcat</code>的<code>conf</code>目录下的<code>server.xml</code>文件，找到下面内容：<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">"localhost"</span> <span class="attr">appBase</span>=<span class="string">"webapps"</span></span></div><div class="line">   <span class="attr">unpackWARs</span>=<span class="string">"true"</span> <span class="attr">autoDeploy</span>=<span class="string">"true"</span></div><div class="line">   <span class="attr">xmlValidation</span>=<span class="string">"false"</span> <span class="attr">xmlNamespaceAware</span>=<span class="string">"false"</span>&gt;</div><div class="line">   <span class="comment">&lt;!-- 将appBase修改即可--&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>在<code>server.xml</code>中指定:</p>
<ol>
<li>在<code>Tomcat</code>的配置文件中，一个<code>Web</code>应用就是一个特定的<code>Context</code>，可以通过在<code>server.xml</code>中新建<code>Context</code>里部署一个<code>JSP</code>应用程序。打开<code>server.xml</code>文件，在<code>Host</code>标签内建一个<code>Context</code>，内容如下。</li>
<li>在<code>tomcat</code>中的<code>conf</code>目录中，在<code>server.xml</code>中的，<code>&lt;host/&gt;</code>节点中添加： <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">"/hello"</span> <span class="attr">docBase</span>=<span class="string">"D:\ workspace\hello\WebRoot"</span> <span class="attr">debug</span>=<span class="string">"0"</span> <span class="attr">privileged</span>=<span class="string">"true"</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">Context</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<p>或者<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">"/myapp"</span> <span class="attr">reloadable</span>=<span class="string">"true"</span> <span class="attr">docBase</span>=<span class="string">"D:\myapp"</span> <span class="attr">workDir</span>=<span class="string">"D:\myapp\work"</span>/&gt;</span></div></pre></td></tr></table></figure></p>
<p>或者<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">"/sms4"</span> <span class="attr">docBase</span>=<span class="string">"D:\workspace\sms4\WebRoot"</span>/&gt;</span></div></pre></td></tr></table></figure></p>
<p>说明：<br><code>path:</code>是虚拟路径；<br><code>docBase:</code> 是应用程序的物理路径；<br><code>workDir:</code> 是这个应用的工作目录，存放运行时生成的与这个应用相关的文件；</p>
<p><code>debug:</code> 则是设定debug level,  0表示提供最少的信息，9表示提供最多的信息<br><code>privileged:</code>设置为true的时候，才允许Tomcat的Web应用使用容器内的Servlet<br><code>reloadable:</code> 如果为true，则tomcat会自动检测应用程序的/WEB-INF/lib 和/WEB-INF/classes目录的变化，自动装载新的应用程序，可以在不重起tomcat的情况下改变应用程序，实现热部署<br><code>antiResourceLocking</code>和<code>antiJARLocking</code>  热部署是需要配置的参数，默认false避免更新了某个webapp，<strong>有时候Tomcat并不能把旧的webapp完全删除，通常会留下WEB-INF/lib下的某个jar包，必须关闭Tomcat才能删除，这就导致自动部署失败。</strong>设置为true，Tomcat在运行对应的webapp时，会把相应的源文件和jar文件复制到一个临时目录里。</p>
<ul>
<li>创建一个Context文件<ol>
<li>在<code>conf</code>目录中，新建 <code>Catalina＼localhost</code>目录(<code>自带的就不用建了</code>)，在该目录中新建一个xml文件，名字不可以随意取，要和path后的那个名字一致，按照下边这个path的配置，xml的名字应该就应该是hello（hello.xml），该xml文件的内容为：<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">"/hello"</span> <span class="attr">docBase</span>=<span class="string">"E:\workspace\hello\WebRoot"</span> <span class="attr">debug</span>=<span class="string">"0"</span> <span class="attr">privileged</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">Context</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<p>tomcat自带例子如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">docBase</span>=<span class="string">"$&#123;catalina.home&#125;/server/webapps/host-manager"</span></span></div><div class="line">         <span class="attr">privileged</span>=<span class="string">"true"</span> <span class="attr">antiResourceLocking</span>=<span class="string">"false"</span> <span class="attr">antiJARLocking</span>=<span class="string">"false"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">Context</span>&gt;</span></div></pre></td></tr></table></figure></p>
<ul>
<li>这个例子是tomcat自带的，编辑的内容实际上和第二种方式是一样的，其中这xml文件名字就是访问路径，这样可以隐藏应用的真实名字。</li>
<li>删除一个Web应用同时<strong>也要删除webapps下相应的文件夹和server.xml中相应的Context，还要将Tomcat的conf\catalina\localhost目录下相应的xml文件删除</strong>，否则Tomcat仍会去配置并加载。。。</li>
</ul>
<h1 id="动态部署"><a href="#动态部署" class="headerlink" title="动态部署"></a>动态部署</h1><ul>
<li><code>登陆tomcat管理控制台：</code><a href="http://localhost:8080/" target="_blank" rel="external">http://localhost:8080/</a>，输入用户名和密码后便可管理应用并动态发布。</li>
<li><code>在Context Path(option):</code>中输入/yourwebname ，这代表你的应用的访问地址。</li>
<li><code>XML Configration file URL</code>中要指定一个xml文件，比如我们在F:\下建立一个<code>hmcx.xml</code>文件，内容如下：<code>&lt;Context reloadable=&quot;false&quot; /&gt;</code>其中docBase不用写了，因为在下一个文本框中填入。或者更简单点，这个文本框什么都不填，在<code>WAR or Directory URL</code>:中键入F:\hmcx即可，然后点击Deploy按钮，上面就可以看到了web应用程序，名字就<code>Context Path(option)</code>:中的名字。</li>
<li>如果部署.war文件还有更加简单的方式，下面还有个<code>Select WAR file uploae</code>点击浏览选择.war文件，然后点击Deploy也可以。</li>
</ul>
<h1 id="原文参考"><a href="#原文参考" class="headerlink" title="原文参考"></a>原文参考</h1><p><a href="https://zhidao.baidu.com/question/2203404153241837988.html" target="_blank" rel="external">tomcat部署项目的几种方式</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hexo-本地搜索]]></title>
      <url>https://super3h.me/2017/02/11/Hexo-search/</url>
      <content type="html"><![CDATA[<h1 id="安装和配置插件"><a href="#安装和配置插件" class="headerlink" title="安装和配置插件"></a>安装和配置插件</h1><p><code>1、</code> <code>cd</code>到根目录下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install --save hexo-generator-search</div></pre></td></tr></table></figure></p>
<p><code>2、</code> 在<code>__config.yml</code>最后添加一下设置项(<code>注意:</code>缩进问题，建议直接<code>copy</code>)<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attr">search:</span></div><div class="line"><span class="attr">  path:</span> search.xml</div><div class="line"><span class="attr">  field:</span> all</div></pre></td></tr></table></figure></p>
<p>说明:</p>
<ul>
<li><code>path:</code>指定生成的索引数据的文件名。默认为 <code>search.xml</code> 。</li>
<li><p><code>field</code> 指定索引数据的生成范围。可选值包括：</p>
<ul>
<li><code>post</code> - 只生成博客文章（post）的索引（默认）；</li>
<li><code>page:</code>只生成其他页面（page）的索引；</li>
<li><code>all:</code>生成所有文章和页面的索引。<h1 id="搜索函数的创建"><a href="#搜索函数的创建" class="headerlink" title="搜索函数的创建"></a>搜索函数的创建</h1>新建search.js在<code>themes\jacman\source\js</code>目录中，部署后将位于<code>public\js</code><br>此函数参考于<a href="http://hahack.com/codes/local-search-engine-for-hexo/#实现本地搜索函数" target="_blank" rel="external">实现本地搜索函数</a><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> searchFunc = <span class="function"><span class="keyword">function</span>(<span class="params">path, search_id, content_id</span>) </span>&#123;</div><div class="line"><span class="meta">    'use strict'</span>;</div><div class="line">    $.ajax(&#123;</div><div class="line">        <span class="attr">url</span>: path,</div><div class="line">        <span class="attr">dataType</span>: <span class="string">"xml"</span>,</div><div class="line">        <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> xmlResponse </span>) </span>&#123;</div><div class="line">            <span class="comment">// get the contents from search data</span></div><div class="line">            <span class="keyword">var</span> datas = $( <span class="string">"entry"</span>, xmlResponse ).map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> &#123;</div><div class="line">                    <span class="attr">title</span>: $( <span class="string">"title"</span>, <span class="keyword">this</span> ).text(),</div><div class="line">                    <span class="attr">content</span>: $(<span class="string">"content"</span>,<span class="keyword">this</span>).text(),</div><div class="line">                    <span class="attr">url</span>: $( <span class="string">"url"</span> , <span class="keyword">this</span>).text()</div><div class="line">                &#125;;</div><div class="line">            &#125;).get();</div><div class="line">            <span class="keyword">var</span> $input = <span class="built_in">document</span>.getElementById(search_id);</div><div class="line">            <span class="keyword">var</span> $resultContent = <span class="built_in">document</span>.getElementById(content_id);</div><div class="line">            $input.addEventListener(<span class="string">'input'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="keyword">var</span> str=<span class="string">'&lt;ul class=\"search-result-list\"&gt;'</span>;                </div><div class="line">                <span class="keyword">var</span> keywords = <span class="keyword">this</span>.value.trim().toLowerCase().split(<span class="regexp">/[\s\-]+/</span>);</div><div class="line">                $resultContent.innerHTML = <span class="string">""</span>;</div><div class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.value.trim().length &lt;= <span class="number">0</span>) &#123;</div><div class="line">                    <span class="keyword">return</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="comment">// perform local searching</span></div><div class="line">                datas.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">                    <span class="keyword">var</span> isMatch = <span class="literal">true</span>;</div><div class="line">                    <span class="keyword">var</span> content_index = [];</div><div class="line">                    <span class="keyword">var</span> data_title = data.title.trim().toLowerCase();</div><div class="line">                    <span class="keyword">var</span> data_content = data.content.trim().replace(<span class="regexp">/&lt;[^&gt;]+&gt;/g</span>,<span class="string">""</span>).toLowerCase();</div><div class="line">                    <span class="keyword">var</span> data_url = data.url;</div><div class="line">                    <span class="keyword">var</span> index_title = <span class="number">-1</span>;</div><div class="line">                    <span class="keyword">var</span> index_content = <span class="number">-1</span>;</div><div class="line">                    <span class="keyword">var</span> first_occur = <span class="number">-1</span>;</div><div class="line">                    <span class="comment">// only match artiles with not empty titles and contents</span></div><div class="line">                    <span class="keyword">if</span>(data_title != <span class="string">''</span> &amp;&amp; data_content != <span class="string">''</span>) &#123;</div><div class="line">                        keywords.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">keyword, i</span>) </span>&#123;</div><div class="line">                            index_title = data_title.indexOf(keyword);</div><div class="line">                            index_content = data_content.indexOf(keyword);</div><div class="line">                            <span class="keyword">if</span>( index_title &lt; <span class="number">0</span> &amp;&amp; index_content &lt; <span class="number">0</span> )&#123;</div><div class="line">                                isMatch = <span class="literal">false</span>;</div><div class="line">                            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                                <span class="keyword">if</span> (index_content &lt; <span class="number">0</span>) &#123;</div><div class="line">                                    index_content = <span class="number">0</span>;</div><div class="line">                                &#125;</div><div class="line">                                <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</div><div class="line">                                    first_occur = index_content;</div><div class="line">                                &#125;</div><div class="line">                            &#125;</div><div class="line">                        &#125;);</div><div class="line">                    &#125;</div><div class="line">                    <span class="comment">// show search results</span></div><div class="line">                    <span class="keyword">if</span> (isMatch) &#123;</div><div class="line">                        str += <span class="string">"&lt;li&gt;&lt;a href='"</span>+ data_url +<span class="string">"' class='search-result-title'&gt;"</span>+ data_title +<span class="string">"&lt;/a&gt;"</span>;</div><div class="line">                        <span class="keyword">var</span> content = data.content.trim().replace(<span class="regexp">/&lt;[^&gt;]+&gt;/g</span>,<span class="string">""</span>);</div><div class="line">                        <span class="keyword">if</span> (first_occur &gt;= <span class="number">0</span>) &#123;</div><div class="line">                            <span class="comment">// cut out 100 characters</span></div><div class="line">                            <span class="keyword">var</span> start = first_occur - <span class="number">20</span>;</div><div class="line">                            <span class="keyword">var</span> end = first_occur + <span class="number">80</span>;</div><div class="line">                            <span class="keyword">if</span>(start &lt; <span class="number">0</span>)&#123;</div><div class="line">                                start = <span class="number">0</span>;</div><div class="line">                            &#125;</div><div class="line">                            <span class="keyword">if</span>(start == <span class="number">0</span>)&#123;</div><div class="line">                                end = <span class="number">100</span>;</div><div class="line">                            &#125;</div><div class="line">                            <span class="keyword">if</span>(end &gt; content.length)&#123;</div><div class="line">                                end = content.length;</div><div class="line">                            &#125;</div><div class="line">                            <span class="keyword">var</span> match_content = content.substr(start, end); </div><div class="line">                            <span class="comment">// highlight all keywords</span></div><div class="line">                            keywords.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">keyword</span>)</span>&#123;</div><div class="line">                                <span class="keyword">var</span> regS = <span class="keyword">new</span> <span class="built_in">RegExp</span>(keyword, <span class="string">"gi"</span>);</div><div class="line">                                match_content = match_content.replace(regS, <span class="string">"&lt;em class=\"search-keyword\"&gt;"</span>+keyword+<span class="string">"&lt;/em&gt;"</span>);</div><div class="line">                            &#125;);</div><div class="line">                            </div><div class="line">                            str += <span class="string">"&lt;p class=\"search-result\"&gt;"</span> + match_content +<span class="string">"...&lt;/p&gt;"</span></div><div class="line">                        &#125;</div><div class="line">                        str += <span class="string">"&lt;/li&gt;"</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">                str += <span class="string">"&lt;/ul&gt;"</span>;</div><div class="line">                $resultContent.innerHTML = str;</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><code>searchFunc(path, search_id, content_id)</code>包含三个参数：</p>
</li>
<li><p><code>path:</code>用 hexo-generator-search 生成的搜索索引文件的路径。注意这个 path 和前面 hexo-generator-search 的 path 选项有所不同。这里的 path 才是指这个文件的路径，而前面的 path 指的是生成的文件名</p>
</li>
<li><code>search_id:</code>搜索框的 id 。对于我们的例子，就是 local-search-input;</li>
<li><code>content_id:</code> 结果框的 id 。对于我们的例子，就是 local-search-result</li>
</ul>
<h1 id="搜索函数文件的引入"><a href="#搜索函数文件的引入" class="headerlink" title="搜索函数文件的引入"></a>搜索函数文件的引入</h1><p>既然搜索函数已创建，接下来就是调用了。</p>
<blockquote>
<p>调用之前有必要明白<code>themes\jacman\layout\_partial\header.ejs</code>中最后一个<code>form</code>表单即为页面中的<code>search</code>框<br><img src="/2017/02/11/Hexo-search/1.png" alt=""><br>对应代码如下:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"search"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">label</span>&gt;</span>Search<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"search"</span> <span class="attr">class</span>=<span class="string">"search form-control"</span> <span class="attr">autocomplete</span>=<span class="string">"off"</span> <span class="attr">maxlength</span>=<span class="string">"20"</span> <span class="attr">placeholder</span>=<span class="string">"&lt;%= __('search') %&gt;"</span> <span class="attr">autocorrect</span>=<span class="string">"off"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<p>在目录<code>themes\jacman\layout\_partial\after_footer.ejs</code>中，添加一下内容:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> bp = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</div><div class="line">    <span class="keyword">var</span> curProtocol = <span class="built_in">window</span>.location.protocol.split(<span class="string">':'</span>)[<span class="number">0</span>];</div><div class="line">    <span class="keyword">if</span> (curProtocol === <span class="string">'https'</span>) &#123;</div><div class="line">        bp.src = <span class="string">'https://zz.bdstatic.com/linksubmit/push.js'</span>;        </div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        bp.src = <span class="string">'http://push.zhanzhang.baidu.com/push.js'</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> s = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"script"</span>)[<span class="number">0</span>];</div><div class="line">    s.parentNode.insertBefore(bp, s);</div><div class="line">&#125;)();</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line">&lt;script src=<span class="string">"&lt;%- config.root %&gt;js/jquery-2.0.3.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line">&lt;script src=<span class="string">"&lt;%- config.root %&gt;js/jquery.imagesloaded.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line">&lt;script src=<span class="string">"&lt;%- config.root %&gt;js/gallery.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line">&lt;script src=<span class="string">"&lt;%- config.root %&gt;js/jquery.qrcode-0.12.0.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line"><span class="comment">//以下是引入我们创建的js文件</span></div><div class="line">&lt;script src=<span class="string">"&lt;%- config.root %&gt;js/search.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<blockquote>
<p><code>after_footer.ejs</code>专门存放各种<code>js</code>文件，从此处引入我们创建的<code>search.js</code>文件</p>
</blockquote>
<h1 id="输入框的整改"><a href="#输入框的整改" class="headerlink" title="输入框的整改"></a>输入框的整改</h1><blockquote>
<p><code>思考:</code>由于主题原因，我们有两条路走：<br>1.写一个html页面用于显示搜索后的结果<br>2.用div叠加在原页面上，在进行搜索和结果展示<br>博主走的第二条路，样式如下:<br><img src="/2017/02/11/Hexo-search/2.png" alt=""><br>由于博主前台很渣，能做成这样就不错了。虽然后台也好不到哪去，哈哈<br>要添加此样式就得找到添加的位置，<code>themes\jacman\layout\layout.ejs</code>，此文件用于页面的排布,分别对应了文章，分类，归档等的排布，我们分别在每个<code>&lt;header&gt;</code>后加入以下代码<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>('<span class="attr">_partial</span>/<span class="attr">header</span>') %&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--添加以下代码--&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"ly"</span> <span class="attr">style</span>=<span class="string">"width:100%;height:100%;position: fixed; top: 0px; opacity:0.5; background-color: #6F6F6F;</span></span></div><div class="line">         z-index: 2; left: 0px; display: none;" <span class="attr">onclick</span>=<span class="string">"Lock_CheckForm()"</span>&gt;</div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!--浮层框架开始--&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"Layer2"</span> <span class="attr">align</span>=<span class="string">"center"</span> <span class="attr">style</span>=<span class="string">"width: 950px; position: absolute;left: 200px ;top:10%;z-index: 3;background-color: #fff; display: none;border-radius: 10px;"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"background-color: #F8F8F8;border-radius: 10px;"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"local-search-input"</span> <span class="attr">placeholder</span>=<span class="string">"search this website"</span> <span class="attr">autocomplete</span>=<span class="string">"off"</span> <span class="attr">autocorrect</span>=<span class="string">"off"</span> <span class="attr">autocapitalize</span>=<span class="string">"off"</span> <span class="attr">style</span>=<span class="string">"outline: none;"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"local-search-close"</span> <span class="attr">onclick</span>=<span class="string">"Lock_Reset()"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">				<span class="comment">&lt;!-- 清空/重置搜索框 --&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"local-search-result"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="comment">&lt;!-- 搜索结果区 --&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!--  浮层框架结束--&gt;</span></div></pre></td></tr></table></figure></p>
<p>说明:<br><code>#ly</code>:用于暗色背景<br><code>#Layer2</code>:用于搜索和结果展示<br><code>div #local-search-input</code>:搜索框<br><code>div #local-search-close</code>:用于清空搜索框内容<br><code>div #local-search-result</code>:用于结果展示</p>
</blockquote>
<h1 id="浮层样式的添加"><a href="#浮层样式的添加" class="headerlink" title="浮层样式的添加"></a>浮层样式的添加</h1><blockquote>
<p><code>html</code>写完后,改写css了，博主把所有的样式写在一个文件中了，以免乱套<br>在<code>themes\jacman\source\css</code>新建<code>search.styl</code>，此文件夹用于页面所有样式的展示，对应的代码如下:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div></pre></td><td class="code"><pre><div class="line">ul.search-result-list &#123;</div><div class="line">  padding-left: 10px;</div><div class="line">&#125;</div><div class="line">a.search-result-title &#123;</div><div class="line">  font-weight: bold;</div><div class="line">&#125;</div><div class="line">p.search-result &#123;</div><div class="line">  color=#555;</div><div class="line">&#125;</div><div class="line">em.search-keyword &#123;</div><div class="line">  border-bottom: 1px dashed #4088b8;</div><div class="line">  font-weight: bold;</div><div class="line">&#125;</div><div class="line">/*搜索框样式*/</div><div class="line">#local-search-input &#123;</div><div class="line">	font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;</div><div class="line">&#125;</div><div class="line">#local-search-input &#123;</div><div class="line">	font-size: 13px;</div><div class="line">	min-height: 32px;</div><div class="line">	margin: 0;</div><div class="line">	padding: 7px 8px;</div><div class="line">	outline: none;</div><div class="line">	color: #333;</div><div class="line">	background-color: #fff;</div><div class="line">	background-repeat: no-repeat;</div><div class="line">	background-position: right center;</div><div class="line">	border: 1px solid #ccc;</div><div class="line">	border-radius: 3px;</div><div class="line">	box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.075);</div><div class="line">	-moz-box-sizing: border-box;</div><div class="line">	box-sizing: border-box;</div><div class="line">	transition: all 0.15s ease-in;</div><div class="line">	-webkit-transition: all 0.15s ease-in 0;</div><div class="line">	vertical-align: middle;</div><div class="line">&#125;</div><div class="line"></div><div class="line">#local-search-input:focus &#123;</div><div class="line">	outline: none;</div><div class="line">	border-color: #51a7e8;</div><div class="line">	box-shadow: inset 0 1px 2px rgba(0, 0, 0, .075), 0 0 5px rgba(81, 167, 232, .5);</div><div class="line">&#125;</div><div class="line"></div><div class="line">#local-search-input &#123;</div><div class="line">	margin-top: 20px;</div><div class="line">	margin-left: -46px;</div><div class="line">	font-size: 18px;</div><div class="line">	width: 850px;</div><div class="line">	height: 30px;</div><div class="line">&#125;</div><div class="line">/*搜索重置按钮*/</div><div class="line">.local-search-close:hover &#123;</div><div class="line">	zoom: 1.0;</div><div class="line">	padding: 1px 0.6em;</div><div class="line">	border: 1px solid #d3d3d3;</div><div class="line">	box-shadow: 0 0 6px rgba(0, 0, 0, 0.25);</div><div class="line">	background: #FAF7F4;</div><div class="line">&#125;</div><div class="line">.local-search-close:active &#123;</div><div class="line">	background: #d3d3d3;</div><div class="line">&#125;</div><div class="line">.local-search-close &#123;</div><div class="line">	padding: 1px 0.7em;</div><div class="line">	box-shadow: 0 0 3px rgba(0, 0, 0, 0.15);</div><div class="line">	cursor: pointer;</div><div class="line">	color: #808080;</div><div class="line">&#125;</div><div class="line">.local-search-close::before &#123;</div><div class="line">	content: "\2716";</div><div class="line">&#125;</div><div class="line">/* place the button on top-right */</div><div class="line">.local-search-close &#123;</div><div class="line">	top: 22px;</div><div class="line">	right: 28px;</div><div class="line">	position: absolute;</div><div class="line">&#125;</div><div class="line">/*搜索结果区*/</div><div class="line">#local-search-result &#123;</div><div class="line">  font-size: 0.9em;</div><div class="line">  text-align: left;</div><div class="line">  word-break: break-all;</div><div class="line">&#125;</div><div class="line"></div><div class="line">#local-search-result ul.search-result-list li:hover &#123;</div><div class="line">  font-weight: normal;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/*搜索预览段落*/</div><div class="line">#local-search-result p.search-result &#123;</div><div class="line">  margin: 0.4em auto;</div><div class="line">  max-height: 3.6em;</div><div class="line">  overflow: hidden;</div><div class="line">  font-size: 0.8em;</div><div class="line">  text-align: justify;</div><div class="line">  color: #808080;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/*匹配的关键词*/</div><div class="line">#local-search-result em.search-keyword &#123;</div><div class="line">  color: #f58e90;</div><div class="line">  border-bottom: 1px dashed #f58e90;</div><div class="line">  font-weight: bold;</div><div class="line">  font-size: 0.85em;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>之后就要添加样式文件了，我们到<code>themes\jacman\layout\_partial\head.ejs</code>文件中的最后几行中添加以下代码:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;%- css('css/style') %&gt;</div><div class="line">/*以下为添加的内容*/</div><div class="line">&lt;%- css('css/search') %&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="函数调用和事件添加"><a href="#函数调用和事件添加" class="headerlink" title="函数调用和事件添加"></a>函数调用和事件添加</h1><blockquote>
<p>样式也添加完了，接下来就是函数调用和事件添加，到<code>themes\jacman\layout\_partial\after_footer.ejs</code>目录下，在刚才引入search.js的下面添加以下代码:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">&lt;script src=<span class="string">"&lt;%- config.root %&gt;js/search.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</div><div class="line"><span class="comment">//div层的显示</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">locking</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">document</span>.all.ly.style.display = <span class="string">"block"</span>;</div><div class="line">	<span class="built_in">document</span>.all.Layer2.style.display = <span class="string">'block'</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">//div层的隐藏</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Lock_CheckForm</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">document</span>.all.ly.style.display = <span class="string">'none'</span>;</div><div class="line">	<span class="built_in">document</span>.all.Layer2.style.display = <span class="string">'none'</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">//重置搜索框</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Lock_Reset</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//拿到搜索结果层</span></div><div class="line">    <span class="keyword">var</span> $resultArea = $(<span class="string">"#local-search-result"</span>);</div><div class="line">    $resultArea.html(<span class="string">""</span>);</div><div class="line">	$(<span class="string">"#local-search-input"</span>).val(<span class="string">''</span>);</div><div class="line">&#125; </div><div class="line"><span class="comment">//拿到文件路径</span></div><div class="line"><span class="keyword">var</span> search_path = <span class="string">"&lt;%= config.search.path %&gt;"</span>;</div><div class="line"><span class="keyword">if</span> (search_path.length == <span class="number">0</span>) &#123;</div><div class="line">		search_path = <span class="string">"search.xml"</span>;</div><div class="line">	&#125;</div><div class="line"><span class="keyword">var</span> path = <span class="string">"&lt;%= config.root %&gt;"</span> + search_path;</div><div class="line"><span class="comment">//拿到页面自带的搜索框元素</span></div><div class="line"><span class="keyword">var</span> inputArea = <span class="built_in">document</span>.querySelector(<span class="string">"#search"</span>);</div><div class="line"><span class="comment">//禁止回车的输入</span></div><div class="line">inputArea.onkeydown = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">if</span>(event.keyCode==<span class="number">13</span>) <span class="keyword">return</span> <span class="literal">false</span>&#125;</div><div class="line"><span class="keyword">var</span> getSearchFile = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="comment">//调用搜索函数</span></div><div class="line">    searchFunc(path, <span class="string">'local-search-input'</span>, <span class="string">'local-search-result'</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">//给页面自带的搜索框元素添加聚焦时间</span></div><div class="line">inputArea.onfocus = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </div><div class="line">	locking();</div><div class="line">	getSearchFile();</div><div class="line">&#125;</div><div class="line">getSearchFile();</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p>到此也就结束了，花了博主一个多小时，下回发个治颈椎的博文，哈哈！11<br>大家可以按照自己的样式修改，最后贴出我的成果<br><img src="/2017/02/11/Hexo-search/3.png" alt=""></p>
</blockquote>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p>在此谢谢这两位博主的文章<br><a href="http://moxfive.xyz/2016/05/31/hexo-local-search/?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">让 Hexo 博客支持本地站内搜索</a><br><a href="http://hahack.com/codes/local-search-engine-for-hexo/#实现本地搜索函数" target="_blank" rel="external">jQuery-based Local Search Engine for Hexo</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python-List添加元素的方法]]></title>
      <url>https://super3h.me/2017/02/10/Python-list/</url>
      <content type="html"><![CDATA[<h1 id="List添加元素的方法"><a href="#List添加元素的方法" class="headerlink" title="List添加元素的方法"></a>List添加元素的方法</h1><p>1、append() 追加单个元素到List的尾部，只接受一个参数，参数可以是任何数据类型，被追加的元素在List中保持着原结构类型。<strong>此元素如果是一个list，那么这个list将作为一个整体进行追加</strong>，注意<code>append()和extend()的区别</code>。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1=[<span class="string">'a'</span>,<span class="string">'b'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1.append(<span class="string">'c'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1</div><div class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</div></pre></td></tr></table></figure></p>
<p>2、extend() 将一个列表中每个元素分别添加到另一个列表中，只接受一个参数；<strong>extend()相当于是将list B 连接到list A上。</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1</div><div class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1.extend(<span class="string">'d'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1</div><div class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</div></pre></td></tr></table></figure></p>
<p>3、insert() 将一个元素插入到列表中，但其参数有两个（如insert(1,”g”)），第一个参数是索引点，即插入的位置，第二个参数是插入的元素。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1</div><div class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1.insert(<span class="number">1</span>,<span class="string">'x'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1</div><div class="line">[<span class="string">'a'</span>, <span class="string">'x'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</div></pre></td></tr></table></figure></p>
<p>4、+ 加号，将两个list相加，会返回到一个新的list对象，注意与前三种的区别。前面三种方法（append, extend, insert）可对列表增加元素的操作，他们没有返回值，是直接修改了原数据对象。 注意：<strong>将两个list相加，需要创建新的list对象，从而需要消耗额外的内存，特别是当list较大时，尽量不要使用“+”来添加list，而应该尽可能使用List的append()方法。</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1</div><div class="line">[<span class="string">'a'</span>, <span class="string">'x'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list2=[<span class="string">'y'</span>,<span class="string">'z'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list3=list1+list2</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list3</div><div class="line">[<span class="string">'a'</span>, <span class="string">'x'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'y'</span>, <span class="string">'z'</span>]</div></pre></td></tr></table></figure></p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="http://www.linuxde.net/2013/02/12497.html" target="_blank" rel="external">python中List添加元素的几种方法 </a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hexo样式无法加载]]></title>
      <url>https://super3h.me/2017/02/10/Hexo-%E6%A0%B7%E5%BC%8F%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BD/</url>
      <content type="html"><![CDATA[<h1 id="更改域名后样式无法加载"><a href="#更改域名后样式无法加载" class="headerlink" title="更改域名后样式无法加载"></a>更改域名后样式无法加载</h1><blockquote>
<p>博主发现更改域名后，<code>其他浏览器都能加载样式，唯独火狐和谷歌不行</code>，我这强迫症就不能忍了(其实也不是，主要是花了我25的绿毛爷爷，舍不得啊TwT)，花了博主好几天，终于找到了，主要就是域名解析问题<br><code>这里贴出图片：</code><br><img src="/2017/02/10/Hexo-样式无法加载/1.png" alt=""><br>这里博主并没有设置github，直接让github跳转至<code>super3h.me</code>之后链接到<code>super3h.coding.m</code>e的内容，之前设置github后导致页面都加载不出来了，所以直接删除了。</p>
<p>域名设置课参考博主上一篇博文<a href="https://super3h.me/2017/02/08/Hexo-%E5%9F%9F%E5%90%8D/#">Hexo-github 域名设置</a></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[npm相关命令]]></title>
      <url>https://super3h.me/2017/02/09/npm-%E5%91%BD%E4%BB%A4/</url>
      <content type="html"><![CDATA[<h1 id="npm-install-xxx"><a href="#npm-install-xxx" class="headerlink" title="npm install xxx"></a>npm install xxx</h1><ul>
<li>会把xxx包安装到<code>node_modules</code>目录中</li>
<li>不会修改<code>package.json</code></li>
<li>之后运行<code>npm install</code>命令时，不会自动安装xxx</li>
</ul>
<h1 id="npm-install-–save"><a href="#npm-install-–save" class="headerlink" title="npm install –save"></a>npm install –save</h1><ul>
<li>会把xxx包安装到<code>node_modules</code>目录中</li>
<li><strong>会在package.json的dependencies属性下添加xxx</strong></li>
<li>之后运行npm install命令时，<strong>会自动安装xxx到node_modules目录中</strong></li>
<li><strong>之后运行npm install –production或者注明NODE_ENV变量值为production时，会自动安装xxx到node_modules目录中</strong></li>
</ul>
<h1 id="npm-install-–save-dev"><a href="#npm-install-–save-dev" class="headerlink" title="npm install –save-dev"></a>npm install –save-dev</h1><ul>
<li>会把xxx包安装到<code>node_modules</code>目录中</li>
<li>会在<code>package.json的devDependencies</code>属性下添加xxx</li>
<li>之后运行<code>npm install</code>命令时，会自动安装xxx到<code>node_modules</code>目录中</li>
<li>之后运行<code>npm install --production</code>或者注明NODE_ENV变量值为production时，<strong>不会自动安装xxx到node_modules目录中</strong></li>
</ul>
<h1 id="使用原则"><a href="#使用原则" class="headerlink" title="使用原则"></a>使用原则</h1><p><strong>运行时需要用到的包使用–save，否则使用–save-dev。</strong></p>
<h1 id="原文参考"><a href="#原文参考" class="headerlink" title="原文参考"></a>原文参考</h1><p><a href="http://www.cnblogs.com/hollen/p/5956012.html" target="_blank" rel="external">npm install –save 与 npm install –save-dev 的区别</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hexo-优化]]></title>
      <url>https://super3h.me/2017/02/09/hexo-%E4%BC%98%E5%8C%96/</url>
      <content type="html"><![CDATA[<h1 id="Hexo优化"><a href="#Hexo优化" class="headerlink" title="Hexo优化"></a>Hexo优化</h1><h2 id="静态文件压缩"><a href="#静态文件压缩" class="headerlink" title="静态文件压缩"></a>静态文件压缩</h2><p>1、 <code>cd</code>到根目录下<code>npm install xxx --save</code>，xxx为一下工具<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">"gulp"</span>: <span class="string">"^3.9.1"</span>,</div><div class="line"><span class="string">"gulp-minify-css"</span>: <span class="string">"^1.2.4"</span>,</div><div class="line"><span class="string">"gulp-uglify"</span>: <span class="string">"^1.5.3"</span>,</div></pre></td></tr></table></figure></p>
<p>2、在根目录下建立<code>gulpfile.js</code> 文件<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"></div><div class="line">    <span class="comment">//Plugins模块获取</span></div><div class="line">    <span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>);</div><div class="line">    <span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</div><div class="line">    <span class="comment">// 压缩 public 目录 css文件</span></div><div class="line">    gulp.task(<span class="string">'minify-css'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.css'</span>)</div><div class="line">            .pipe(minifycss())</div><div class="line">            .pipe(gulp.dest(<span class="string">'./public'</span>));</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">// 压缩 public 目录 html文件</span></div><div class="line">    gulp.task(<span class="string">'minify-html'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.html'</span>)</div><div class="line">        .pipe(htmlclean())</div><div class="line">        .pipe(htmlmin(&#123;</div><div class="line">             <span class="attr">removeComments</span>: <span class="literal">true</span>,</div><div class="line">             <span class="attr">minifyJS</span>: <span class="literal">true</span>,</div><div class="line">             <span class="attr">minifyCSS</span>: <span class="literal">true</span>,</div><div class="line">             <span class="attr">minifyURLs</span>: <span class="literal">true</span>,</div><div class="line">        &#125;))</div><div class="line">        .pipe(gulp.dest(<span class="string">'./public'</span>))</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">// 压缩 public/js 目录 js文件</span></div><div class="line">    gulp.task(<span class="string">'minify-js'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.js'</span>)</div><div class="line">            .pipe(uglify())</div><div class="line">            .pipe(gulp.dest(<span class="string">'./public'</span>));</div><div class="line">    &#125;);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// 执行 gulp 命令时执行的任务</span></div><div class="line">    gulp.task(<span class="string">'default'</span>, [</div><div class="line">        <span class="string">'minify-css'</span>,<span class="string">'minify-js'</span></div><div class="line">    ]);</div></pre></td></tr></table></figure></p>
<blockquote>
<p>由于压缩<code>html</code>和<code>img</code>报错 ，所以只压缩了<code>js</code>和<code>css</code></p>
<h2 id="其他优化"><a href="#其他优化" class="headerlink" title="其他优化"></a>其他优化</h2><p>请参考：<a href="https://yq.aliyun.com/articles/8608" target="_blank" rel="external">Hexo折腾记——性能优化篇</a><br><a href="http://www.jianshu.com/p/3884e5cb63e5" target="_blank" rel="external">hexo定制&amp;优化</a></p>
</blockquote>
<h2 id="网易云添加"><a href="#网易云添加" class="headerlink" title="网易云添加"></a>网易云添加</h2><p>第一步：<br><img src="/2017/02/09/hexo-优化/1.png" alt=""><br>第二步：<br><img src="/2017/02/09/hexo-优化/2.png" alt=""><br>第三步：<br> <img src="/2017/02/09/hexo-优化/3.png" alt=""><br>第四步：<br><img src="/2017/02/09/hexo-优化/4.png" alt=""></p>
<blockquote>
<p>笔者放在<code>themes\jacman\layout\_partial\sidebar.ejs</code>具体代码如下:</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;div id=<span class="string">"asidepart"</span>&gt;</div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"closeaside"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"closebutton"</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">title</span>=<span class="string">"&lt;%= __('hidesidebar') %&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">&lt;iframe frameborder=<span class="string">"no"</span> border=<span class="string">"0"</span> marginwidth=<span class="string">"0"</span> marginheight=<span class="string">"0"</span> width=<span class="number">300</span> height=<span class="number">450</span> src=<span class="string">"//music.163.com/outchain/player?type=0&amp;id=485228675&amp;auto=1&amp;height=430"</span> style=<span class="string">"margin-top:40px;margin-left:-10px;"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span></div><div class="line">&lt;aside <span class="class"><span class="keyword">class</span></span>=<span class="string">"clearfix"</span>&gt;</div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span> <span class="attr">theme.widgets.forEach</span>(<span class="attr">function</span>(<span class="attr">widget</span>)&#123; %&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>('<span class="attr">..</span>/<span class="attr">_widget</span>/' + <span class="attr">widget</span>) %&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">%</span> &#125;); %&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">aside</span>&gt;</span></div><div class="line">&lt;<span class="regexp">/div&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>样式也做了相应的修改：</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//themes\jacman\source\css\_partial\aside.styl</div><div class="line">//sidebar</div><div class="line">#asidepart</div><div class="line">  background color-section</div><div class="line">  margin 1em 0 0</div><div class="line">  padding 0.5em 2% 1em</div><div class="line">  @media tablet</div><div class="line">    position relative</div><div class="line">    float left</div><div class="line">    width 23%</div><div class="line">    margin 2em 0 0 3%</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//themes\jacman\source\css\_partial\index.styl</div><div class="line">#main</div><div class="line">  margin 1em 0 0</div><div class="line">  line-height line-height+0.3</div><div class="line">  @media tablet</div><div class="line">    margin 2em 0 0</div><div class="line">    width 70%</div><div class="line">    float left</div><div class="line">    transition margin 0.5s ease-out</div></pre></td></tr></table></figure>
<p><code>github名片修改：</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//E:\Hexo\blog\themes\jacman\layout\_widget\github-card.ejs</span></div><div class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"github-card"</span> data-github=<span class="string">"&lt;%= theme.author.github %&gt;"</span> data-width=<span class="string">"280"</span> data-height=<span class="string">"119"</span> data-theme=<span class="string">"medium"</span>&gt;</div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"//cdn.jsdelivr.net/github-cards/latest/widget.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line"></div><div class="line">&lt;<span class="regexp">/div&gt;</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p><code>注意:</code>谷歌和火狐无法播放音乐。<font color="green">原因如下：</font></p>
</blockquote>
<p><img src="/2017/02/09/hexo-优化/5.png" alt=""><br><img src="/2017/02/09/hexo-优化/6.png" alt=""></p>
<h1 id="多说评论修改"><a href="#多说评论修改" class="headerlink" title="多说评论修改"></a>多说评论修改</h1><p>原博主是大神，写的很清楚，完全不用动脑子，全程复制粘贴即可，感谢原博主，请点击此处<a href="http://moxfive.xyz/2015/09/29/duoshuo-style/" target="_blank" rel="external">多说样式折腾记录 — 添加 UA 浏览器标识、旋转头像等</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Nginx学习]]></title>
      <url>https://super3h.me/2017/02/08/Nginx/</url>
      <content type="html"></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hexo-github 域名设置]]></title>
      <url>https://super3h.me/2017/02/08/Hexo-%E5%9F%9F%E5%90%8D/</url>
      <content type="html"><![CDATA[<h1 id="购买域名"><a href="#购买域名" class="headerlink" title="购买域名"></a>购买域名</h1><blockquote>
<p>笔者是在<a href="https://dnspod.qcloud.com/?from=qcloud" target="_blank" rel="external">腾讯云</a>买的，网上教程都是<a href="https://wanwang.aliyun.com/domain/searchresult/" target="_blank" rel="external">万网</a>买的,两者都差不多，只要输入以下内容即可</p>
</blockquote>
<p><img src="/2017/02/08/Hexo-域名/yuming.png" alt=""></p>
<blockquote>
<p><code>注意:</code>博主把蓝灯打开后，ip变为国外的了，此时访问<a href="http://super3h.me/">super3h.me</a>，显示<code>不安全</code>，因此会访问不了了</p>
</blockquote>
<h1 id="添加CNAME"><a href="#添加CNAME" class="headerlink" title="添加CNAME"></a>添加CNAME</h1><p>然后回到博客项目根目录，在source/下新建一个名为CNAME的文件，里面的内容写入<a href="http://super3h.me/">super3h.me</a>即可。</p>
<p>然后在浏览器输入super3h.me，即可代替之前的github.io的域名，访问到自己的博客页面了</p>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://www.cnblogs.com/jarson-7426/p/5515870.html" target="_blank" rel="external">hexo博客进阶－相册和独立域名 </a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[python is和==的区别]]></title>
      <url>https://super3h.me/2017/02/07/Python-is_==/</url>
      <content type="html"><![CDATA[<h1 id="is和-的区别"><a href="#is和-的区别" class="headerlink" title="is和==的区别"></a>is和==的区别</h1><p><code>Python</code>中的对象包含三要素：<code>id</code>、<code>type</code>、<code>value</code>。<br>其中<code>id</code>用来唯一标识一个对象，<code>type</code>标识对象的类型，<code>value</code>是对象的值。<br><code>is</code>判断的是a对象是否就是b对象，是通过<code>id</code>来判断的。<br><code>==</code>判断的是a对象的值是否和b对象的值相等，是通过<code>value</code>来判断的<br><img src="http://img.my.csdn.net/uploads/201303/05/1362459851_8030.jpg" alt=""></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[python开发公众号]]></title>
      <url>https://super3h.me/2017/02/05/WeiXin-Python/</url>
      <content type="html"><![CDATA[<h1 id="原文参考"><a href="#原文参考" class="headerlink" title="原文参考"></a>原文参考</h1><p><a href="http://www.tuicool.com/articles/36nyU3b" target="_blank" rel="external">从零开始 Python 微信公众号开发</a><br><a href="https://my.oschina.net/yangyanxing/blog/159215" target="_blank" rel="external">使用python一步一步搭建微信公众平台</a><br><a href="https://my.oschina.net/yangyanxing/blog/196956?p=2&amp;temp=1486389579131#blog-comments-list" target="_blank" rel="external">添加用户关注后的欢迎信息与听音乐功能</a><br><a href="http://python.jobbole.com/84904/" target="_blank" rel="external">Python快速搭建自动回复微信公众号</a><br><a href="http://jingyan.baidu.com/article/1e5468f97c3472484961b7dd.html?qq-pf-to=pcqq.c2c" target="_blank" rel="external">未认证订阅号自定义菜单与开发者兼得</a></p>
<h1 id="所遇问题"><a href="#所遇问题" class="headerlink" title="所遇问题"></a>所遇问题</h1><h2 id="git-push-sae-master-1时候报如下错误"><a href="#git-push-sae-master-1时候报如下错误" class="headerlink" title="git push sae master:1时候报如下错误:"></a><code>git push sae master:1</code>时候报如下错误:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">G:\Web_python\xyPyTest&gt;git push sae master:1</div><div class="line">fatal: Authentication failed for &apos;https://git.sinacloud.com/super3h/&apos;</div></pre></td></tr></table></figure>
<blockquote>
<p><code>解决方案:</code>用户名密码就是你的github账户邮箱和密码，输入密码不是没反应，是你输入了但是不会显示，你输入完直接enter就ok了，sshkey是另外一种提交方式罢了！</p>
</blockquote>
<h2 id="lxml安装问题"><a href="#lxml安装问题" class="headerlink" title="lxml安装问题"></a><code>lxml</code>安装问题</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">E:\&gt;easy_install lxml</div><div class="line">Searching <span class="keyword">for</span> lxml</div><div class="line">Reading https://pypi.python.org/simple/lxml/</div><div class="line">Best match: lxml 3.7.2</div><div class="line">Downloading https://pypi.python.org/packages/66/45/f11<span class="built_in">fc</span>376f784c6f2e77ffc7a9d02374ff3ceb07ede8c56f918939409577c/lxml-3.7.2.tar.gz<span class="comment">#md5=8dcf8d6c692b7aed9370f7462ff09935</span></div><div class="line">error: (<span class="string">'The read operation timed out'</span>,)</div></pre></td></tr></table></figure>
<blockquote>
<p><code>解决方案:</code><br>从官方网站下载与系统，Python版本匹配的lxml文件：<a href="http://pypi.python.org/pypi/lxml/2.3/" target="_blank" rel="external">lxml 2.3</a><br>执行 <code>easy_install lxml-2.3-py2.7-win-amd64.egg</code>即可<br>详细解决方案请参考<a href="http://www.jb51.net/article/67125.htm" target="_blank" rel="external">Python lxml模块安装教程</a></p>
</blockquote>
<h2 id="‘not-found’页面"><a href="#‘not-found’页面" class="headerlink" title="‘not found’页面"></a>‘not found’页面</h2><p><img src="/2017/02/05/WeiXin-Python/1.png" alt=""></p>
<blockquote>
<p>这个属于正常页面，因为index.wsgi只会接受<code>http://6.super3h.applinzi.com/weixin</code>的入口才会响应，对应微信配置如下：</p>
</blockquote>
<p><img src="/2017/02/05/WeiXin-Python/2.png" alt=""></p>
<blockquote>
<p>具体详情请参考<a href="http://www.cnblogs.com/yym2013/p/5962208.html" target="_blank" rel="external">新浪云SAE搭建python环境</a>和<a href="http://blog.csdn.net/u011659379/article/details/48314317" target="_blank" rel="external">SAE部署Python-让云端自动运行Python代码</a></p>
</blockquote>
<h2 id="自动回复无反应问题"><a href="#自动回复无反应问题" class="headerlink" title="自动回复无反应问题"></a>自动回复无反应问题</h2><blockquote>
<p>原文参考代码有错<code>index.wsgi</code>中将<code>import lxml</code>改为<code>import lxml.etree as etree</code>，可进入sae日志中心查看代码错误原因，具体过程如下:</p>
</blockquote>
<p><img src="/2017/02/05/WeiXin-Python/3.png" alt=""></p>
<h2 id="添加第三方依赖包"><a href="#添加第三方依赖包" class="headerlink" title="添加第三方依赖包"></a>添加第三方依赖包</h2><p>除了使用新浪云上已经预装的模块之外，您还可以通过以下方式给自己的应用添加第三方依赖包。</p>
<p>首先，在应用的根目录下创建一个第三方依赖包目录 <code>vendor</code> 。<br>调用<code>pip</code>命令安装依赖包，使用其<code>-t</code>选项指定第三方包的安装目录。3<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pip install -t vendor PACKAGE ...</div></pre></td></tr></table></figure></p>
<p>将 <code>vendor</code> 目录和应用的代码一起提交，即可在应用代码里使用安装的第三方依赖包了。</p>
<p>如果依赖包安装的目录名不为 <code>vendor</code> ，你需要在 <code>index.wsgi</code> 文件的最开始，添加以下代码，将目录加入到 <code>sys.path</code> 中。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sae</div><div class="line">sae.add_vendor_dir(<span class="string">'路径'</span>)</div><div class="line"><span class="comment"># 注意：以上代码得放在 index.wsgi 的最前面，所有其它代码之前。</span></div></pre></td></tr></table></figure></p>
<p><code>详情参考:</code><a href="https://www.sinacloud.com/doc/sae/python/tools.html#tian-jia-di-san-fang-yi-lai-bao" target="_blank" rel="external">添加第三方依赖包</a></p>
<h2 id="编码问题"><a href="#编码问题" class="headerlink" title="编码问题"></a>编码问题</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(unicode error) <span class="string">'utf8'</span> codec can<span class="string">'t decode byte 0xd6 in position 2: invalid continuation byte  yq26</span></div></pre></td></tr></table></figure>
<blockquote>
<p><code>具体原因：</code>编码不一致，微信为gbk编码，本地为utf-8编码二导致编码不一致<br><code>解决方案：</code>将本地用gbk解码，具体操作如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> self.render.reply_text(fromUser, toUser, int(time.time()), (<span class="string">'图中人物性别为:'</span>+datas[<span class="number">0</span>]+<span class="string">'\n'</span>+<span class="string">'年龄为:'</span>+datas[<span class="number">1</span>]).decode(<span class="string">'gbk'</span>))</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="输入-lt-gt-会被转义问题"><a href="#输入-lt-gt-会被转义问题" class="headerlink" title="输入&lt;&gt;会被转义问题"></a>输入&lt;&gt;会被转义问题</h2><blockquote>
<p>由于<code>![CDATA[$content]]</code>而发生转义问题，改成如下模式即可:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$def with (toUser,fromUser,createTime,content)</div><div class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[$toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[$fromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>$createTime<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[text]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Content</span>&gt;</span>$content<span class="tag">&lt;/<span class="name">Content</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="音乐问题"><a href="#音乐问题" class="headerlink" title="音乐问题"></a>音乐问题</h2><blockquote>
<p>由于百度云存储要钱的缘故。。。所以我选择了新浪云。<br><code>问题：</code>苹果手机中不能听<br><code>解决方案：</code>还没解决。。能力有限。<br><code>后续:</code>那天闲来无事，进公众号点了首歌，发现不能放了，<code>原来</code>是新浪云把歌的链接给改了。。没办法存在了qq邮箱的中转站，原文点击此<a href="http://jingyan.baidu.com/article/ed2a5d1f3d91dd09f6be17e8.html" target="_blank" rel="external">教你快速添加qq空间背景音乐免费网络歌曲链接</a></p>
</blockquote>
<h1 id="新闻列表"><a href="#新闻列表" class="headerlink" title="新闻列表"></a>新闻列表</h1><p><code>templates\reply_url.xml</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">$def with (toUser,fromUser,createTime,content,title,description,picUrl,url)</div><div class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[$toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[$fromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>$createTime<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[news]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Content</span>&gt;</span>&lt;![CDATA[$content]]&gt;<span class="tag">&lt;/<span class="name">Content</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ArticleCount</span>&gt;</span>1<span class="tag">&lt;/<span class="name">ArticleCount</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Articles</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Title</span>&gt;</span>&lt;![CDATA[$title]]&gt;<span class="tag">&lt;/<span class="name">Title</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Description</span>&gt;</span>&lt;![CDATA[$description]]&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">Description</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">PicUrl</span>&gt;</span>&lt;![CDATA[$picUrl]]&gt;<span class="tag">&lt;/<span class="name">PicUrl</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Url</span>&gt;</span>&lt;![CDATA[$url]]&gt;<span class="tag">&lt;/<span class="name">Url</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">Articles</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">FuncFlag</span>&gt;</span>0<span class="tag">&lt;/<span class="name">FuncFlag</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>weixinInterface.py添加这一句:</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">POST</span><span class="params">(self)</span>:</span> </div><div class="line">		<span class="keyword">if</span> msgType == <span class="string">'text'</span>:</div><div class="line">			content = xml.find(<span class="string">"Content"</span>).text</div><div class="line">			<span class="comment">#添加这一句</span></div><div class="line">			<span class="keyword">if</span> isinstance(replayText,list):</div><div class="line">				articleList = [article[<span class="string">'article'</span>]+<span class="string">'\n详情'</span>.decode(<span class="string">'gbk'</span>)+article[<span class="string">'detailurl'</span>] <span class="keyword">for</span> article <span class="keyword">in</span> replayText]<span class="comment"># 一定要写在此文件里，写在tulingAutoReply.py会报缩进问题</span></div><div class="line">				reply = random.choice(articleList)</div><div class="line">				<span class="keyword">return</span> self.render.reply_text(fromUser,toUser,int(time.time()),reply)</div></pre></td></tr></table></figure></p>
<p><code>tulingAutoReply.py</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding:utf-8</span></div><div class="line"><span class="keyword">import</span> json</div><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">import</span> traceback</div><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choice </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TulingAutoReply</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, tuling_key, tuling_url)</span>:</span></div><div class="line">        self.key = tuling_key</div><div class="line">        self.url = tuling_url</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">reply</span><span class="params">(self, reply)</span>:</span></div><div class="line">        body = &#123;<span class="string">'key'</span>: self.key, <span class="string">'info'</span>: reply&#125;</div><div class="line">        r = requests.post(self.url, data=body)</div><div class="line">        <span class="comment">#设置编码</span></div><div class="line">        r.encoding = <span class="string">'utf-8'</span></div><div class="line">        resp = r.text</div><div class="line">        <span class="keyword">if</span> resp <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> len(resp) == <span class="number">0</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">None</span></div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            js = json.loads(resp)</div><div class="line">			<span class="comment"># 回复为文本类</span></div><div class="line">            <span class="keyword">if</span> js[<span class="string">'code'</span>] == <span class="number">100000</span>:</div><div class="line">                <span class="keyword">return</span> js[<span class="string">'text'</span>]</div><div class="line">			<span class="comment"># 回复为链接类</span></div><div class="line">            <span class="keyword">elif</span> js[<span class="string">'code'</span>] == <span class="number">200000</span>:</div><div class="line">                <span class="keyword">return</span> js[<span class="string">'url'</span>]</div><div class="line">			<span class="comment"># 回复为新闻类</span></div><div class="line">            <span class="keyword">elif</span> js[<span class="string">'code'</span>] == <span class="number">302000</span>:</div><div class="line">			    <span class="keyword">return</span> js[<span class="string">'list'</span>]</div><div class="line">			<span class="comment"># 其他</span></div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                <span class="keyword">return</span> <span class="keyword">None</span></div><div class="line">        <span class="keyword">except</span> Exception:</div><div class="line">            traceback.print_exc()</div><div class="line">            <span class="keyword">return</span> <span class="keyword">None</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>博主本来准备做语音识别，结果好像认证后才提供此接口，这里把原文贴出来，供大家参考<a href="https://zhuanlan.zhihu.com/p/21390250" target="_blank" rel="external">听得懂语音消息的聊天机器人</a></p>
</blockquote>
<h1 id="微信图文信息直接跳转至外部链接"><a href="#微信图文信息直接跳转至外部链接" class="headerlink" title="微信图文信息直接跳转至外部链接"></a>微信图文信息直接跳转至外部链接</h1><blockquote>
<p>点击菜单跳转到网页必须要认证才行，我们可以用关键字回复来实现跳转至外部链接<br><code>在templates下添加reply_url.xml，内容为:</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">$def with (toUser,fromUser,createTime,content,title,description,picUrl,url)</div><div class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[$toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[$fromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>$createTime<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[news]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Content</span>&gt;</span>&lt;![CDATA[$content]]&gt;<span class="tag">&lt;/<span class="name">Content</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ArticleCount</span>&gt;</span>1<span class="tag">&lt;/<span class="name">ArticleCount</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Articles</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Title</span>&gt;</span>&lt;![CDATA[$title]]&gt;<span class="tag">&lt;/<span class="name">Title</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Description</span>&gt;</span>&lt;![CDATA[$description]]&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">Description</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">PicUrl</span>&gt;</span>&lt;![CDATA[$picUrl]]&gt;<span class="tag">&lt;/<span class="name">PicUrl</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Url</span>&gt;</span>&lt;![CDATA[$url]]&gt;<span class="tag">&lt;/<span class="name">Url</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">Articles</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">FuncFlag</span>&gt;</span>0<span class="tag">&lt;/<span class="name">FuncFlag</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<p><code>weixinInterface.py添加这一句:</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> msgType == <span class="string">'text'</span>:</div><div class="line">			content = xml.find(<span class="string">"Content"</span>).text</div><div class="line">			<span class="keyword">if</span> content == <span class="string">'博客'</span>.decode(<span class="string">'gbk'</span>):</div><div class="line">				<span class="keyword">return</span> self.render.reply_url(fromUser,toUser,int(time.time()),content,<span class="string">'个人博客'</span>.decode(<span class="string">'gbk'</span>),<span class="string">'HHH的个人博客'</span>.decode(<span class="string">'gbk'</span>),<span class="string">r'https://mmbiz.qlogo.cn/mmbiz_jpg/z67Nqg3yAzRNVazozLUD7icuibRJdnCDaJd1dTfQ9673IDS6ttA5cFQwQCic7IrjPhbTcX1ycQDGibJhlGaFbwzyyg/0?wx_fmt=jpeg'</span>,<span class="string">r'http://super3h.github.io'</span>)</div></pre></td></tr></table></figure></p>
<h1 id="源码链接"><a href="#源码链接" class="headerlink" title="源码链接"></a>源码链接</h1><p>欢迎订阅 <a href="https://github.com/super3H/sae/tree/master" target="_blank" rel="external">ProgrammerBy3H</a> <code>求star star star！！</code></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hibernate中openSession()跟getCurrentSession()的区别]]></title>
      <url>https://super3h.me/2017/01/30/J2EE-Hibernate%E7%9A%84Session%E8%8E%B7%E5%8F%96/</url>
      <content type="html"><![CDATA[<h1 id="openSession-与getCurrentSession"><a href="#openSession-与getCurrentSession" class="headerlink" title="openSession()与getCurrentSession()"></a>openSession()与getCurrentSession()</h1><ol>
<li>采用<code>getCurrentSession()</code>创建的Session会绑定到当前的线程中去、而采用<code>OpenSession()</code>则不会。<strong>查询也需要开事务，否则会报错</strong></li>
<li>采用<code>getCurrentSession()</code>创建的Session在commit或rollback后会自动关闭，采用<code>OpenSession()</code>必须手动关闭。</li>
<li>采用<code>getCurrentSession()</code>需要在<code>Hibernate.cfg.xml</code>配置文件中加入如下配置：</li>
</ol>
<blockquote>
<p>如果是本地事物，及JDBC一个数据库：<code>&lt;property name=”current_session_context_class”&gt;thread&lt;/property&gt;</code><br>如果是全局事物，及jta事物、多个数据库资源或事物资源：<code>&lt;property name=”current_session_context_class”&gt;jta&lt;/property&gt;</code><br>使用spring的getHiberanteTemplate 就不需要考虑事务管理和session关闭的问题</p>
</blockquote>
<h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><blockquote>
<p><code>openSession</code>创建session时autoCloseSessionEnabled参数为false，即在事物结束后不会自动关闭session，需要手动关闭，如果不关闭将导致session关联的数据库连接无法释放，最后资源耗尽而使程序当掉。              </p>
<p><code>getCurrentSession</code>创建session时autoCloseSessionEnabled，flushBeforeCompletionEnabled都为true，并且session会同sessionFactory组成一个map以sessionFactory为主键绑定到当前线程。</p>
<p><code>getCurrentSession()</code>:从上下文（配置文件current_session_context_class: thread 使用Connection自动管理；jta(java transaction api) 由Application Server提供的分布式事务管理，Tomcat本身不具备此能力，JBoss、WebLogic具备）找，如果有，则用旧的，否则创建新的，<strong>事务提交自动Close；</strong></p>
</blockquote>
<h1 id="本地事务和全局事务"><a href="#本地事务和全局事务" class="headerlink" title="本地事务和全局事务"></a>本地事务和全局事务</h1><ul>
<li><code>全局事务：</code>资源管理器管理和协调的事务，可以跨越多个数据库和进程。资源管理器一般使用 XA 二阶段提交协议与“企业信息系统”(EIS) 或数据库进行交互。 </li>
<li><code>本地事务：</code>在单个 EIS 或数据库的本地并且限制在单个进程内的事务。本地事务不涉及多个数据来源。</li>
</ul>
<h2 id="在Hibernate配置文件中有这么两种配置方式"><a href="#在Hibernate配置文件中有这么两种配置方式" class="headerlink" title="在Hibernate配置文件中有这么两种配置方式:"></a>在Hibernate配置文件中有这么两种配置方式:</h2><ol>
<li>如果使用的是本地事务（jdbc事务）<code>&lt;property name=&quot;hibernate.current_session_context_class&quot;&gt;thread&lt;/property&gt;</code>,这个是我们常用的选项,只针对一个数据库进行操作，也就是说只针对一个事务性资源进行操作.</li>
<li>如果使用的是全局事务（jta事务）<br><code>&lt;property name=&quot;hibernate.current_session_context_class&quot;&gt;jta&lt;/property&gt;</code><blockquote>
<p> 以前我们学习的事务类型都属于本地事务。 <code>JTA</code>(全局事务)和<code>thread</code>(本地事务)有什么区别呢？在某些应用场合，只能使用全局事务，比如： 有两个数据库：<br><code>mysql</code> 和 <code>oracle</code>  现在有个业务需求–转账 :</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">step 1&gt; update mysql_table set amount=amount-xx where id=aaa </div><div class="line">/*发生扣钱,假设是在mysql数据库扣钱的。 */</div><div class="line">step 2&gt; update oracle_table set amount=amount+xx where id=bbb</div><div class="line">/* 加钱,假设是在oracle数据库扣钱的。 */</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<blockquote>
<p>现在怎么确保两个语句在同一个事务里执行呢？<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/*以前在JDBC里是这样做 */</div><div class="line">connection = mysql /*连接mysql */</div><div class="line">connection.setAutoCommit(false);  /*不自动提交 */</div><div class="line">1&gt; update mysql_table set amount=amount-xx where id=aaa</div><div class="line"> /*发生扣钱,假设是在mysql数据库扣钱的。 */</div><div class="line">2&gt; update oracle_table set amount=amount+xx where id=bbb </div><div class="line"> /*发生在oracle数据库 */</div><div class="line">connection.commit();</div></pre></td></tr></table></figure></p>
<p>执行这两条语句，然后通过<code>connection</code>对象提交事务.我们这样子做只能确保这两个语句在同一个数据库<code>mysql</code>里面实现在同一个事务里执行。 但是问题是我们现在是要连接到<code>oracle</code>数据库，是不是需要<code>connection2</code>啊？</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">connection = mysql /*连接mysql */</div><div class="line">connection2 = oracle /*连接oracle */</div><div class="line">connection.setAutoCommit(false);  /*不自动提交 */</div><div class="line">1&gt; update mysql_table set amount=amount-xx where id=aaa /*发生扣钱,假设是在mysql数据库扣钱的。 */</div><div class="line">2&gt; update oracle_table set amount=amount+xx where id=bbb  /*发生在oracle数据库 /*</div><div class="line">connection.commit(); </div><div class="line">connection2.setAutoCommit(false); </div><div class="line">connection2.commit();</div></pre></td></tr></table></figure>
<blockquote>
<p>事务只能在一个<code>connection</code>里打开，并且确保两条语句都在该<code>connection</code>里执行，这样才能让两条语句在同一事务里执行，现在问题就在于<strong>connection2是连接到oracle数据库的，那么connection2再开事务有意义吗？它能确保吗？不能，所以在这种情况下就只能使用全局事务了。</strong><br>这种情况下用普通JDBC操作是满足不了这个业务需求的，这种业务需求只能使用全局事务，本地事务是无法支持我们的操作的，因为这时候，<strong>事务的生命周期不应该局限于connection对象的生命周期范围</strong><br>全局事务怎么做呢？ </p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">JPA.getUserTransaction().begin();      <span class="comment">/*首先要全局事务的API,不需要我们编写，通常容器已经提供给我们了，我们只需要begin一下 */</span></div><div class="line">connection = mysql <span class="comment">/*连接mysql */</span></div><div class="line">connection2 = oracle <span class="comment">/*连接oracle*/</span></div><div class="line">connection<span class="comment">--&gt; update mysql_table set amount=amount-xx where id=aaa /*发生扣钱,假设是在mysql数据库扣钱的。 */</span></div><div class="line">connection2<span class="comment">--&gt; update oracle_table set amount=amount+xx where id=bbb /*发生在oracle数据库 */</span></div><div class="line">JPA.getUserTransaction().commit();</div></pre></td></tr></table></figure>
<blockquote>
<p>那么它是怎么知道事务该提交还是回滚呢？<br>这时候它使用了二次提交协议。二次提交协议简单说就这样：<strong>如果你先执行第一条语句，执行的结果先预提交到数据库，预提交到数据库了，数据库会执行这条语句，然后返回一个执行的结果，这个结果假如我们用布尔值表示的话，成功就是true，失败就是false.然后把执行的结果放入一个（假设是List）对象里面去，接下来再执行第二条语句，执行完第二条语句之后（也是预处理，数据库不会真正实现数据的提交，只是说这条语句送到数据库里面，它模拟下执行，给你返回个执行的结果），假如这两条语句的执行结果在List里面都是true的话，那么这个事务就认为语句是成功的，这时候全局事务就会提交。</strong>二次提交协议，数据库在第一次提交这个语句时，只会做预处理，不会发生真正的数据改变，当我们在全局事务提交的时候，这时候发生了第二次提交，那<code>么第二次提交的时候才会真正的发生数据的改动。</code><br>   <strong>如果说在执行这两条语句中，有一个出错了，那么List集合里就有个元素为false，那么全局事务就认为你这个事务是失败的，它就会进行回滚</strong>，回滚的时候，哪怕你的第二条语句在第一次提交的时候是成功的，它在第二次提交的时候也会回滚，那么第一次的更改也会恢复到之前的状态，这就是二次提交协议。（可以查看一下数据库方面的文档来了解二次提交协议）</p>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://www.cnblogs.com/Ant-soldier/p/5051478.html" target="_blank" rel="external">hibernate中openSession()跟getCurrentSession()方法之间的区别 </a><br><a href="http://www.cnblogs.com/ysch/p/4234311.html" target="_blank" rel="external">事务-本地事务和全局事务</a></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[J2EE-Hibernate关系配置]]></title>
      <url>https://super3h.me/2017/01/29/J2EE-Hibernate%E5%85%B3%E7%B3%BB%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<h1 id="cascade-、inverse详解"><a href="#cascade-、inverse详解" class="headerlink" title="cascade 、inverse详解"></a>cascade 、inverse详解</h1><blockquote>
<p><code>cascade</code>有以下四种值：<br><code>all</code>: 所有情况下均进行关联操作。<br><code>none</code>: 所有情况下均不进行关联操作。这是默认值。<br><code>save-update</code>: 在执行save/update/saveOrUpdate时进行关联操作。<br><code>delete</code>: 在执行delete时进行关联操作。</p>
<p> <code>inverse</code><br>    `<img src="/2017/01/29/J2EE-Hibernate关系配置/inverse.png" alt=""><br>详情请点：<a href="http://blog.sina.com.cn/s/blog_7ffb8dd50101450c.html" target="_blank" rel="external">cascade 、inverse详解 </a></p>
</blockquote>
<h1 id="一对多（多对一）"><a href="#一对多（多对一）" class="headerlink" title="一对多（多对一）"></a>一对多（多对一）</h1><p><code>班级</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span></div><div class="line">"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</div><div class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"cn.itcast.hiberate.sh.domain.Classes"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"cid"</span> <span class="attr">length</span>=<span class="string">"5"</span> <span class="attr">type</span>=<span class="string">"java.lang.Long"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"cname"</span> <span class="attr">length</span>=<span class="string">"20"</span> <span class="attr">type</span>=<span class="string">"java.lang.String"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		</div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">length</span>=<span class="string">"100"</span> <span class="attr">type</span>=<span class="string">"java.lang.String"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- </span></div><div class="line">			set元素对应类中的set集合</div><div class="line">			通过set元素使classes表与student表建立关联</div><div class="line">			   key是通过外键的形式让两张表建立关联</div><div class="line">			   one-to-many是通过类的形式让两个类建立关联</div><div class="line">			</div><div class="line">			cascade 级联</div><div class="line">			   save-update</div><div class="line">			   	1、当 保存班级的时候，对学生进行怎么样的操作</div><div class="line">			   	     如果学生对象在数据库中没有对应的值，这个时候会执行save操作</div><div class="line">			   	     如果学生对象在数据库中有对应的值，这个时候会执行update操作</div><div class="line">			   delete</div><div class="line">			   all</div><div class="line">			inverse  维护关系</div><div class="line">			   true      不维护关系     </div><div class="line">			   false     维护关系</div><div class="line">			   default   false</div><div class="line">		 --&gt;</div><div class="line">		<span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"students"</span> <span class="attr">cascade</span>=<span class="string">"all"</span> <span class="attr">inverse</span>=<span class="string">"true"</span>&gt;</span></div><div class="line">			<span class="comment">&lt;!-- </span></div><div class="line">				key是用来描述外键</div><div class="line">			 --&gt;</div><div class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"cid"</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span>=<span class="string">"cn.itcast.hiberate.sh.domain.Student"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>学生</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span></div><div class="line">"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</div><div class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"cn.itcast.hiberate.sh.domain.Student"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"sid"</span> <span class="attr">length</span>=<span class="string">"5"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sname"</span> <span class="attr">length</span>=<span class="string">"20"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">length</span>=<span class="string">"100"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h1 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h1><p>多对多关系也很常见，例如学生与选修课之间的关系，一个学生可以选择多门选修课，而每个选修课又可以被多名学生选择。<code>数据库</code>中的多对多关联关系一般需采用中间表的方式处理，将多对多转化为两个一对多。<br><code>学生：</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.suxiaolei.hibernate.pojos.Student"</span> <span class="attr">table</span>=<span class="string">"student"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">type</span>=<span class="string">"integer"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">type</span>=<span class="string">"string"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"courses"</span> <span class="attr">inverse</span>=<span class="string">"false"</span> <span class="attr">cascade</span>=<span class="string">"save-update"</span> <span class="attr">table</span>=<span class="string">"student_course"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"student_id"</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">class</span>=<span class="string">"com.suxiaolei.hibernate.pojos.Course"</span></span></div><div class="line">                <span class="attr">column</span>=<span class="string">"course_id"</span>&gt;<span class="tag">&lt;/<span class="name">many-to-many</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>课程：</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.suxiaolei.hibernate.pojos.Course"</span> <span class="attr">table</span>=<span class="string">"course"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">type</span>=<span class="string">"integer"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">type</span>=<span class="string">"string"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"students"</span> <span class="attr">inverse</span>=<span class="string">"true"</span> <span class="attr">cascade</span>=<span class="string">"save-update"</span> <span class="attr">table</span>=<span class="string">"student_course"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"course_id"</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">class</span>=<span class="string">"com.suxiaolei.hibernate.pojos.Student"</span></span></div><div class="line">                <span class="attr">column</span>=<span class="string">"student_id"</span>&gt;<span class="tag">&lt;/<span class="name">many-to-many</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h1 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h1><blockquote>
<p>一对一关系就球队与球队所在地之间的关系，一支球队仅有一个地址，而一个地区也仅有一支球队（貌似有点勉强，将就下吧）。数据表间一对一关系的表现有两种，一种是外键关联，一种是主键关联。图示如下：</p>
</blockquote>
<h2 id="一对一外键关联："><a href="#一对一外键关联：" class="headerlink" title="一对一外键关联："></a>一对一外键关联：</h2><p><code>地址：</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.suxiaolei.hibernate.pojos.Adress"</span> <span class="attr">table</span>=<span class="string">"adress"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">type</span>=<span class="string">"integer"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"city"</span> <span class="attr">column</span>=<span class="string">"city"</span> <span class="attr">type</span>=<span class="string">"string"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        </div><div class="line">        <span class="tag">&lt;<span class="name">one-to-one</span> <span class="attr">name</span>=<span class="string">"team"</span> <span class="attr">class</span>=<span class="string">"com.suxiaolei.hibernate.pojos.Team"</span> <span class="attr">cascade</span>=<span class="string">"all"</span>&gt;</span><span class="tag">&lt;/<span class="name">one-to-one</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>球队：</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.suxiaolei.hibernate.pojos.Team"</span> <span class="attr">table</span>=<span class="string">"team"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">type</span>=<span class="string">"integer"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">type</span>=<span class="string">"string"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        </div><div class="line">        <span class="tag">&lt;<span class="name">many-to-one</span> <span class="attr">name</span>=<span class="string">"adress"</span> <span class="attr">class</span>=<span class="string">"com.suxiaolei.hibernate.pojos.Adress"</span> <span class="attr">column</span>=<span class="string">"adress_id"</span> <span class="attr">unique</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-one</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>一对一外键关联，其实可以看做是一对多的一种特殊形式，多方退化成一。多方退化成一只需要在<many-to-one>标签中设置”unique”=”true”。</many-to-one></p>
</blockquote>
<h2 id="一对一主键关联在hbm文件中的配置信息："><a href="#一对一主键关联在hbm文件中的配置信息：" class="headerlink" title="一对一主键关联在hbm文件中的配置信息："></a>一对一主键关联在hbm文件中的配置信息：</h2><p><code>地址</code>:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.suxiaolei.hibernate.pojos.Adress"</span> <span class="attr">table</span>=<span class="string">"adress"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">type</span>=<span class="string">"integer"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"city"</span> <span class="attr">column</span>=<span class="string">"city"</span> <span class="attr">type</span>=<span class="string">"string"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        </div><div class="line">        <span class="tag">&lt;<span class="name">one-to-one</span> <span class="attr">name</span>=<span class="string">"team"</span> <span class="attr">class</span>=<span class="string">"com.suxiaolei.hibernate.pojos.Team"</span> <span class="attr">cascade</span>=<span class="string">"all"</span>&gt;</span><span class="tag">&lt;/<span class="name">one-to-one</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>球队</code>:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.suxiaolei.hibernate.pojos.Team"</span> <span class="attr">table</span>=<span class="string">"team"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">type</span>=<span class="string">"integer"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"foreign"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"property"</span>&gt;</span>adress<span class="tag">&lt;/<span class="name">param</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">type</span>=<span class="string">"string"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        </div><div class="line">        <span class="tag">&lt;<span class="name">one-to-one</span> <span class="attr">name</span>=<span class="string">"adress"</span> <span class="attr">class</span>=<span class="string">"com.suxiaolei.hibernate.pojos.Adress"</span> <span class="attr">cascade</span>=<span class="string">"all"</span>&gt;</span><span class="tag">&lt;/<span class="name">one-to-one</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>一对一主键关联，是让两张的主键值一样。要使两表的主键相同，只能一张表生成主键，另一张表参考主键。</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"foreign"</span>&gt;</span></div><div class="line">　　<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"property"</span>&gt;</span>adress<span class="tag">&lt;/<span class="name">param</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div></pre></td></tr></table></figure>
<p><code>&quot;class&quot;=&quot;foreign&quot;</code>就是设置team表的主键参照adress属性的主键值。</p>
<h1 id="详情请看"><a href="#详情请看" class="headerlink" title="详情请看"></a>详情请看</h1><p><a href="http://blog.csdn.net/xrt95050/article/details/7322222" target="_blank" rel="external">Hibernate关联关系配置</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[J2EE-Hibernate-Session的缓存及对象的状态]]></title>
      <url>https://super3h.me/2017/01/25/J2EE-Hibernate-Session/</url>
      <content type="html"><![CDATA[<h1 id="Session的缓存"><a href="#Session的缓存" class="headerlink" title="Session的缓存"></a>Session的缓存</h1><p>Java是纯面向对象的语言，因此不可能像C语言那样直接操纵内存，例如声明一段可用的内存空间。在Java里面，缓存通常是指Java对象的属性占用的 内存空间，通常是一些集合类型的属性。<strong>在session接口的实现类SessionImpl中定义了一系列的Java集合，这些Java集合就构成了 Session的缓存。</strong><br>       使用缓存的一个很明显的好处就是可以减少数据库访问的频率，提高应用程序的性能，因为从内存中读取数据显然要比从数据库中查询快多了。</p>
<h1 id="Hibernate中Java对象的状态"><a href="#Hibernate中Java对象的状态" class="headerlink" title="Hibernate中Java对象的状态"></a>Hibernate中Java对象的状态</h1><p>在一个Hibernate应用中，Java对象可以处于以下三个状态之一：</p>
<ul>
<li><strong>瞬时状态(Transient)：</strong>也叫临时状态，处于这个状态的对象还被没有纳入Hibernate的缓存管理体系，跟任何session都不关联，在数据库中也没有对应的记录。超过作用域会被JVM垃圾回收器回收，一般是new出来且与session没有关联的对象。</li>
<li><strong>持久化状态(Persistent)：</strong>处于这个状态的对象位于Session的缓存中，并且和数据库中的一条数据记录相对应。并且相关联的session没有关闭，事务没有提交，持久对象状态发生改变，在事务提交时会影响到数据库(hibernate能检测到)。</li>
<li><strong>脱管状态(Detached)：</strong>也叫游离状态，处于这个状态的对象不再位于Session的缓存中，当前没有session与之关联；托管对象状态发生改变，hibernate不能检测到。<font color="red">它与临时对象的最大区别在于，游离对象在数据库中还可能存在一条与它对应的记录。</font><br>上述3个状态之间是可以相互转化的，<font color="blue">而且我们所说的状态都是针对某一个session实例而言的</font>，比方说，对象A对于session1而言是处于持久化状态的，因为它处于session1的缓存中，但是对于session2而言对象A并不在它的缓存中，因此它是处于游离状态的。<pre><code>对于这几个状态的理解花费了我一定的时间，因为总是有一些稀奇古怪的念头在我脑海中产生。比如说，对于临时状态的定义，如果我新建一个对象，然后人为的让 它属性的值和数据库中的一条记录对应，包括id的取值都一样。此时它能否说是处于游离状态呢？因为它和一条记录想对应呀。实际上这些情况都是由于一些不和 规范的操作而产生的。在Hibernate应用中，&lt;font color=&apos;green&apos;&gt;无论Java对象处于临时状态、持久化状态还是游离状态，应用程序都不应该修改它的OID。&lt;/font&gt;&lt;font color=&apos;red&apos;&gt;OID（也就是实体类中的主键属性）&lt;/font&gt;的值应该由Hibernate来维护和负责，实际上Hibernate在同步缓存中的对象与数据库中的记录时，都是通过OID来进行关联和映射的，如果应用程序人为的修改了对象的OID，就会导致一些莫名其妙的错误，而且这样也不利于数据的同步。
</code></pre><p align="center">至于对象之间的状态转化，如下图：</p><br><img src="http://s6.sinaimg.cn/mw690/7ffb8dd5gcccd9a8e8325&amp;690" alt=""><h1 id="详情请看"><a href="#详情请看" class="headerlink" title="详情请看"></a>详情请看</h1><a href="http://blog.renren.com/share/222980861/1421652349" target="_blank" rel="external">Hibernate持久化对象的生命周期</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[J2EE-Hibernate的核心接口]]></title>
      <url>https://super3h.me/2017/01/25/J2EE-Hibernate%E7%9A%84%E6%A0%B8%E5%BF%83%E6%8E%A5%E5%8F%A3/</url>
      <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><blockquote>
<p>Hibernate作为持久成中间件，它的具体实现对与上层调用是透明的，即上层通过接口来调用Hibernate的具体实现，所以对于入门级别的讨论来说，自然应该先从接口开始了。</p>
</blockquote>
<p>所有的Hibernate应用都会访问它的5个核心接口，分别如下：</p>
<ul>
<li>Configuration接口：</li>
<li>SessionFactory接口：</li>
<li>Session接口：</li>
<li>Transaction接口：</li>
</ul>
<h1 id="Configuration接口"><a href="#Configuration接口" class="headerlink" title="Configuration接口"></a>Configuration接口</h1><blockquote>
<p><strong>Configuration用于配置并启动Hibernate。Hibernate应用通过Configuration的实例来指定对象-关系映射文件</strong> ,或通过Configuration动态配置Hibernate的属性，然后通过Configuration来创建相应的SessionFactory实例。Configuration实例是什么时候指定ORM文件的地址的呢？我们可以查看Configuration的源代码，它的configure()方法是这样实现的：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> Configuration <span class="title">configure</span><span class="params">()</span> <span class="keyword">throws</span> HibernateException </span>&#123;</div><div class="line">       configure( <span class="string">"/hibernate.cfg.xml"</span> );<span class="comment">//此处指定了ORM文件的位置</span></div><div class="line">       <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>原来它是在这里指定了ORM文件的位置，<strong>这就是为什么Hibernate总是默认到classpath下去寻找hibernate.cfg.xml 文件的原因了。</strong>  <font color="red">实际上我们还可以通过configure(String resource)来动态的指定配置文件</font>，只不过通常我们都是采用的默认设置罢了。这样的话我们的配置文件就都被读取了，同时配置文件中通 过<mapping>元素引入的映射文件也被读取了。</mapping></p>
<h1 id="SessionFactory接口"><a href="#SessionFactory接口" class="headerlink" title="SessionFactory接口"></a>SessionFactory接口</h1><p>一个SessionFactory对应一个数据源，它是个重量级对象，不可随意生成多个实例。对于一般的单数据库应用来说，只需要一个 SessionFactory就足够了。当然如果有多个数据库的话，还是需要为每个数据库生成对应的SessionFactory？一般而言，<strong>一个SessionFactory对象就代表一个数据库存储源</strong>。它是线程安全的，同一 个实例可以被应用中的多个线程共享。由此我们看出SessionFactory具备如下两个特点：</p>
<ol>
<li>线程安全。整个应用共用一个SessionFactory实例。</li>
<li>重量级。在SessionFactory中存放了Hibernate配置信息以及映射元素据信息，这些都需要很大的缓存。<br><strong>一般来说，SessionFactory的主要作用就是创建Session对象，所有的线程都是从SessionFactory中获取Session对象来处理客户请求的。</strong></li>
</ol>
<blockquote>
<p>也许你会很好奇，SessionFactory为什么是重量级对象呢？我也同样好奇，通过查看Hibernate的源码，发现 SessionFactory存放了大量预定义的SQL语句以及映射元数据，所以自然需要很大的缓存了，同时需要一定的CPU时间来计算生成。想想 Hibernate的这个设计是很有意义的，因为有了Mapping文件，很多SQL语句就已经确定了，只需要动态生成一次就可以了，这个设计也是为了提 高持久化的效率。</p>
</blockquote>
<h1 id="Session接口"><a href="#Session接口" class="headerlink" title="Session接口"></a>Session接口</h1><p>从SessionFactory中可以获得Session实例。<br>Session接口是Hibernate应用中使用最广泛的接口了，<strong>它是持久化管理器，提供添加、更新、删除、加载、查询对象</strong>。Session的每个方法都值得我们去研究和探讨，不过最常用的还是save、saveOrUpdate、update、delete、createQuery等方法了，关于Session是如何作用的以及它的工作原理在以后的实践中再一步一步的进行学习和探讨！！<strong>Session不是线程安 全的，所以应避免多个线程共享同一个Session实例。</strong>Session是轻量级对象，它的创建和销毁不需要太多资源，这意味着在应用中可以经常创建和销 毁Session对象。<br>Session有一个缓存，称之为Hibernate的一级缓存，它存放当前工作单元加载的持久化对象，每个Session都有自己的缓存，缓存中的对象只能被当前工作单元访问。</p>
<h1 id="Transaction接口"><a href="#Transaction接口" class="headerlink" title="Transaction接口"></a>Transaction接口</h1><p>Transaction是Hibernate的数据库事务接口，它对底层的事务接口进行了封装，底层事务接口包括:</p>
<ul>
<li>JDBC API</li>
<li>JTA(Java Transaction API)</li>
<li>CORBA(Common Object Requet Broker Architecture) API<br>Hibernate应用可以通过一致Transaction接口来声明事务边界，这有助于应用可以在不同的环境或容器中移植。具体的事务实现使用在Hibernate.properties中进行指定。</li>
</ul>
<h1 id="Query和Criteria接口（也叫条件查询接口）"><a href="#Query和Criteria接口（也叫条件查询接口）" class="headerlink" title="Query和Criteria接口（也叫条件查询接口）"></a>Query和Criteria接口（也叫条件查询接口）</h1><p><strong>这两个是Hibernate的查询接口，用于向数据库查询对象，以及控制执行查询的过程。</strong>Query实例包装了一个HQL(Hibernate Query Language)来查询。Criteria接口完全封装了基于字符串形式的查询语句，比Query更面向对象，Criteria更擅长执行动态查询。</p>
<ul>
<li>标准化对象查询(Criteria Query)：以对象的方式进行查询，将查询语句封装为对象操作。优点：可读性好，符合Java 程序员的编码习惯。缺点：不够成熟，不支持投影（projection）或统计函数（aggregation）</li>
<li>Hibernate语言查询（Hibernate Query Language，HQL）：它是完全面向对象的查询语句，查询功能非常强大，具备继承、多态和关联等特性 。Hibernate官方推荐使用HQL进行查询。</li>
</ul>
<blockquote>
<p>以上为5个核心接口，当然Hibernate不仅仅只有这5个接口了，还有回调接口、映射类型接口、可扩展的接口等等，但这些接口不同于以上的5个核心接口，因为这些接口在一般的Hibernate中不一定能用到，所以暂不提及，在以后的高级应用中再做详述吧。</p>
</blockquote>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p>请参考  <a href="http://blog.sina.com.cn/s/blog_7ffb8dd501014372.html" target="_blank" rel="external">Hibernate的核心接口</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[J2EE-Hibernate数据源配置]]></title>
      <url>https://super3h.me/2017/01/25/J2EE-Hibernate%E6%95%B0%E6%8D%AE%E6%BA%90%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<h1 id="c3p0连接池"><a href="#c3p0连接池" class="headerlink" title="c3p0连接池"></a>c3p0连接池</h1><blockquote>
<p>c3p0连接池是Hibernate推荐使用的连接池，若需要使用该连接池时，需要将c3p0的jar包加入到classpath中。c3p0连接池的配置示例如下hibernate.cfg.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=”1.0″ encoding=”UTF-8″?&gt;</div><div class="line"></div><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-configuration PUBLIC</span></div><div class="line"></div><div class="line">“-//Hibernate/Hibernate Configuration DTD 3.0//EN”</div><div class="line"></div><div class="line">“http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd“&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">hibernate-configuration</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">session-factory</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–</span> 显示实际操作数据库时的<span class="attr">SQL</span> –&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”show_sql”</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–</span> <span class="attr">SQL</span>方言，这边设定的是<span class="attr">MySQL</span> –&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”dialect”</span>&gt;</span>net.sf.hibernate.dialect.MySQLDialect<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–驱动程序，在后续的章节中将讲述mysql、sqlserver和Oracle数据库的配置</span> –&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”connection.driver_class”</span>&gt;</span>……<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–</span> <span class="attr">JDBC</span> <span class="attr">URL</span> –&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”connection.url”</span>&gt;</span>……<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–</span> 数据库用户名 –&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”connection.username”</span>&gt;</span>user<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–</span> 数据库密码 –&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”connection.password”</span>&gt;</span>pass<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”c3p0.min_size”</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”c3p0.max_size”</span>&gt;</span>20<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”c3p0.timeout”</span>&gt;</span>1800<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”c3p0.max_statements”</span>&gt;</span>50<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–</span> 对象与数据库表格映像文件 –&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">”com/amigo/pojo/User.hbm.xml”/</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">”com/amigo/pojo/Org.hbm.xml”/</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">session-factory</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-configuration</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="MySql连接配置"><a href="#MySql连接配置" class="headerlink" title="MySql连接配置"></a>MySql连接配置</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=”1.0″ encoding=”UTF-8″?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-configuration PUBLIC</span></div><div class="line">“-//Hibernate/Hibernate Configuration DTD 3.0//EN”</div><div class="line">“http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd“&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">hibernate-configuration</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">session-factory</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–</span> 各属性的配置–&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!—为true表示将Hibernate发送给数据库的sql显示出来</span> –&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”show_sql”</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–</span> <span class="attr">SQL</span>方言，这边设定的是<span class="attr">MySQL</span> –&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”dialect”</span>&gt;</span>net.sf.hibernate.dialect.MySQLDialect<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–</span> 一次读的数据库记录数 –&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”jdbc.fetch_size”</span>&gt;</span>50<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–</span> 设定对数据库进行批量删除 –&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”jdbc.batch_size”</span>&gt;</span>30<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–驱动程序–</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”connection.driver_class”</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–</span> <span class="attr">JDBC</span> <span class="attr">URL</span> –&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”connection.url”</span>&gt;</span>jdbc:mysql://localhost/dbname?characterEncoding=gb2312<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–</span> 数据库用户名–&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”connection.username”</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!–</span> 数据库密码–&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">”connection.password”</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">!—映射文件</span> –&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">”com/amigo/pojo/User.hbm.xml”/</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">”com/amigo/pojo/Org.hbm.xml”/</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">session-factory</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-configuration</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>上面使用的驱动类是com.mysql.jdbc.Driver。需要将MySql的连接器jar包(eg. mysql-connector-java-5.0.4-bin.jar)加入到classpath中。</p>
</blockquote>
<h1 id="更多配置"><a href="#更多配置" class="headerlink" title="更多配置"></a>更多配置</h1><p>请参考<a href="http://blog.sina.com.cn/s/blog_7ffb8dd5010142jc.html" target="_blank" rel="external">Hibernate配置各种数据源详解</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hexo-github cards和微博秀的生成]]></title>
      <url>https://super3h.me/2017/01/24/Hexo-%E6%8F%92%E4%BB%B6/</url>
      <content type="html"><![CDATA[<h1 id="搭建博客"><a href="#搭建博客" class="headerlink" title="搭建博客"></a>搭建博客</h1><p>原文链接：请参考如下地址–&gt;<a href="http://www.jianshu.com/p/73741f7934c3" target="_blank" rel="external">我是怎么走向Github建立博客掉坑之路的？</a>  </p>
<font color="red">切记 里面的链接一定要都看完 过程虽然相同 但步骤不同，取其优点即可！！！</font>

<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><blockquote>
<p><code>github-cards</code>生成问题<br>微博秀生成问题</p>
<h2 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h2><p>由于<code>github</code>完整信息没填完整导致插件无法获取信息，所以名片显示不出来。方法如下：</p>
</blockquote>
<p><img src="/2017/01/24/Hexo-插件/github-setting.png" alt="github-setting"></p>
<p><img src="/2017/01/24/Hexo-插件/github-profile.png" alt=""></p>
<blockquote>
<p>完成后结果如下:<br><img src="/2017/01/24/Hexo-插件/github-cards.png" alt="github-cards"></p>
<p>HTTP和HTTPS交叉使用而产生跨域，使其没办法加载出来，解决方案如下：<br>在<code>jacman\layout\_partial</code>路径下的<code>head.ejs</code>的文件中添加如下语句:<br><code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;upgrade-insecure-requests&quot; /&gt;</code><br>位置如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;head&gt;</div><div class="line">  &lt;meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" /&gt;</div><div class="line">  &lt;meta charset="UTF-8"&gt;</div><div class="line">  &lt;%</div><div class="line">  var title = page.title;</div><div class="line"></div><div class="line">  if (is_archive())&#123;</div><div class="line">    title = __('archive_a');</div><div class="line"></div><div class="line">    if (is_month())&#123;</div><div class="line">      title += ': ' + page.year + '/' + page.month;</div><div class="line">    &#125; else if (is_year())&#123;</div><div class="line">      title += ': ' + page.year;</div><div class="line">    &#125;</div><div class="line">  &#125; else if (is_category())&#123;</div><div class="line">    title =  __('categories')+' : ' + page.category;</div><div class="line">  &#125; else if (is_tag())&#123;</div><div class="line">    title = __('tags')+' : ' + page.tag;</div><div class="line">  &#125;</div><div class="line">  %&gt;</div></pre></td></tr></table></figure></p>
<p>最后表现为:<br><img src="/2017/01/24/Hexo-插件/weiboShow.png" alt="weiboShow"></p>
</blockquote>
<h1 id="本地图片无法再网上显示？？"><a href="#本地图片无法再网上显示？？" class="headerlink" title="本地图片无法再网上显示？？"></a>本地图片无法再网上显示？？</h1><p>请参考链接—-&gt;<a href="http://www.tuicool.com/articles/umEBVfI" target="_blank" rel="external">hexo 中无痛使用本地图片</a></p>
<p><font color="red">切记 文章名要和图片目录名一致！！！！</font></p>
<h1 id="更多详情请参考"><a href="#更多详情请参考" class="headerlink" title="更多详情请参考"></a>更多详情请参考</h1><p><a href="http://tengj.top/" target="_blank" rel="external">嘟嘟独立博客</a><br><a href="http://wuchong.me/blog/2014/11/20/how-to-use-jacman/" target="_blank" rel="external">如何使用 Jacman 主题</a><br><a href="http://www.tuicool.com/articles/I36zYr" target="_blank" rel="external">Markdown语法</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Java有关说明O的概念]]></title>
      <url>https://super3h.me/2017/01/24/Java-XO%E6%A6%82%E5%BF%B5/</url>
      <content type="html"><![CDATA[<h1 id="POJO"><a href="#POJO" class="headerlink" title="POJO"></a>POJO</h1><ul>
<li><code>POJO（Plain Old Java Object）</code>这种叫法是Martin Fowler、Rebecca Parsons和Josh MacKenzie在2000年的一次演讲的时候提出来的。按照Martin Fowler的解释是“Plain Old Java Object”，从字面上翻译为“纯洁老式的<code>java</code>对象”，但大家都使用“简单<code>java</code>对象”来称呼它。</li>
<li><code>POJO</code>的内在含义是指那些:</li>
<li>[x] 有一些<code>private</code>的参数作为对象的属性，然后针对每一个参数定义<code>get</code>和<code>set</code>方法访问的接口。没有从任何类继承、也没有实现任何接口，更没有被其它框架侵入的<code>java</code>对象。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;  </div><div class="line">  </div><div class="line">    <span class="keyword">private</span> String name;  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> name;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;  </div><div class="line">        <span class="keyword">this</span>.name = name;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> age;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;  </div><div class="line">        <span class="keyword">this</span>.age = age;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="JavaBean"><a href="#JavaBean" class="headerlink" title="JavaBean"></a>JavaBean</h1><ul>
<li><code>JavaBean</code> 是一种<code>JAVA</code>语言写成的可重用组件。<code>JavaBean</code>符合一定规范编写的<code>Java</code>类，不是一种技术，而是一种规范。大家针对这种规范，总结了很多开发技巧、工具函数。符合这种规范的类，可以被其它的程序员或者框架使用。它的方法命名，构造及行为必须符合特定的约定：</li>
<li>[x] 1、所有属性为<code>private</code>。</li>
<li>[x] 2、这个类必须有一个公共的缺省构造函数。即是提供无参数的构造器。</li>
<li>[x] 3、这个类的属性使用<code>getter</code>和<code>setter</code>来访问，其他方法遵从标准命名规范。</li>
<li>[x] 4、这个类应是可序列化的。实现<code>serializable</code>接口。 </li>
<li>[x] 因为这些要求主要是靠约定而不是靠实现接口，所以许多开发者把<code>JavaBean</code>看作遵从特定命名约定的<code>POJO</code>。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span></span>&#123;  </div><div class="line">      </div><div class="line">    <span class="comment">//实现serializable接口。  </span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;  </div><div class="line">      </div><div class="line">    <span class="keyword">private</span> String name;  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;  </div><div class="line">      </div><div class="line">    <span class="comment">//无参构造器  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserInfo</span><span class="params">()</span> </span>&#123;  </div><div class="line">          </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> name;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;  </div><div class="line">        <span class="keyword">this</span>.name = name;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> age;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;  </div><div class="line">        <span class="keyword">this</span>.age = age;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="comment">//javabean当中可以有其它的方法  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">userInfoPrint</span><span class="params">()</span></span>&#123;  </div><div class="line">        System.out.println(<span class="string">""</span>);  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>两者有什么区别？</li>
<li>[x] <code>POJO</code>其实是比<code>javabean</code>更纯净的简单类或接口。POJO严格地遵守简单对象的概念，而一些<code>JavaBean</code>中往往会封装一些简单逻辑。</li>
<li>[x] <code>pojo</code>的格式是用于数据的临时传递，它只能装载数据， 作为数据存储的载体，而不具有业务逻辑处理的能力。</li>
<li>[x] 而<code>javabean</code>虽然数据的获取与<code>pojo</code>一样，但是javabean当中可以有其它的方法。</li>
</ul>
<h1 id="DAO"><a href="#DAO" class="headerlink" title="DAO"></a>DAO</h1><ul>
<li><code>DAO</code>（data access objects）</li>
<li>[x] <code>DAO</code>是数据访问对象，<code>DAO</code>一般有接口和该接口的实现类，接口用于规范实现类。实现类一般用于操作数据库，如对数据库进行修改、添加、删除等操作，一般直接调用公共类<code>DAO</code>。 </li>
<li>什么是<code>DTO</code>（data transfer object）、什么是<code>VO</code>（value object）、什么是<code>PO</code>（persistent object）？</li>
<li><p>[x] 我们通过<code>DAO</code>将<code>POJO</code>持久化为<code>PO</code>，用<code>PO</code>组装出来<code>VO</code>、<code>DTO</code>。</p>
<blockquote>
<p>[x] 总结下，我认为一个对象究竟是什么O要看具体环境，在不同的层、不同的应用场合，对象的身份也不一样，而且对象身份的转化也是很自然的。就像你对老婆来说就是老公，对父母来说就是子女。设计这些概念的初衷不是为了唬人而是为了更好的理解和处理各种逻辑，让大家能更好的去用面向对象的方式处理问题。<br>比如：我们一张表有100个字段，那么对应的PO就有100个属性。但是我们界面上只要显示10个字段，客户端用<code>WEBservice</code>来获取数据，没有必要把整个<code>PO</code>对象传递到客户端，这时我们就可以用只有这10个属性的<code>DTO</code>来传递结果到客户端，这样也不会暴露服务端表结构.到达客户端以后，如果用这个对象来对应界面显示，那此时它的身份就转为<code>VO</code>。</p>
</blockquote>
</li>
<li><p>什么是<code>BO</code>（business object）？</p>
</li>
<li>[x] <code>BO</code>: <code>POJO</code>在业务层的体现，对于业务操作来说，更多的是从业务上来包装对象，如一个<code>User</code>的<code>BO</code>，可能包括<code>name, age, sex, privilege, group</code>等，这些属性在数据库中可能会在多张表中，因为每一张表对应一个<code>PO</code>，而我们的<code>BO</code>需要这些<code>PO</code>组合起来(或说重新拼装)才能成为业务上的一个完整对象。</li>
</ul>
<h1 id="EJB"><a href="#EJB" class="headerlink" title="EJB"></a>EJB</h1><ul>
<li><code>EJB</code>(Enterprise JavaBean): </li>
<li>[x] 我认为它是一组”功能<code>JavaBean</code>的集合。上面说了<code>JavaBean</code>是实现了一种规范的<code>Java</code>对象。这里说EJB是一组<code>JavaBean</code>，的意思是这一组<code>JavaBean</code>组合起来实现了某个企业组的业务逻辑。这里的一组<code>JavaBean</code>不是乱组合的，它们要满足能实现某项业务功能的搭配。找个比方，对于一身穿着来说，包括一顶帽子，一件衣服，一条裤子，两只鞋。这穿着就是<code>EJB</code>，其它的就是一个<code>JavaBean</code></li>
</ul>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://www.cnblogs.com/yw-ah/p/5795751.html" target="_blank" rel="external">JAVABEAN EJB POJO区别 </a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hibernate浅学]]></title>
      <url>https://super3h.me/2017/01/24/J2EE-Hibernate/</url>
      <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><blockquote>
<p>Hibernate是一种对JDBC做了轻量级封装的对象—关系映射工具，所谓轻量级封装，是指Hibernate并没有完全封装JDBC，Java应用即可以通过Hibernate API访问数据库，还可以绕过Hibernate API，直接通过JDBC API来访问数据库。</p>
</blockquote>
<ul>
<li><code>Hibernate</code>官网下载地址<a href="http://www.hibernate.org" target="_blank" rel="external">Hibernate官网</a>。现在最新的是： hibernate-release-5.2.5.Final<blockquote>
<p>解压后的目录结构：<br><code>Documentation</code>: 该文件夹下是开发帮助文档<br><code>Lib</code>: 该文件夹是开发使用的库。以下包为必须的：</p>
<ul>
<li><code>required</code>目录是开发时必须导入的<code>JAR</code>文件；</li>
<li><code>optional\c3p0</code>目录为开源的<code>JDBC</code>连接池(与其相对应的为的<code>dbcp</code>,区别：<code>dbcp</code>没有自动回收空闲连接的功能||<code>c3p0</code>有自动回收空闲连接功能，一般都用c3p0)</li>
<li><code>mysql-connector-java</code>JDBC驱动包<br><code>Project</code>: 该文件夹是项目源码文件</li>
</ul>
</blockquote>
</li>
<li>持久化JAVA类必须遵循的原则<blockquote>
<p>A、为类的持久化字段声明访问方法（<code>get/set</code>），<code>Hibernate</code>对<code>JavaBeans</code>风格的属性实行持久化。<br>B、实现一个默认的构造方法，这样的话<code>Hibernate</code>就可以使用<code>Constructor.newInstance()</code>方法来实例化对象。<br>C、如果是集合类型的属性，它的类型必须定义为集合的接口，例如：<code>List</code>、<code>Set</code><br>D、提供一个标识属性（<code>Identifier property</code> )，如果没有该属性，一些功能不起作用，比如：级联更新，<code>session.saveOrUpdate()</code>。</p>
</blockquote>
</li>
</ul>
<h1 id="开发步骤"><a href="#开发步骤" class="headerlink" title="开发步骤"></a>开发步骤</h1><h2 id="编写实体类UserInfor-java"><a href="#编写实体类UserInfor-java" class="headerlink" title="编写实体类UserInfor.java"></a>编写实体类UserInfor.java</h2><ul>
<li>实体类中的属性名有二个以上（含两个）的小写字母开头！！！！<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfor</span> </span>&#123;</div><div class="line">   </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> userId;</div><div class="line">    <span class="keyword">private</span> String userName;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> userAge;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserInfor</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// 一定要有一个无参的构造方法，因为Hibernate都是根据他生成对象的</span></div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserInfor</span><span class="params">(<span class="keyword">int</span> userid)</span></span></div><div class="line">    &#123;<span class="comment">// 最好要有一个含主键的构造方法，因为在Hibernate中便于查询</span></div><div class="line">        <span class="keyword">this</span>.userId = userid;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//....下面都是get***（）set***()封装属性</span></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="创建实体类的映射文件-hbm-xml（与实体类同包，并且名字可以自定义）"><a href="#创建实体类的映射文件-hbm-xml（与实体类同包，并且名字可以自定义）" class="headerlink" title="创建实体类的映射文件*.hbm.xml（与实体类同包，并且名字可以自定义）"></a>创建实体类的映射文件<em>*</em>.hbm.xml（与实体类同包，并且名字可以自定义）</h2><blockquote>
<p>技巧: 可以在上面解压后的<code>Project</code>文件夹中搜索<code>*.hbm.xml</code>，找到示例文在加以修改即可！！！</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-mapping PUBLIC</span></div><div class="line">        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"</div><div class="line">        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</div><div class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span> <span class="attr">package</span>=<span class="string">"com.entity"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"UserInfor"</span> <span class="attr">table</span>=<span class="string">"Wuser"</span> &gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"userId"</span> &gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"native"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userName"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userAge"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userBirthday"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>具体hibernate详情请看<a href="http://chen25362936.blog.163.com/blog/static/2565547420101113112752675/" target="_blank" rel="external">详解</a></p>
</blockquote>
<ul>
<li>根元素：<code>&lt;hibernate-mapping&gt;</code><blockquote>
<p>每一个<code>hbm.xml</code>文件都有唯一的一个根元素，包含一些可选的属性 <code>package</code>：指定一个包前缀，即该<code>xml</code>文件的位置</p>
</blockquote>
</li>
<li><code>&lt;class&gt;</code>定义类<blockquote>
<p>根元素的子元素，用以定义一个持久化类与数据表的映射关系,如下是该元素包含的一些可选的属性–&gt; <code>name</code>：持久化类(或者接口)的<code>Java</code>全限定名,如果这个属性不存在,则Hibernate将假定这是一个非<code>POJO</code>的实体映射；<code>table</code>：对应数据库表名</p>
</blockquote>
</li>
<li><code>&lt;id&gt;</code>定义主键<blockquote>
<p><code>Hibernate</code>使用<code>OID</code>(对象标识符)来标识对象的唯一性，<code>OID</code>是关系数据库中主键在<code>Java</code>对象模型中的等价物,在运行时,<code>Hibernate</code>根据<code>OID</code>来维持<code>Java</code>对象和数据库表中记录的对应关系</p>
<ul>
<li><code>name</code>：持久化类的标识属性的名字</li>
<li><code>column</code>：数据库表的主键这段的名字</li>
<li><code>&lt;generator&gt;</code>设置主键生成方式<ol>
<li><code>increment</code>：由hibernate自动递增生成标识符,用于为long, short或者int类型生成唯一标识。</li>
<li><code>identity</code>：由底层数据库生成标识符(自动增长),返回的标识符是 long, short 或者int类型的。</li>
<li><code>sequence</code>：hibernate根据底层数据库序列生成标识符,返回的标识符 是long, short或者 int类型的。</li>
<li><code>hilo</code>：使用一个高/低位算法来高效的生成long, short 或者int类型的标识符。</li>
<li><code>uuid.hex</code>：用一个128-bit的UUID算法生成32位字符串类型的标识符。</li>
<li><code>native</code>  :根据底层数据库的能力选择identity, sequence 或者hilo中的一个。<font color="red">推荐用这个</font></li>
<li><code>assigned</code>：让应用程序在save()之前为对象分配一个标示符。 </li>
<li><code>foreign</code>：:使用另外一个相关联的对象的标识符。和<one-to-one>联合一起使用。</one-to-one></li>
<li><code>详情：</code>:<a href="http://blog.csdn.net/ye1992/article/details/19632001" target="_blank" rel="external">Hibernate generator</a>||<a href="http://blog.sina.com.cn/s/blog_7ffb8dd5010144yo.html" target="_blank" rel="external">关系映射文件<em>*</em>.hbm.xml详解</a></li>
</ol>
</li>
<li>该元素的作用是指定主键的生成器，通过一个class属性指定生成器对应的类。(通常与<id>元素结合使用)，–native是Hibernate主键生成器的实现算法之一，由Hibernate根据底层数据库自行判断采用identity、hilo、sequence其中一种作为主键生成方式。</id></li>
<li><code>&lt;property&gt;</code>定义属性<br>用于持久化类的属性与数据库表字段之间的映射,包含如下属性：</li>
<li>name：持久化类的属性名，以小写字母开头</li>
<li>column：数据库表的字段名<br><a href="http://chen25362936.blog.163.com/blog/static/2565547420101113112752675/" target="_blank" rel="external">详细配置点此处</a></li>
</ul>
</blockquote>
</li>
</ul>
<h2 id="编写Hibernate的配置文件hibernate-cfg-xml（这里的名字是固定的）"><a href="#编写Hibernate的配置文件hibernate-cfg-xml（这里的名字是固定的）" class="headerlink" title="编写Hibernate的配置文件hibernate.cfg.xml（这里的名字是固定的）"></a>编写Hibernate的配置文件hibernate.cfg.xml（这里的名字是固定的）</h2><p>Hibernate配置的两种方法：</p>
<ul>
<li>属性文件：hibernate.properties</li>
<li>调用代码：Configuration cfg=new Configuration();</li>
<li>XML文件：hibernate.cfg.xml</li>
<li>调用代码： Configuration cfg=new Configuration().configure();<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version='1.0' encoding='utf-8'?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-configuration PUBLIC</span></div><div class="line">        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"</div><div class="line">        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"&gt;</div><div class="line"><span class="tag">&lt;<span class="name">hibernate-configuration</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- </span></div><div class="line">		一个session-factory只能连接一个数据库</div><div class="line">	--&gt;</div><div class="line">	<span class="tag">&lt;<span class="name">session-factory</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- </span></div><div class="line">			数据库的用户名</div><div class="line">		--&gt;</div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connection.username"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- </span></div><div class="line">			密码</div><div class="line">		--&gt;</div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connection.password"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- </span></div><div class="line">			url</div><div class="line">		--&gt;</div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connection.url"</span>&gt;</span></div><div class="line">			jdbc:mysql://localhost:3306/hibernateday02</div><div class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- </span></div><div class="line">			作用：根据持久化类和映射文件生成表</div><div class="line">			validate: 每次加载hibernate时，验证创建数据库表结构，只会和数据库中的表进行比较，不会创建新表，但是会插入新值。</div><div class="line">			create-drop: 每次加载hibernate时根据model类生成表，但是sessionFactory一关闭,表就自动删除。</div><div class="line">			create: 每次加载hibernate时都会删除上一次的生成的表，然后根据你的model类再重新来生成新表，哪怕两次没有任何改变也要这样执行，这就是导致数据库表数据丢失的一个重要原因。</div><div class="line">			update: 最常用的属性，第一次加载hibernate时根据model类会自动建立起表的结构（前提是先建立好数据库），以后加载hibernate时根据 model类自动更新表结构，即使表结构改变了但表中的行仍然存在不会删除以前的行。要注意的是当部署到服务器后，表结构是不会被马上建立起来的，是要等 应用第一次运行起来后才会。</div><div class="line">		--&gt;</div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- </span></div><div class="line">			显示hibernate内部生成的sql语句</div><div class="line">		--&gt;</div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">"hhh/domain/Person.hbm.xml"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">"hhh/domain1/Clazz.hbm.xml"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">"hhh/domain1/student.xml"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">"hhh/Person.hbm.xml"</span> /&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;/<span class="name">session-factory</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-configuration</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="测试类操作"><a href="#测试类操作" class="headerlink" title="测试类操作"></a>测试类操作</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</div><div class="line">   	<span class="comment">// 读取Hibernate的配置文件  hibernamte.cfg.xml文件</span></div><div class="line">	Configuration configuration = <span class="keyword">new</span> Configuration().configure();</div><div class="line">	<span class="comment">// 创建会话工厂</span></div><div class="line">	SessionFactory sessionFactory = configuration.buildSessionFactory();</div><div class="line">	<span class="comment">// 创建数据操作会话</span></div><div class="line">	Session session = sessionFactory.openSession();</div><div class="line">	<span class="comment">// 开启事务并创建事物</span></div><div class="line">	Transaction transaction = session.beginTransaction();</div><div class="line">       <span class="comment">// 创建对象</span></div><div class="line">	Person person = <span class="keyword">new</span> Person();</div><div class="line">	person.setName(<span class="string">"hhh"</span>);</div><div class="line">	session.save(person);</div><div class="line">       <span class="comment">// 事务提交</span></div><div class="line">	transaction.commit();</div><div class="line">       <span class="comment">// 关闭会话</span></div><div class="line">	session.close();</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="configure解析"><a href="#configure解析" class="headerlink" title="configure解析"></a>configure解析</h1><p><img src="/2017/01/24/J2EE-Hibernate/configure.png" alt=""></p>
<h1 id="hibernate运行过程"><a href="#hibernate运行过程" class="headerlink" title="hibernate运行过程"></a>hibernate运行过程</h1><p><img src="/2017/01/24/J2EE-Hibernate/process.png" alt=""></p>
<h1 id="数据库框架的比较"><a href="#数据库框架的比较" class="headerlink" title="数据库框架的比较"></a>数据库框架的比较</h1><p><img src="/2017/01/24/J2EE-Hibernate/hibernate.png" alt=""><br><img src="/2017/01/24/J2EE-Hibernate/jdbc.png" alt=""></p>
<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p>请点此处<a href="http://blog.sina.com.cn/s/blog_7ffb8dd5010142hu.html" target="_blank" rel="external">Hibernate初学  基础配置详解</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Eclipse-PyDev安装]]></title>
      <url>https://super3h.me/2017/01/23/Eclipse-PyDev/</url>
      <content type="html"><![CDATA[<h1 id="在Eclipse中安装pydev插件"><a href="#在Eclipse中安装pydev插件" class="headerlink" title="在Eclipse中安装pydev插件"></a>在Eclipse中安装pydev插件</h1><p>启动<code>Eclipse</code>, 点击<code>Help</code>-&gt;<code>Install New Software</code>…   在弹出的对话框中，点<code>Add</code> 按钮。 <code>Name</code>中填:<code>Pydev</code>,  <code>Location</code>中填<code>http://pydev.org/updates</code><br>然后一步一步装下去。  如果装的过程中，报错了。 就重新装。<br><img src="http://images.cnblogs.com/cnblogs_com/Bonker/708765/o_1.png" alt=""><br><img src="http://images.cnblogs.com/cnblogs_com/Bonker/708765/o_2.png" alt=""></p>
<h1 id="配置pydev解释器"><a href="#配置pydev解释器" class="headerlink" title="配置pydev解释器"></a>配置pydev解释器</h1><p>安装好<code>pydev</code>后， 需要配置<code>Python</code>解释器。<br>在<code>Eclipse</code>菜单栏中，点击<code>Windows</code> -&gt;<code>Preferences</code>.<br>在对话框中，点击<code>pyDev</code>-&gt;<code>Interpreter</code> - <code>Python</code>.  点击<code>New</code>按钮， 选择<code>python.exe</code>的路径, 打开后显示出一个包含很多复选框的窗口. 点<code>OK</code><br>如果是Mac系统， 点击<code>“Auto Config”</code> 按钮<br><img src="http://images.cnblogs.com/cnblogs_com/Bonker/708765/o_3.png" alt=""></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python-web_project学习]]></title>
      <url>https://super3h.me/2017/01/21/Python-Project/</url>
      <content type="html"><![CDATA[<h1 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h1><p><a href="http://docs.jinkan.org/docs/flask/patterns/packages.html" target="_blank" rel="external">flask文档</a></p>
<h1 id="简单的包"><a href="#简单的包" class="headerlink" title="简单的包"></a>简单的包</h1><h2 id="程序结构"><a href="#程序结构" class="headerlink" title="程序结构"></a>程序结构</h2><blockquote>
<p>项目最后得到的程序结构如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">/yourapplication</div><div class="line">    /runserver.py</div><div class="line">    /yourapplication</div><div class="line">        /__init__.py</div><div class="line">        /views.py</div><div class="line">        /static</div><div class="line">            /style.css</div><div class="line">        /templates</div><div class="line">            layout.html</div><div class="line">            index.html</div><div class="line">            login.html</div><div class="line">            ...</div></pre></td></tr></table></figure></p>
<p>由于原来的<code>python yourapplication/__init__.py</code>在<code>/yourapplication</code>里面不能再工作了，因此在项目最外层建立<code>runserver.py</code>，案例如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> yourapplication <span class="keyword">import</span> app</div><div class="line">app.run(debug=<span class="keyword">True</span>)</div></pre></td></tr></table></figure></p>
<p> <code>__init__.py</code>作用是方便导入(不用再对应到文件导入了—-&gt;<code>from flask.__init__ import app</code>)例子如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</div><div class="line">app = Flask(__name__)</div><div class="line"></div><div class="line"><span class="keyword">import</span> yourapplication.views</div></pre></td></tr></table></figure></p>
<p><code>views.py</code>案例如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> yourapplication <span class="keyword">import</span> app</div><div class="line"></div><div class="line"><span class="meta">@app.route('/')</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'Hello World!'</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="循环导入"><a href="#循环导入" class="headerlink" title="循环导入"></a>循环导入</h2><blockquote>
<p>每个 <code>Python</code> 程序员都会讨厌他们，而我们反而还添加了几个进去: 循环导入(在两个模块相互依赖对方的时候，就会发生循环导入)。在这里 <code>views.py</code> 依赖于 <code>__init__.py</code>。通常这被认为是个不好的主意，但是在这里实际上不会造成问题。之所以如此，是因为我们实际上没有在 <code>__init__.py</code> 里使用这些视图，而仅仅是保证模块被导入了。并且，我们是在文件的结尾这么做的。</p>
<p>这种做法仍然有些问题，但是如果您想要使用修饰器，那么没有其他更好的方法了。检查 <a href="http://docs.jinkan.org/docs/flask/becomingbig.html#becomingbig" target="_blank" rel="external">聚沙成塔</a> 这一章来寻找解决问题的些许灵感吧</p>
</blockquote>
<h1 id="漏洞学习"><a href="#漏洞学习" class="headerlink" title="漏洞学习"></a>漏洞学习</h1><h2 id="contextlib-closing-函数"><a href="#contextlib-closing-函数" class="headerlink" title="contextlib.closing()函数"></a>contextlib.closing()函数</h2><p><code>contextlib.closing()</code>函数是实现在一个block之后自动关闭<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">with</span> closing(&lt;module&gt;.open(&lt;arguments&gt;)) <span class="keyword">as</span> f:</div><div class="line">    &lt;block&gt;</div><div class="line"><span class="comment"># 相当于</span></div><div class="line">f=&lt;module&gt;.open(&lt;arguments&gt;)</div><div class="line"><span class="keyword">try</span>:</div><div class="line">    &lt;block&gt;</div><div class="line"><span class="keyword">finally</span>:</div><div class="line">    f.close()</div></pre></td></tr></table></figure></p>
<p><code>flask</code>数据库创建案例如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">connect_db</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> sqlite3.connect(app.config[<span class="string">'DATABASE'</span>])    <span class="comment">#连接数据库</span></div><div class="line"></div><div class="line"><span class="keyword">with</span> closing(connect_db()) <span class="keyword">as</span> db:    <span class="comment">#连接数据库，并执行完下面的代码之后关闭</span></div><div class="line">    <span class="keyword">with</span> app.open_resource(<span class="string">'schema.sql'</span>) <span class="keyword">as</span> f:    <span class="comment">#打开蓝本</span></div><div class="line">        db.cursor().executescript(f.read())    <span class="comment">#用数据库指针执行蓝本</span></div><div class="line">    db.commit()    <span class="comment">#提交</span></div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[python基础学习]]></title>
      <url>https://super3h.me/2017/01/20/Python-Base/</url>
      <content type="html"><![CDATA[<h1 id="format函数运用"><a href="#format函数运用" class="headerlink" title="format函数运用"></a><code>format</code>函数运用</h1><h2 id="通过位置映射"><a href="#通过位置映射" class="headerlink" title="通过位置映射"></a>通过位置映射</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">1</span>]: <span class="string">'&#123;0&#125;,&#123;1&#125;'</span>.format(<span class="string">'kzc'</span>,<span class="number">18</span>)  </div><div class="line">Out[<span class="number">1</span>]: <span class="string">'kzc,18'</span>  </div><div class="line">In [<span class="number">2</span>]: <span class="string">'&#123;&#125;,&#123;&#125;'</span>.format(<span class="string">'kzc'</span>,<span class="number">18</span>)  </div><div class="line">Out[<span class="number">2</span>]: <span class="string">'kzc,18'</span>  </div><div class="line">In [<span class="number">3</span>]: <span class="string">'&#123;1&#125;,&#123;0&#125;,&#123;1&#125;'</span>.format(<span class="string">'kzc'</span>,<span class="number">18</span>)  </div><div class="line">Out[<span class="number">3</span>]: <span class="string">'18,kzc,18'</span></div></pre></td></tr></table></figure>
<h2 id="通过关键字参数"><a href="#通过关键字参数" class="headerlink" title="通过关键字参数"></a>通过关键字参数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">5</span>]: <span class="string">'&#123;name&#125;,&#123;age&#125;'</span>.format(age=<span class="number">18</span>,name=<span class="string">'kzc'</span>)  </div><div class="line">Out[<span class="number">5</span>]: <span class="string">'kzc,18'</span></div></pre></td></tr></table></figure>
<h2 id="通过对象属性"><a href="#通过对象属性" class="headerlink" title="通过对象属性"></a>通过对象属性</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>  </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,age)</span>:</span>  </div><div class="line">        self.name,self.age = name,age  </div><div class="line">        <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span>  </div><div class="line">            <span class="keyword">return</span> <span class="string">'This guy is &#123;self.name&#125;,is &#123;self.age&#125; old'</span>.format(self=self)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">2</span>]: str(Person(<span class="string">'kzc'</span>,<span class="number">18</span>))  </div><div class="line">Out[<span class="number">2</span>]: <span class="string">'This guy is kzc,is 18 old'</span></div></pre></td></tr></table></figure>
<h2 id="通过下标"><a href="#通过下标" class="headerlink" title="通过下标"></a>通过下标</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">7</span>]: p=[<span class="string">'kzc'</span>,<span class="number">18</span>]</div><div class="line">In [<span class="number">8</span>]: <span class="string">'&#123;0[0]&#125;,&#123;0[1]&#125;'</span>.format(p)</div><div class="line">Out[<span class="number">8</span>]: <span class="string">'kzc,18'</span></div></pre></td></tr></table></figure>
<h2 id="格式限定符"><a href="#格式限定符" class="headerlink" title="格式限定符"></a>格式限定符</h2><h3 id="填充与对齐"><a href="#填充与对齐" class="headerlink" title="填充与对齐"></a>填充与对齐</h3><blockquote>
<p>填充常跟对齐一起使用<br>^、&lt;、&gt;分别是居中、左对齐、右对齐，后面带宽度<br>:号后面带填充的字符，只能是一个字符，不指定的话默认是用空格填充<br>比如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">15</span>]: <span class="string">'&#123;:&gt;8&#125;'</span>.format(<span class="string">'189'</span>)</div><div class="line">Out[<span class="number">15</span>]: <span class="string">'     189'</span></div><div class="line">In [<span class="number">16</span>]: <span class="string">'&#123;:0&gt;8&#125;'</span>.format(<span class="string">'189'</span>)</div><div class="line">Out[<span class="number">16</span>]: <span class="string">'00000189'</span></div><div class="line">In [<span class="number">17</span>]: <span class="string">'&#123;:a&gt;8&#125;'</span>.format(<span class="string">'189'</span>)</div><div class="line">Out[<span class="number">17</span>]: <span class="string">'aaaaa189'</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="精度与类型f"><a href="#精度与类型f" class="headerlink" title="精度与类型f"></a>精度与类型f</h3><blockquote>
<p>精度常跟类型f一起使用<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">44</span>]: <span class="string">'&#123;:.2f&#125;'</span>.format(<span class="number">321.33345</span>)</div><div class="line">Out[<span class="number">44</span>]: <span class="string">'321.33'</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="其他类型"><a href="#其他类型" class="headerlink" title="其他类型"></a>其他类型</h3><blockquote>
<p>主要就是进制了，b、d、o、x分别是二进制、十进制、八进制、十六进制。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">54</span>]: <span class="string">'&#123;:b&#125;'</span>.format(<span class="number">17</span>)</div><div class="line">Out[<span class="number">54</span>]: <span class="string">'10001'</span></div><div class="line">In [<span class="number">55</span>]: <span class="string">'&#123;:d&#125;'</span>.format(<span class="number">17</span>)</div><div class="line">Out[<span class="number">55</span>]: <span class="string">'17'</span></div><div class="line">In [<span class="number">56</span>]: <span class="string">'&#123;:o&#125;'</span>.format(<span class="number">17</span>)</div><div class="line">Out[<span class="number">56</span>]: <span class="string">'21'</span></div><div class="line">In [<span class="number">57</span>]: <span class="string">'&#123;:x&#125;'</span>.format(<span class="number">17</span>)</div><div class="line">Out[<span class="number">57</span>]: <span class="string">'11'</span></div></pre></td></tr></table></figure></p>
<p>用逗号还能用来做金额的千位分隔符<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">47</span>]: <span class="string">'&#123;:,&#125;'</span>.format(<span class="number">1234567890</span>)</div><div class="line">Out[<span class="number">47</span>]: <span class="string">'1,234,567,890'</span></div></pre></td></tr></table></figure></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python-jinja 学习]]></title>
      <url>https://super3h.me/2017/01/20/Python-jinja/</url>
      <content type="html"><![CDATA[<h1 id="注册过滤器"><a href="#注册过滤器" class="headerlink" title="注册过滤器"></a>注册过滤器</h1><blockquote>
<p>如果你要在 Jinja2 中注册你自己的过滤器，你有两种方法。你可以把它们手动添加到应用的 jinja_env 或者使用 template_filter() 装饰器。<br>下面两个例子作用相同，都是反转一个对象:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#第一种方法</span></div><div class="line"><span class="meta">@app.template_filter('reverse')</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">reverse_filter</span><span class="params">(s)</span>:</span></div><div class="line">    <span class="keyword">return</span> s[::<span class="number">-1</span>]</div><div class="line"></div><div class="line"><span class="comment">#第二种方法</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">reverse_filter</span><span class="params">(s)</span>:</span></div><div class="line">    <span class="keyword">return</span> s[::<span class="number">-1</span>]</div><div class="line">app.jinja_env.filters[<span class="string">'reverse'</span>] = reverse_filter</div></pre></td></tr></table></figure></p>
<p>在使用装饰器的情况下，如果你想以函数名作为过滤器名，参数是可选的。注册之后， 你可以在模板中像使用 Jinja2 内置过滤器一样使用你的过滤器，请参考下面例子：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;% <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] | reverse %&#125;</div><div class="line">    &#123;&#123;x&#125;&#125;</div><div class="line">&#123;% endfor %&#125;</div><div class="line"><span class="comment">#输出</span></div><div class="line"><span class="number">3</span> <span class="number">2</span> <span class="number">1</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="上下文处理器"><a href="#上下文处理器" class="headerlink" title="上下文处理器"></a>上下文处理器</h1><blockquote>
<p>Flask 上下文处理器自动向模板的上下文中插入新变量。上下文处理器在模板渲染之前运行，并且可以在模板上下文中插入新值。上下文处理器是一个返回字典的函数，这个字典的键值最终将传入应用中所有模板的上下文:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@app.context_processor</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">inject_user</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> dict(user=g.user)</div></pre></td></tr></table></figure></p>
<p>上面的上下文处理器使得模板可以使用一个名为 user ，值为 g.user 的变量。 不过这个例子不是很有意思，因为 g 在模板中本来就是可用的，但它解释了上下文处理器是如何工作的。<br>变量不仅限于值，上下文处理器也可以使某个函数在模板中可用（由于 Python 允许传递函数）:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@app.context_processor</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">utility_processor</span><span class="params">()</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">format_price</span><span class="params">(amount, currency=<span class="string">u'€'</span>)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">u'&#123;0:.2f&#125;&#123;1&#125;.format(amount, currency)</span></div><div class="line">    return dict(format_price=format_price)</div></pre></td></tr></table></figure></p>
<p>上面的上下文处理器使得 format_price 函数在所有模板中可用:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;&#123; format_price(<span class="number">0.333333</span>) &#125;&#125;</div><div class="line"><span class="comment">#输出</span></div><div class="line"><span class="number">0.33</span></div></pre></td></tr></table></figure></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python-sqlite3 学习]]></title>
      <url>https://super3h.me/2017/01/20/Python-sqlite3/</url>
      <content type="html"><![CDATA[<h1 id="安装与使用"><a href="#安装与使用" class="headerlink" title="安装与使用"></a>安装与使用</h1><p>##导入Python SQLITE数据库模块<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sqlite3</div></pre></td></tr></table></figure></p>
<h2 id="创建-打开数据库"><a href="#创建-打开数据库" class="headerlink" title="创建/打开数据库"></a>创建/打开数据库</h2><blockquote>
<p>在调用connect函数的时候，指定库名称，如果指定的数据库存在就直接打开这个数据库，如果不存在就新创建一个再打开。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cx = sqlite3.connect(<span class="string">"E:/test.db"</span>)</div></pre></td></tr></table></figure></p>
<p>也可以创建数据库在内存中。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">con = sqlite3.connect(<span class="string">":memory:"</span>)</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="数据库连接对象"><a href="#数据库连接对象" class="headerlink" title="数据库连接对象"></a>数据库连接对象</h2><blockquote>
<p>打开数据库时返回的对象cx就是一个数据库连接对象，它可以有以下操作：</p>
<ol>
<li>commit()–事务提交 </li>
<li>rollback()–事务回滚</li>
<li>close()–关闭一个数据库连接</li>
<li>cursor()–创建一个游标<br>关于commit()，如果isolation_level隔离级别默认，那么每次对数据库的操作，都需要使用该命令，你也可以设置isolation_level=None，这样就变为自动提交模式。</li>
</ol>
</blockquote>
<h2 id="ROW"><a href="#ROW" class="headerlink" title="ROW"></a>ROW</h2><blockquote>
<p><a href="https://docs.python.org/dev/library/sqlite3.html#sqlite3.Row" target="_blank" rel="external">官方解释</a>  案例如下<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; conn.row_factory = sqlite3.Row</div><div class="line">&gt;&gt;&gt; c = conn.cursor()</div><div class="line">&gt;&gt;&gt; c.execute('select * from stocks')</div><div class="line">&lt;sqlite3.Cursor object at 0x7f4e7dd8fa80&gt;</div><div class="line">&gt;&gt;&gt; r = c.fetchone()</div><div class="line">&gt;&gt;&gt; type(r)</div><div class="line">&lt;class 'sqlite3.Row'&gt;</div><div class="line">&gt;&gt;&gt; tuple(r)</div><div class="line">('2006-01-05', 'BUY', 'RHAT', 100.0, 35.14)</div><div class="line">&gt;&gt;&gt; len(r)</div><div class="line">5</div><div class="line">&gt;&gt;&gt; r[2]</div><div class="line">'RHAT'</div><div class="line">&gt;&gt;&gt; r.keys()</div><div class="line">['date', 'trans', 'symbol', 'qty', 'price']</div><div class="line">&gt;&gt;&gt; r['qty']</div><div class="line">100.0</div><div class="line">&gt;&gt;&gt; for member in r:</div><div class="line">...     print(member)</div><div class="line">...</div><div class="line">2006-01-05</div><div class="line">BUY</div><div class="line">RHAT</div><div class="line">100.0</div><div class="line">35.14</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="更多内容"><a href="#更多内容" class="headerlink" title="更多内容"></a>更多内容</h2><p><a href="http://www.cnblogs.com/yuxc/archive/2011/08/18/2143606.html" target="_blank" rel="external">请参考:一块努力的牛皮糖</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[SQLAlchemy-学习]]></title>
      <url>https://super3h.me/2017/01/18/Python-SQLAlchemy/</url>
      <content type="html"><![CDATA[<h1 id="定义model"><a href="#定义model" class="headerlink" title="定义model"></a>定义<code>model</code></h1><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(Base)</span>:</span></div><div class="line">    <span class="comment">#表名</span></div><div class="line">    __tablename__=<span class="string">'user'</span></div><div class="line">    <span class="comment">#表结构</span></div><div class="line">    id = Column(Integer,primary_key=<span class="keyword">True</span>)</div><div class="line">    name = Column(String(<span class="number">20</span>))</div><div class="line">    username = Column(String(<span class="number">20</span>))</div><div class="line">    password = Column(String(<span class="number">20</span>))</div></pre></td></tr></table></figure>
<blockquote>
<p>用法如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">user=User(name=<span class="string">'hhh'</span>,username=<span class="string">'cs781176645'</span>,password=<span class="string">'123456'</span>)</div></pre></td></tr></table></figure></p>
<p>不用再多此一举，创建一个User对象</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[flask学习]]></title>
      <url>https://super3h.me/2017/01/15/Python-flask/</url>
      <content type="html"><![CDATA[<h1 id="虚拟环境配置"><a href="#虚拟环境配置" class="headerlink" title="虚拟环境配置"></a>虚拟环境配置</h1><h2 id="虚拟环境操作"><a href="#虚拟环境操作" class="headerlink" title="虚拟环境操作"></a>虚拟环境操作</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#创建虚拟环境</div><div class="line">virtualenv env</div><div class="line">cd env\Scripts</div><div class="line">#激活</div><div class="line">activate</div><div class="line">#退出</div><div class="line">deactivate</div></pre></td></tr></table></figure>
<h1 id="调试模式"><a href="#调试模式" class="headerlink" title="调试模式"></a>调试模式</h1><blockquote>
<p>有两种途径来启用调试模式。一种是直接在应用对象上设置:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">app.debug = <span class="keyword">True</span></div><div class="line">app.run()</div></pre></td></tr></table></figure></p>
<p>另一种是作为 run 方法的一个参数传入:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">app.run(debug=<span class="keyword">True</span>)</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="静态文件相对路径问题"><a href="#静态文件相对路径问题" class="headerlink" title="静态文件相对路径问题"></a>静态文件相对路径问题</h1><h2 id="问题引入"><a href="#问题引入" class="headerlink" title="问题引入"></a>问题引入</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@app.route('/regist',methods=['POST'])</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">regist</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> render_template(<span class="string">'signAndregist.html'</span>）</div></pre></td></tr></table></figure>
<blockquote>
<p><code>regist</code>映射到<code>html</code>时，导致相对路径发生变化，致使<code>html</code>里的<code>css</code>等文件路径出错</p>
</blockquote>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><blockquote>
<p>在如下图的对应位置新建一个<code>static</code>文件夹，将对应的文件移入<code>static</code>文件夹的里<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALkAAACOCAIAAADisD4eAAAMU0lEQVR4nO2dz2/TSB/G8z+tVnqVI9oT72255dpXvrzilL31gF6pF6QgpdpcVop2ObzRKwGhi2gC6jZst5TQ0BDESzHLG+Gq7QpDS2ugbZzg0HkP4x/j8fhXEjtj5/uRhYrjeCb44ZmJ/XS+GQQAwchMuwNAYhhLK5cvX55UPwD+idVXaqKar8oXC+LFgpivyjVRjbN1YEzi8xVFRbmSRO7JlSQZ1JIcIvcV0kvmylK5o6gIqQiVm8pcWQKPSRCR+wrpJTVRzZWlUlMpNZVcSSL1QVkOQbeYzWQyGaFeFzJCPUTvusVsuDcA3kTrK4WGkiO8ZKEmz1V0L5mrSAs1WUVIVVGpqeTKUr4qO89AXHDQypQJrZWV31YXWaz8tuo8OFeWKh2l0FBKDQULgnq11FQKDWW+JuNxynmGupDJFrvGjxPXCugpBKG1sri4+EXTnNvi4qLz4LmyJCmoKatVUamKynxNrhgeU+nof81X5XxVLjUV0ArnRKuVXFmSFCQpqiirNVFdqMmFhoLnK4WGMleW8lU5X5PzNbnUYGilLmQMhDqpFX0Oo7/gso/QAX6NFgVxel2P1h5CoNliXT+1ULcOMQ7ArVhvTLHy4tCKqKgdWe3IakNSKx0FOwq2k/maPF+T8zW5wNIKYvtKtyjou1Bd0K8OwyCMXXXBurI05NuIpqz9dcHUBdYDrUO7DM3+pJFRtHJ09OHvc/8ht6OjD1gr+JuR+ef3JUlWkKSoTUltSGpNVKsdpdxR8jVdJaZoFhryhYUQY5DDRfCVJDXRLWYzguB98exTZzvZYtcuIObPlEjTPKiNqBXnxvQVrIOGpGK5VEWlgrVStYRSaCj5mvx9SaJmvhiGVrrFrCkK+tJgCVlXMZPNZl1NBdFaYRwIWrEYRSv7LJhawXPYXFmar8lNSe3IalXUtYJVslCTcyXpYkEsNRWVdTeOoRViV7eYNcegIjGXsQ1L1kFOqDHIOqwumHblrxX7PCqtUolYKxhZRXg6Ml+TO7LalNRCQyk0lLmKdGFBnK/JsuLaHHu+Yow/WUFgjCHEhJbUAfMq6ucirrt9ihrMV4RZmNpGfH+FRJTVfFW+sCAWGgq+m/LPitRJ/AOhNA86FHHnVxqSOleWcmVpGg+A6OnrJK4xaAUICmgFABxMRysQqEsi4CtAUHj3lQev31Wf71ef7/+y8efVu9v50h28Rdo9gAnvvlJ9vr9/dIY35UzDPxR+/5jLl6bdtZmDa19RxGtYK5t/nW/+db6283Vt56typhV+/3j17vaU5BI2GpEe+PUVRbyGEKo+31fONEoreLv0j38dPvlb7P0CrURP2Bu+WCu/bPw5HJyaWqn/T9/8tBLdbQ9vraT5dkt8WgkVfEGGVq7e3VbONO3k8eHGpcONS4cr31nbr98e/vqtS2uglcnDr1Z0cRibpr7DW/9oo3+08eV4qX+04aKVSANvHvG8IO0yM33JgGutDAeneNPUd1+Ol74cL/Xf/1t9+/PZ3o9nez+6awVFGXjzjOf5tptk34lVK8EDdQihw41L573/YomYQsEqUcRrinitJ98LpJUJB96843lB2s24Zzq5Jm6tBAzUIYdWbELZ/kHZ/uHz7o2gWplk4M07nufbrnW2xCkmVq2ECkkdrnynnTymhh5TKCG0MuHAm2c8z7ddRn4vMfCuFbzh+WxPvteT733evYE3zzEousCbTzzPr11nfi8x8Ht/xfn1mLlF1t/k/b+PGn7v204b0AoN18+DpgpohQZ8BQhKwnwlCYaUWlLoK/v7++12u+XCzs7O169fp93HRJJCX2m32/1+X9O0oYN+v7++vg5yGY0U+kqr1dI07fT09Mzg06dPiqK8f/9+OBzKsvzw4UOQywikzVfOz89brdZwOFRVdTAYqKqqqurJycnHjx8PDg6Gw2Gv1zs9PX306NHOzg7j/d2i5+/K2/G6ix/VO4kzxP0tLW2+YmplMBisra2trKwsLy8vLS3duHGjUqmQ41Gr1To/P6ffD1pxJ7W+Ys5XNE3r9/t4JPrw4cPBwcHbt29dtRKKCWsl1B2dmdFKdJhaGQ6Hjx8/Xl9ff/Dgwf3795eXl+/cuXP79u1bt24dHR2BVkYgtb5Cgd2l1+udnJx8/vzZcwwiHkQXqbAcomMp1gt0BI58Tu1YGsx2clssT3+/b2xvZrQSHaRWOp3OkydPms3mw4cP19bWGo3G6urqyspKr9cLphUyaGBF6GxPjK2spDN6Z+xlmAjz5I4FY7xiezOjlTF9xeNPN1/B1jIYDAaDQb/fD+or1uV3hOnIQ9gROPMF53DDOrlr/pL588xoJTpIrYii+OLFi2fPnj19+nRra2tzc3Nzc7PZbEaiFfbEBbQyNtE91nH6iqZpmqZ9sTOiVmxjEBmiZEbv9FPYBxmnuEArU4LUyps3b7rd7uvXr1+9evXy5cttA/x1eiSt2KewRWqWYsu7EbMZY5rroxUyUwdaMYjTV9xotVoR9SGtpM1XEEJbW1uDwcBbKIPBoN1uT7unCSNtvoIQ2tvb29racsskYNrt9t7eXnR9SCUp9BUgItLmK9/8FMc2m6TNV0Ar0cG7r4RdLw60Eh28+0rY9eJAK9HBta+MsF7cZNRwE+0idP0maMUGv74y2npxoJXo4Pf3mUdbL85DAdeP0R+rYx0AWomJeNaLA61EB79aGW29OPNy5jrWzis/oT/MvxyjnDHKYLA+bAfcRLsIXTFOZb602wGtxEI868WRE44r7rZxXUI5vH8VIeNI6wDi7X8QEgFfiYl41ov7xm4G5PyUGmIo42FrZdXwIdBK+taLc05BkKEYSgq6WxAWAlrxhvc1wMKuF2eOQddXaTuxpEAoALuL9xhkjVwwX4mHeNaLM//rXzGLPUv2QecY5Qy/QQjtSpYsrAPI6Q4xC74CvhIP8awXF+Qb7/jbbMLvfdvRAK1EB9fPg0YAtBId4CuglaAkzFdgvbgpkjZfAaIjtb4CBVgnTmp9BQqwTpx0+gqXBVgTTwp9hdcCrIknAb4SbwFWwJUE+Eq8BVgBVxLgKzEWYMUwV36zlYdKbi3UcUihr4xXgJVYNgXjXB1yVqvFJMNX4ivA6rYOIL32F3Nlr5STDF+JrwCr68pvzsqniayFOg7J8JUYC7CSK7/Vi8Uuo/JpkmuhjkMyfCXOAqzExNVRlNu2+uysTW2T4CtJK8CaWhLgKwAnJMBXAE4AXwGCMiu+Ak42PuArFlCA1RvwFQsowOoN+IoFFGD1BnxFZ9wCrBTjF7/kD/AVnXELsFKAViYFz74ymQKsoJUUM+ECrKCVScGzr1AELcCKUPASq8i/TCp1NuYjyrjze+ArOuMWYA1XYjVImVRKbNTFnkJ+b7Z8JcICrOFKrPqVqKOHMMdln0Z+D3xFZ9wCrOFKrI6gFftZppHfmxVf8WXcAqzhSqwGKX1pH4MYlVjjzu+Br+iMW4AVhSixGkAryD56kSI0Dog9vwe+ogMFWH0BX7GAAqzegK9YQAFWb8BXgKCArwBB4ddXIKXGG/z6CqTUeINfX4GUGm9w6iuTSKnp96qEel0Idytqur+lHLa38cGpr4yfUiMu+CxqxfEAaQLw7isjp9SIu+VRaCU6PXn3NkC7xr3/lGjFl/FTarOqFf2JURS5PN59hSJgSo147CbUyX99VlDMsY+4Hvg1+uIQpyceJtuDbb7JN9wK83mfW2+DtGt1kaUVZqPkA0mv9GcCfGWklBrTV7pFgXyIa/5DUVowdjmiZ4xjqKZCJN/sMrQiBp699W/X+fHpbjMaDWbC0/SVCFNq7h/f4SLO8Fi3mM0IgjO2SGKfOtsJlHyjry4pMo/e+rbr/Pgu3aYbNXXt+qkT4CujpNSYWiETSPT/QzI8ho/LZr1GfPs1GyH55qsVdm9922U0z+6247zZYtd7NpQArZh2EialxtIKsatbzJpjkCM8ZuXKsq7eQo0FIyTfbGcn/uLZW/92nR+fnJC4NYrFIgieX7QToJXRUmrs+Yrh6FlBYHg5MaG1J8sYgtHP5fbbFgF9RXAG13x669eu8+PTWmE1anxUz+9OCdCKN4lNqU3ljp9Xo75fsznVCuIrpUZPIydxjTnTSoDu8KuVtKfUONKK60Brh1+tALwBWgGCAloBggJaAYICWgGCAloBggJaAYICWgGCAloBggJaAYICWgGCAloBggJaAYICWgGCAloBgvJ/VewRt7FZG8QAAAAASUVORK5CYII=" alt=""><br>并在<code>html</code>里加入以下配置<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;link href=<span class="string">"&#123;&#123;url_for('static',filename='css/style.css')&#125;&#125;"</span> rel=<span class="string">'stylesheet'</span> type=<span class="string">'text/css'</span> /&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="唯一URL-重定向行为"><a href="#唯一URL-重定向行为" class="headerlink" title="唯一URL / 重定向行为"></a>唯一<code>URL /</code> 重定向行为</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@app.route('/projects/')</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">projects</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'The project page'</span></div><div class="line"></div><div class="line"><span class="meta">@app.route('/about')</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">about</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'The about page'</span></div></pre></td></tr></table></figure>
<blockquote>
<p>虽然它们看起来着实相似，但它们结尾斜线的使用在 URL 定义 中不同。 第一种情况中，指向 projects 的规范 URL 尾端有一个斜线。这种感觉很像在文件系统中的文件夹。访问一个结尾不带斜线的 URL 会被 Flask 重定向到带斜线的规范 URL 去。</p>
<p>然而，第二种情况的 URL 结尾不带斜线，类似 UNIX-like 系统下的文件的路径名。访问结尾带斜线的 URL 会产生一个 404 “Not Found” 错误。</p>
<p>这个行为使得在遗忘尾斜线时，允许关联的 URL 接任工作，与 Apache 和其它的服务器的行为并无二异。此外，也保证了 URL 的唯一，有助于避免搜索引擎索引同一个页面两次。</p>
</blockquote>
<h1 id="目录错误"><a href="#目录错误" class="headerlink" title="目录错误"></a>目录错误</h1><p><code>app.py</code>没和<code>templates</code>同一目录<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">raise</span> TemplateNotFound(template)</div><div class="line">TemplateNotFound: home.html</div></pre></td></tr></table></figure></p>
<h2 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h2><p><img src="http://www.liaoxuefeng.com/files/attachments/001400341074577704e1ff7d52246dab80eb4992d12fcd1000" alt=""></p>
<h1 id="编码问题"><a href="#编码问题" class="headerlink" title="编码问题"></a>编码问题</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">'gbk'</span> codec can<span class="string">'t decode bytes in position 52-53: illegal multibyte sequence</span></div></pre></td></tr></table></figure>
<h2 id="解决方案-2"><a href="#解决方案-2" class="headerlink" title="解决方案"></a>解决方案</h2><blockquote>
<p>编码的问题,最好都转化为<code>unicode</code>编码</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[having的用法]]></title>
      <url>https://super3h.me/2017/01/09/mysql-having/</url>
      <content type="html"><![CDATA[<h1 id="having和where的区别"><a href="#having和where的区别" class="headerlink" title="having和where的区别"></a>having和where的区别</h1><p><font color="green"></font></p>
<ul>
<li>having字句可以让我们筛选成组后的各种数据，where字句在聚合前先筛选记录，也就是说作用在group by和having字句前。而 having子句在聚合后对组记录进行筛选。</li>
<li>WHERE 子句作用于表和视图，HAVING 子句作用于组。<br><h1 id="用法错误"><a href="#用法错误" class="headerlink" title="用法错误"></a>用法错误</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> student <span class="keyword">GROUP</span> <span class="keyword">BY</span> dept <span class="keyword">HAVING</span> gender=<span class="string">'v'</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="错误原因"><a href="#错误原因" class="headerlink" title="错误原因"></a>错误原因</h2><p>HAVING 子句作用于组。当根据dept分组后无法再根据gender来查询了</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> dept,<span class="keyword">count</span>(*) <span class="keyword">from</span> student <span class="keyword">where</span> gender=<span class="string">'v'</span> <span class="keyword">group</span> <span class="keyword">by</span> dept</div></pre></td></tr></table></figure>
<p>where字句在聚合前先筛选记录。所以在分组之前就查找出来</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Java中反射机制]]></title>
      <url>https://super3h.me/2017/01/06/java-class/</url>
      <content type="html"><![CDATA[<h1 id="Java学习参考"><a href="#Java学习参考" class="headerlink" title="Java学习参考"></a>Java学习参考</h1><p><a href="http://blog.sina.com.cn/s/blog_7ffb8dd5010127ix.html" target="_blank" rel="external">Java中反射机制和Class.forName、实例对象.class(属性)、实例对象getClass()的区别</a></p>
<p><a href="http://blog.sina.com.cn/s/articlelist_2147192277_0_2.html" target="_blank" rel="external">博客参考地址</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Session与Cookie]]></title>
      <url>https://super3h.me/2017/01/02/Session%E4%B8%8ECookie/</url>
      <content type="html"><![CDATA[<h1 id="两者的区别"><a href="#两者的区别" class="headerlink" title="两者的区别"></a>两者的区别</h1><ul>
<li>Cookie是把用户的数据写给用户的浏览器。</li>
<li>Session技术把Cookie可以被用户禁用，但是sessio用户的数据写到用户独占的$_SESSION中,存在服务器的某个路径的文件中。</li>
<li><a href="http://www.cnblogs.com/shiyangxt/archive/2008/10/07/1305506.html" target="_blank" rel="external">Session与cookie的详细区别</a></li>
</ul>
<h1 id="用处"><a href="#用处" class="headerlink" title="用处"></a>用处</h1><h2 id="cookie的使用范围"><a href="#cookie的使用范围" class="headerlink" title="cookie的使用范围"></a>cookie的使用范围</h2><ul>
<li>保存上次登录时间等信息 </li>
<li>保存用户名、密码，在一定时间不用</li>
<li>重新登录</li>
<li>记录用户访问网站的喜好(比如有无背景音乐、网页的背景色是什么</li>
<li>网站的个性化，比如定制网站的服务，内容。<h2 id="session的使用范围"><a href="#session的使用范围" class="headerlink" title="session的使用范围"></a>session的使用范围</h2></li>
<li>网上商城中的购物车</li>
<li>保存登录用户的信息</li>
<li>将某些数据放入到Session中，供同一用户的各页面使用</li>
<li>防止用户非法登录</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[input输入框]]></title>
      <url>https://super3h.me/2016/12/31/input%E8%BE%93%E5%85%A5%E6%A1%86/</url>
      <content type="html"><![CDATA[<h1 id="input控制键盘"><a href="#input控制键盘" class="headerlink" title="input控制键盘"></a>input控制键盘</h1><h2 id="文本框只能输入数字代码-小数点也不能输入"><a href="#文本框只能输入数字代码-小数点也不能输入" class="headerlink" title="文本框只能输入数字代码(小数点也不能输入)"></a>文本框只能输入数字代码(小数点也不能输入)</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onkeyup</span>=<span class="string">"this.value=this.value.replace(/\D/g,'')"</span> <span class="attr">onafterpaste</span>=<span class="string">"this.value=this.value.replace(/\D/g,'')"</span>&gt;</span></div></pre></td></tr></table></figure>
<input onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"> 

<h3 id="正则-D-g"><a href="#正则-D-g" class="headerlink" title="正则 /\D/g"></a>正则 /\D/g</h3><ul>
<li>/表达式内容/参数</li>
<li>如/\D/g</li>
<li>g :全局匹配</li>
</ul>
<h2 id="只能输入数字-能输小数点"><a href="#只能输入数字-能输小数点" class="headerlink" title="只能输入数字,能输小数点."></a>只能输入数字,能输小数点.</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onkeyup</span>=<span class="string">"if(isNaN(value))execCommand('undo')"</span> <span class="attr">onafterpaste</span>=<span class="string">"if(isNaN(value))execCommand('undo')"</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">txt1</span> <span class="attr">onchange</span>=<span class="string">"if(/\D/.test(this.value))&#123;alert('只能输入数字');this.value='';&#125;"</span>&gt;</span></div></pre></td></tr></table></figure>
<p><input onkeyup="if(isNaN(value))execCommand('undo')" onafterpaste="if(isNaN(value))execCommand('undo')"> </p>
<input name="txt1" onchange="if(/\D/.test(this.value)){alert('只能输入数字');this.value='';}"> 

<h2 id="数字和小数点方法二"><a href="#数字和小数点方法二" class="headerlink" title="数字和小数点方法二"></a>数字和小数点方法二</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">text</span> <span class="attr">tvalue</span>=<span class="string">""</span> <span class="attr">ovalue</span>=<span class="string">""</span> <span class="attr">onkeypress</span>=<span class="string">"if(!this.value.match(/^[\+\-]?\d*?\.?\d*?$/))this.value=this.t_value;else this.tvalue=this.value;if(this.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?)?$/))this.ovalue=this.value"</span> <span class="attr">onkeyup</span>=<span class="string">"if(!this.value.match(/^[\+\-]?\d*?\.?\d*?$/))this.value=this.t_value;else this.tvalue=this.value;if(this.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?)?$/))this.ovalue=this.value"</span> <span class="attr">onblur</span>=<span class="string">"if(!this.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?|\.\d*?)?$/))this.value=this.o_value;else&#123;if(this.value.match(/^\.\d+$/))this.value=0+this.value;if(this.value.match(/^\.$/))this.value=0;this.ovalue=this.value&#125;"</span>&gt;</span></div></pre></td></tr></table></figure>
<input type="text" tvalue="" ovalue="" onkeypress="if(!this.value.match(/^[\+\-]?\d*?\.?\d*?$/))this.value=this.t_value;else this.tvalue=this.value;if(this.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?)?$/))this.ovalue=this.value" onkeyup="if(!this.value.match(/^[\+\-]?\d*?\.?\d*?$/))this.value=this.t_value;else this.tvalue=this.value;if(this.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?)?$/))this.ovalue=this.value" onblur="if(!this.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?|\.\d*?)?$/))this.value=this.o_value;else{if(this.value.match(/^\.\d+$/))this.value=0+this.value;if(this.value.match(/^\.$/))this.value=0;this.ovalue=this.value}">

<h2 id="只能输入字母和汉字"><a href="#只能输入字母和汉字" class="headerlink" title="只能输入字母和汉字"></a>只能输入字母和汉字</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onkeyup</span>=<span class="string">"value=value.replace(/[\d]/g,'') "</span><span class="attr">onbeforepaste</span>=<span class="string">"clipboardData.setData('text',clipboardData.getData('text').replace(/[\d]/g,''))"</span> <span class="attr">maxlength</span>=<span class="string">10</span> <span class="attr">name</span>=<span class="string">"Numbers"</span>&gt;</span></div></pre></td></tr></table></figure>
<input onkeyup="value=value.replace(/[\d]/g,'') " onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[\d]/g,''))" maxlength="10" name="Numbers"> 

<h2 id="只能输入英文字母和数字-不能输入中文"><a href="#只能输入英文字母和数字-不能输入中文" class="headerlink" title="只能输入英文字母和数字,不能输入中文"></a>只能输入英文字母和数字,不能输入中文</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onkeyup</span>=<span class="string">"value=value.replace(/[^\w\.\/]/ig,'')"</span>&gt;</span></div></pre></td></tr></table></figure>
<input onkeyup="value=value.replace(/[^\w\.\/]/ig,'')"> 

<h2 id="只能输入数字和英文"><a href="#只能输入数字和英文" class="headerlink" title="只能输入数字和英文"></a>只能输入数字和英文</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"Red"</span>&gt;</span>chun<span class="tag">&lt;/<span class="name">font</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onKeyUp</span>=<span class="string">"value=value.replace(/[^\d|chun]/g,'')"</span>&gt;</span></div></pre></td></tr></table></figure>
<p><font color="Red">chun</font> </p>
<input onkeyup="value=value.replace(/[^\d|chun]/g,'')"> 

<h2 id="小数点后只能有最多两位-数字-中文都可输入-不能输入字母和运算符号"><a href="#小数点后只能有最多两位-数字-中文都可输入-不能输入字母和运算符号" class="headerlink" title="小数点后只能有最多两位(数字,中文都可输入),不能输入字母和运算符号:"></a>小数点后只能有最多两位(数字,中文都可输入),不能输入字母和运算符号:</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onKeyPress</span>=<span class="string">"if((event.keyCode&lt;48 || event.keyCode&gt;57) &amp;&amp; event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false"</span>&gt;</span></div></pre></td></tr></table></figure>
<input onkeypress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false"> 

<h2 id="小数点后只能有最多两位-数字-字母-中文都可输入-可以输入运算符号"><a href="#小数点后只能有最多两位-数字-字母-中文都可输入-可以输入运算符号" class="headerlink" title="小数点后只能有最多两位(数字,字母,中文都可输入),可以输入运算符号"></a>小数点后只能有最多两位(数字,字母,中文都可输入),可以输入运算符号</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onkeyup</span>=<span class="string">"this.value=this.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,'$1$2.$3')"</span>&gt;</span></div></pre></td></tr></table></figure>
<input onkeyup="this.value=this.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,'$1$2.$3')"> 

<h2 id="只能是数字和小数点和加减乘除"><a href="#只能是数字和小数点和加减乘除" class="headerlink" title="只能是数字和小数点和加减乘除"></a>只能是数字和小数点和加减乘除</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">onkeypress="return event.keyCode&gt;=4&amp;&amp;event.keyCode<span class="tag">&lt;<span class="name">=57"</span></span></div></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[python2.7 IndentationError]]></title>
      <url>https://super3h.me/2016/12/25/Python-IndentationError/</url>
      <content type="html"><![CDATA[<h1 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h1><font color="red"><br>- IndentationError: unexpected indent<br></font>

<h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><font color="green"><br>- 你的文件里格式不对了，可能是tab和空格没对齐的问题，你需要检查下tab和空格了<br></font>

<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><ul>
<li>重新调整空格(4个空格)</li>
<li><a href="http://dikar.iteye.com/blog/308934" target="_blank" rel="external">方案二</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[python2.7 安装配置虚拟环境出错]]></title>
      <url>https://super3h.me/2016/12/25/Python-virtualenv/</url>
      <content type="html"><![CDATA[<h1 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h1><font color="red"><br>- virtualenv test_env<br>- UnicodeDecodeError: ‘ascii’ codec can’t decode byte 0xbb in position 7: ordinal not in range(128)<br></font>

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><font color="green"><br>修改编码为gbk，修改D:\Python27\Lib\ntpath.py(位置由个人python安装目录决定)文件中的def join(path, *paths)函数，在函数内第一行加入<br></font>

<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Join two (or more) paths.  </span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">join</span><span class="params">(path, *paths)</span>:</span>  </div><div class="line">    <span class="string">"""Join two or more pathname components, inserting "\\" as needed."""</span>  </div><div class="line">    <span class="keyword">import</span> sys</div><div class="line">    reload(sys) </div><div class="line">    sys.setdefaultencoding(<span class="string">'gbk'</span>)</div><div class="line">    result_drive, result_path = splitdrive(path)  </div><div class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> paths:  </div><div class="line">        p_drive, p_path = splitdrive(p)  </div><div class="line">        <span class="keyword">if</span> p_path <span class="keyword">and</span> p_path[<span class="number">0</span>] <span class="keyword">in</span> <span class="string">'\\/'</span>:  </div><div class="line">            <span class="comment"># Second path is absolute  </span></div><div class="line">            <span class="keyword">if</span> p_drive <span class="keyword">or</span> <span class="keyword">not</span> result_drive:  </div><div class="line">                result_drive = p_drive  </div><div class="line">            result_path = p_path  </div><div class="line">            <span class="keyword">continue</span>  </div><div class="line">        <span class="keyword">elif</span> p_drive <span class="keyword">and</span> p_drive != result_drive:  </div><div class="line">            <span class="keyword">if</span> p_drive.lower() != result_drive.lower():  </div><div class="line">                <span class="comment"># Different drives =&gt; ignore the first path entirely  </span></div><div class="line">                result_drive = p_drive  </div><div class="line">                result_path = p_path  </div><div class="line">                <span class="keyword">continue</span>  </div><div class="line">            <span class="comment"># Same drive in different case  </span></div><div class="line">            result_drive = p_drive  </div><div class="line">        <span class="comment"># Second path is relative to the first  </span></div><div class="line">        <span class="keyword">if</span> result_path <span class="keyword">and</span> result_path[<span class="number">-1</span>] <span class="keyword">not</span> <span class="keyword">in</span> <span class="string">'\\/'</span>:  </div><div class="line">            result_path = result_path + <span class="string">'\\'</span>  </div><div class="line">        result_path = result_path + p_path  </div><div class="line">    <span class="comment">## add separator between UNC and non-absolute path  </span></div><div class="line">    <span class="keyword">if</span> (result_path <span class="keyword">and</span> result_path[<span class="number">0</span>] <span class="keyword">not</span> <span class="keyword">in</span> <span class="string">'\\/'</span> <span class="keyword">and</span>  </div><div class="line">        result_drive <span class="keyword">and</span> result_drive[<span class="number">-1</span>:] != <span class="string">':'</span>):  </div><div class="line">        <span class="keyword">return</span> result_drive + sep + result_path  </div><div class="line">    <span class="keyword">return</span> result_drive + result_path</div></pre></td></tr></table></figure>
<font color="red"><br>- 加了以下几行（注意缩进问题–&gt;4个空格）<br></font>

<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line">reload(sys) </div><div class="line">sys.setdefaultencoding(<span class="string">'gbk'</span>)</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[python2.7 安装MySQL-python报错]]></title>
      <url>https://super3h.me/2016/12/25/Python-Mysql_conn/</url>
      <content type="html"><![CDATA[<h1 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h1><font color="red"><br>- error: Microsoft Visual C++ 9.0 is required (Unable to find vcvarsall.bat).<br></font>

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><font color="green"><br>1. 进这个网站<a href="https://www.microsoft.com/en-us/download/details.aspx?id=44266" target="_blank" rel="external">Microsoft</a><br>2. 下载Microsoft Visual C++ Compiler for Python 2.7<br>3. 完成安装即可<br></font>

<h1 id="错误-1"><a href="#错误-1" class="headerlink" title="错误"></a>错误</h1><font color="red"><br>- Setup script exited with error: command ‘C:\Users\\xbb\xc6\xbb\xd4\xbb\xd4\AppData\Local\Programs\Common\Microsoft\Visual C++ for Python\9.0\VC\Bin\amd64\cl.exe’ failed with exit status 2<br></font>

<h2 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h2><font color="green"><br>- 下面网址下载安装：<a href="http://pan.baidu.com/disk/home#list/vmode=list&amp;path=%2Fpython%2FMysql-Connection" target="_blank" rel="external">MySQL-python-1.2.3.win-amd64-py2.7.exe</a><br>- 系统会自动找到python安装的路径，如下图<br></font>

<p><img src="https://i0.wp.com/www.crifan.com/files/pic/uploads/2013/04/found-python-2.7-install-path_thumb_thumb.png" alt=""></p>
<h1 id="错误-2"><a href="#错误-2" class="headerlink" title="错误"></a>错误</h1><font color="red"><br>- Could not find a version that satisfies the requirement mysql-connector-python (from versions: )No matching distribution found for mysql-connector-python<br></font>


<h2 id="解决方案-2"><a href="#解决方案-2" class="headerlink" title="解决方案"></a>解决方案</h2><font color="green"><br>- git clone git@github.com:mysql/mysql-connector-python.git<br>- cd mysql-connector-python<br>- python setup.py install<br></font>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[python2.7 升级pip失败的原因]]></title>
      <url>https://super3h.me/2016/12/25/Python-pip/</url>
      <content type="html"><![CDATA[<h1 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h1><font color="red">UnicodeDecodeError: ‘ascii’ codec can’t decode byte 0xbb in position 7: ordinal not in range(128)</font>

<h2 id="错误原因"><a href="#错误原因" class="headerlink" title="错误原因"></a>错误原因</h2><ul>
<li><font color="bule">原因是pip安装python包会加载我的用户目录，我的用户目录恰好是中文的，ascii不能编码</font>


</li>
</ul>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><font color="green">python目录 Python27\Lib\site-packages 建一个文件sitecustomize.py<br><br>内容写：<br>import sys<br>sys.setdefaultencoding(‘gb2312’)<br>python会自动运行这个文件。</font>]]></content>
    </entry>
    
  
  
</search>
